(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(e,t,n){var r=n("b622"),a=r("toStringTag"),o={};o[a]="z",e.exports="[object z]"===String(o)},"011b":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("76c2"),a=n("a3f7"),o=n("c77c"),s=n("b9b9"),i=n("54ef"),c=n("6791"),u=n("a09b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t){let n=Object(a["a"])(e,"a","div"),i=Object(a["a"])(t,"b","div");[n,i]=Object(r["b"])(n,i);const l=Object(o["a"])(n,i),d=Object(u["a"])(l),p=Object(s["a"])(i,d);return Object(c["a"])(p,d,l)}const d=Object(i["a"])({divNoNan_:l})},"015f":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("6ad5"),a=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t){if((Object(r["A"])(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Object(r["A"])(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");const n=[],o=[];return Object(a["a"])(e,n,o,t)}},"0280":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("043e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t){const n=[];for(let r=0;r<t.length;r++)t[r]&&n.push(r);const a=Object(r["a"])(e,"int32"),o=Object(r["a"])([n.length,e.length],"int32");for(let r=0;r<n.length;r++){const t=a.indexToLoc(n[r]),s=r*e.length;o.values.set(t,s)}return o.toTensor()}},"0366":function(e,t,n){var r=n("1c0b");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},"043e":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("34d7"),a=n("6ad5");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t="float32",n){return t=t||"float32",a["c"](e),new r["b"](e,t,n)}},"04b8":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},"04c4":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n){const i=Object(o["a"])(e,"x","bincount"),c=Object(o["a"])(t,"weights","bincount");s["b"]("int32"===i.dtype,()=>"Error in bincount: input dtype must be int32, but got "+i.dtype),s["b"](n>=0,()=>`size must be non-negative, but got ${n}.`),s["b"](c.size===i.size||0===c.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: `+c.shape+".");const u={x:i,weights:c},l={size:n};return r["a"].runKernel(a["u"],u,l)}const u=Object(i["a"])({bincount_:c})},"05bb":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("a3f7"),a=n("6ad5"),o=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e,t,n){if(Object(a["d"])(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const s=Object(r["c"])(e,n);if(3!==s.length&&1!==s.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===s.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(o["a"])(e,t,s,n)}},"06cf":function(e,t,n){var r=n("83ab"),a=n("d1e7"),o=n("5c6c"),s=n("fc6a"),i=n("c04ea"),c=n("5135"),u=n("0cfb"),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=s(e),t=i(t,!0),u)try{return l(e,t)}catch(n){}if(c(e,t))return o(!a.f.call(e,t),e[t])}},"0777":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){const n=Object(o["a"])(e,"real","complex"),i=Object(o["a"])(t,"imag","complex");s["e"](n.shape,i.shape,`real and imag shapes, ${n.shape} and ${i.shape}, must match in call to tf.complex().`);const c={real:n,imag:i};return r["a"].runKernel(a["y"],c)}const u=Object(i["a"])({complex_:c})},"07d6":function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},"08a9":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","round"),n={x:t};return r["a"].runKernel(a["qc"],n)}const c=Object(s["a"])({round_:i})},"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("deb3"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t){let n=Object(s["a"])(e,"a","maximum"),u=Object(s["a"])(t,"b","maximum");[n,u]=Object(o["b"])(n,u),"bool"===n.dtype&&(n=Object(c["a"])(n,"int32"),u=Object(c["a"])(u,"int32")),Object(i["a"])(n.shape,u.shape);const l={a:n,b:u};return r["a"].runKernel(a["Jb"],l)}const d=Object(u["a"])({maximum_:l})},"0cfb":function(e,t,n){var r=n("83ab"),a=n("d039"),o=n("cc12");e.exports=!r&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0db5":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","onesLike"),n={x:t};return r["a"].runKernel(a["Xb"],n)}const c=Object(s["a"])({onesLike_:i})},"0eb5":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t,n=0){const s=Object(o["a"])(e,"x","pad");if(0===s.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},c={x:s};return r["a"].runKernel(a["Zb"],c,i)}const c=Object(s["a"])({pad_:i})},"113e":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},1212:function(e,t,n){(function(e){var r;(function(e,a,o){function s(e){var t=this,n=u();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new s(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}function u(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)};return t}a&&a.exports?a.exports=c:n("07d6")&&n("3c35")?(r=function(){return c}.call(t,n,t,a),void 0===r||(a.exports=r)):this.alea=c})(0,e,n("07d6"))}).call(this,n("62e4")(e))},"122e":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=null,n=!1){const s=Object(o["a"])(e,"x","mean"),i={x:s},c={axis:t,keepDims:n};return r["a"].runKernel(a["Kb"],i,c)}const c=Object(s["a"])({mean_:i})},"132b":function(e,t,n){"use strict";n.d(t,"a",(function(){return a["a"]})),n.d(t,"b",(function(){return o["a"]})),n.d(t,"c",(function(){return s["a"]})),n.d(t,"d",(function(){return i["a"]})),n.d(t,"e",(function(){return c["a"]})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return p["a"]})),n.d(t,"h",(function(){return f["a"]})),n.d(t,"k",(function(){return h["a"]})),n.d(t,"l",(function(){return m["a"]})),n.d(t,"m",(function(){return b["a"]})),n.d(t,"n",(function(){return g["a"]})),n.d(t,"o",(function(){return y["a"]})),n.d(t,"p",(function(){return x["a"]})),n.d(t,"q",(function(){return v["a"]})),n.d(t,"r",(function(){return O["a"]})),n.d(t,"s",(function(){return w["a"]})),n.d(t,"t",(function(){return C["a"]})),n.d(t,"u",(function(){return j})),n.d(t,"v",(function(){return E["a"]})),n.d(t,"w",(function(){return T["a"]})),n.d(t,"j",(function(){return Rt})),n.d(t,"i",(function(){return r}));var r={};n.r(r),n.d(r,"conv2d",(function(){return H})),n.d(r,"depthwiseConv2d",(function(){return Z})),n.d(r,"matMul",(function(){return ne}));var a=n("9117"),o=n("043e"),s=n("deb3"),i=n("f0a9"),c=n("649e"),u=n("54ef");function l(e,t){return Object(c["a"])(e,t)}const d=Object(u["a"])({concat2d_:l});var p=n("c77c"),f=n("dae8"),h=n("a5aa"),m=n("35c9"),b=n("015f"),g=n("ffb3"),y=n("6d3c"),x=n("d1f4"),v=n("d54d"),O=n("a009"),w=n("357d"),C=n("960f"),$=n("a3f7"),k=n("6ad5"),I=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function j(e,t,n){if(Object(k["d"])(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Object($["c"])(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(I["a"])(e,t,r,n)}var E=n("3a44"),T=n("5a2c"),N=n("b61d"),S=n("1ab7"),A=n("4c7a"),_=n("69dc"),R=n("6ae2"),F=n("538e"),D=n("c05b"),L=n("76c2"),P=n("526f"),M=n("dd7e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function B(e,t,n,r,a,o="NHWC",s){let i=e;3===e.rank&&(i=Object(m["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=Object(m["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]])),k["b"](4===i.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+i.shape+"."),k["b"](4===c.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."),k["b"](4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+".");const u="NHWC"===o?i.shape[3]:i.shape[1],l="NHWC"===o?c.shape[3]:c.shape[1];k["b"](u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),k["b"](l===n[3],()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${n[3]}).`),null!=s&&k["b"](k["v"](a),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${s} but got pad ${a}.`);const d={x:i,dy:c},p={strides:r,pad:a,dataFormat:o,dimRoundingMode:s,filterShape:n};return R["a"].runKernel(D["C"],d,p)}const V=Object(u["a"])({conv2DBackpropFilter_:B});var z=n("73d3"),U=n("b818"),W=n("4749");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function G({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:c,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(u=u||"linear",!1===Object(W["d"])(R["a"].state.gradientDepth,u)){let p=Object(M["a"])(e,t,n,r,o,s,i);return null!=c&&(p=Object(a["a"])(p,c)),Object(W["a"])(p,u,l,d)}const p=Object($["a"])(e,"x","conv2d"),f=Object($["a"])(t,"filter","conv2d");let h=p,b=!1;3===p.rank&&(b=!0,h=Object(m["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2]])),k["b"](4===h.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+h.rank+"."),k["b"](4===f.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+f.rank+"."),null!=i&&k["b"](k["v"](r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`),k["b"](h.shape[3]===f.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${f.shape[2]}.`),k["b"](U["h"](n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),k["b"]("NHWC"===o,()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`);const g=U["a"](h.shape,f.shape,n,s,r,i);let y,x;null!=c&&(y=Object($["a"])(c,"bias","fused conv2d"),[y]=Object(L["b"])(y,p),P["a"](g.outShape,y.shape)),null!=l&&(x=Object($["a"])(l,"prelu weights","fused conv2d"));const v=(e,t)=>{const[a,o,i,c]=t,l=Object(W["c"])(e,i,u);k["b"](U["i"](s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const d=Object(z["a"])(o.shape,l,a,n,r),p=V(o,l,a.shape,n,r),f=[d,p];if(null!=c){const e=Object(W["b"])(c,l);f.push(e)}return f},O={x:h,filter:f,bias:y,preluActivationWeights:x},w={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:u,leakyreluAlpha:d};if(null==c){const e=Object(F["a"])((e,t,n)=>{let r=R["a"].runKernel(D["gb"],O,w);return n([t,e,r]),b&&(r=Object(m["a"])(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}});return e(h,f)}{const e=Object(F["a"])((e,t,n,r)=>{let a=R["a"].runKernel(D["gb"],O,w);return r([t,e,a,n]),b&&(a=Object(m["a"])(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:v}});return e(h,f,y)}}const H=Object(u["a"])({fusedConv2d_:G});var K=n("838f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q(e,t,n,r,a,o=[1,1],s){let i=e;3===e.rank&&(i=Object(m["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=Object(m["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:i,dy:c},l={strides:r,pad:a,dimRoundingMode:s,dilations:o,filterShape:n};return R["a"].runKernel(D["O"],u,l)}const X=Object(u["a"])({depthwiseConv2dNativeBackpropFilter_:q});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y(e,t,n,r,a,o=[1,1],s){let i=t,c=!1;3===t.rank&&(c=!0,i=Object(m["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:i,filter:n},l={strides:r,pad:a,dimRoundingMode:s,dilations:o,inputShape:e},d=R["a"].runKernel(D["P"],u,l);return c?Object(m["a"])(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Q=Object(u["a"])({depthwiseConv2dNativeBackpropInput_:Y});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:c,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(!1===Object(W["d"])(R["a"].state.gradientDepth,u)){let p=Object(K["a"])(e,t,n,r,o,s,i);return null!=c&&(p=Object(a["a"])(p,c)),Object(W["a"])(p,u,l,d)}const p=Object($["a"])(e,"x","depthwiseConv2d"),f=Object($["a"])(t,"filter","depthwiseConv2d");let h=p,b=!1;3===p.rank&&(b=!0,h=Object(m["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2]])),k["b"](4===h.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),k["b"](4===f.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),k["b"](h.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),null==s&&(s=[1,1]),k["b"](U["h"](n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),null!=i&&k["b"](k["v"](r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${i} but got pad ${r}.`);const g=U["a"](h.shape,f.shape,n,s,r,i,!0);let y,x;null!=c&&(y=Object($["a"])(c,"bias","fused conv2d"),[y]=Object(L["b"])(y,p),P["a"](g.outShape,y.shape)),null!=l&&(x=Object($["a"])(l,"prelu weights","fused depthwiseConv2d"));const v=(e,t)=>{k["b"](U["i"](s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[a,o,c,l]=t,d=Object(W["c"])(e,c,u),p=Q(o.shape,d,a,n,r,s,i),f=X(o,d,a.shape,n,r,s,i);if(null!=l){const e=Object(W["b"])(y,d);return[p,f,e]}return[p,f]},O={x:h,filter:f,bias:y,preluActivationWeights:x},w={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:u,leakyreluAlpha:d};if(null==c){const e=Object(F["a"])((e,t,n)=>{let r=R["a"].runKernel(D["hb"],O,w);return n([t,e,r]),b&&(r=Object(m["a"])(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}});return e(h,f)}{const e=Object(F["a"])((e,t,n,r)=>{let a=R["a"].runKernel(D["hb"],O,w);return r([t,e,a,n]),b&&(a=Object(m["a"])(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:v}});return e(h,f,y)}}const Z=Object(u["a"])({fusedDepthwiseConv2d_:J});var ee=n("487b");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function te({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:c}){if(!1===Object(W["d"])(R["a"].state.gradientDepth,s)){let u=Object(ee["a"])(e,t,n,r);return null!=o&&(u=Object(a["a"])(u,o)),Object(W["a"])(u,s,i,c)}let u=Object($["a"])(e,"a","fused matMul"),l=Object($["a"])(t,"b","fused matMul");[u,l]=Object(L["b"])(u,l);const d=n?u.shape[u.rank-2]:u.shape[u.rank-1],p=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?l.shape[l.rank-2]:l.shape[l.rank-1],b=u.shape.slice(0,-2),g=l.shape.slice(0,-2),y=k["O"](b),x=k["O"](g);k["b"](u.rank>=2&&l.rank>=2&&u.rank===l.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${u.rank} and ${l.rank}.`),k["b"](k["a"](b,g),()=>`Error in fused matMul: outer dimensions (${b}) and (${g}) of Tensors with shapes ${u.shape} and `+l.shape+" must match."),k["b"](d===p,()=>`Error in fused matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const v=u.shape.slice(0,-2).concat([f,h]),O=n?Object(m["a"])(u,[y,d,f]):Object(m["a"])(u,[y,f,d]),w=r?Object(m["a"])(l,[x,h,p]):Object(m["a"])(l,[x,p,h]);let C,I;null!=o&&(C=Object($["a"])(o,"bias","fused matMul"),[C]=Object(L["b"])(C,u),P["a"](v,C.shape)),null!=i&&(I=Object($["a"])(i,"prelu weights","fused matMul"));const j=(e,t)=>{const[a,i,c,u]=t,l=Object(W["c"])(Object(m["a"])(e,c.shape),c,s);let d,p;if(n||r?!n&&r?(d=Object(ee["a"])(l,i,!1,!1),p=Object(ee["a"])(l,a,!0,!1)):n&&!r?(d=Object(ee["a"])(i,l,!1,!0),p=Object(ee["a"])(a,l,!1,!1)):(d=Object(ee["a"])(i,l,!0,!0),p=Object(ee["a"])(l,a,!0,!0)):(d=Object(ee["a"])(l,i,!1,!0),p=Object(ee["a"])(a,l,!0,!1)),null!=o){const e=Object(W["b"])(u,l);return[d,p,e]}return[d,p]},E={a:O,b:w,bias:C,preluActivationWeights:I},T={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:c};if(null==o){const e=Object(F["a"])((e,t,n)=>{const r=R["a"].runKernel(D["Vc"],E,T);return n([e,t,r]),{value:Object(m["a"])(r,v),gradFunc:j}});return e(O,w)}{const e=Object(F["a"])((e,t,n,r)=>{const a=R["a"].runKernel(D["Vc"],E,T);return r([e,t,a,n]),{value:Object(m["a"])(a,v),gradFunc:j}});return e(O,w,C)}}const ne=Object(u["a"])({fusedMatMul_:te});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function re(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function ae(e,t,n){const r=1-e%2,a=new Float32Array(e);for(let o=0;o<e;++o){const s=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(s)}return Object(C["a"])(a,"float32")}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oe(e){return ae(e,.54,.46)}Object(u["a"])({hammingWindow_:oe});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function se(e){return ae(e,.5,.5)}const ie=Object(u["a"])({hannWindow_:se});var ce=n("46b8");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ue(e,t,n,r=!1,a=0){let o=0;const s=[];while(o+t<=e.size)s.push(Object(y["a"])(e,o,t)),o+=n;if(r)while(o<e.size){const r=o+t-e.size,i=Object(c["a"])([Object(y["a"])(e,o,t-r),Object(ce["a"])([r],a)]);s.push(i),o+=n}return 0===s.length?j([],[0,t]):Object(m["a"])(Object(c["a"])(s),[s.length,t])}const le=Object(u["a"])({frame_:ue});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function de(e,t,n,r,a=ie){null==r&&(r=re(t));const o=le(e,t,n),s=Object(h["a"])(o,a(t)),i=[];for(let c=0;c<o.shape[0];c++)i.push(Object(N["a"])(Object(y["a"])(s,[c,0],[1,t]),r));return Object(c["a"])(i)}Object(u["a"])({stft_:de});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pe(e,t,n,r,a="bilinear",o=0){const s=Object($["a"])(e,"image","cropAndResize"),i=Object($["a"])(t,"boxes","cropAndResize","float32"),c=Object($["a"])(n,"boxInd","cropAndResize","int32"),u=i.shape[0];k["b"](4===s.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),k["b"](2===i.rank&&4===i.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${i.shape}.`),k["b"](1===c.rank&&c.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${i.shape}.`),k["b"](2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),k["b"](r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),k["b"]("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was "+a);const l={image:s,boxes:i,boxInd:c},d={method:a,extrapolationValue:o,cropSize:r},p=R["a"].runKernel(D["J"],l,d);return p}const fe=Object(u["a"])({cropAndResize_:pe});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function he(e){const t=Object($["a"])(e,"image","flipLeftRight","float32");k["b"](4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t},r=R["a"].runKernel(D["bb"],n,{});return r}const me=Object(u["a"])({flipLeftRight_:he});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function be(e,t,n=0,r=.5){const a=Object($["a"])(e,"image","rotateWithOffset","float32");k["b"](4===a.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const o={image:a},s={radians:t,fillValue:n,center:r},i=R["a"].runKernel(D["pc"],o,s);return i}const ge=Object(u["a"])({rotateWithOffset_:be});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ye(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const s=e.shape[0];return n=Math.min(n,s),k["b"](0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),k["b"](2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),k["b"](4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),k["b"](1===t.rank,()=>"scores must be a 1D tensor"),k["b"](t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was `+t.shape[0]),k["b"](0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xe(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const o=Object($["a"])(e,"boxes","nonMaxSuppression"),s=Object($["a"])(t,"scores","nonMaxSuppression"),i=ye(o,s,n,r,a);n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold;const c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return R["a"].runKernel(D["Sb"],{boxes:o,scores:s},c)}const ve=Object(u["a"])({nonMaxSuppression_:xe});var Oe=n("8389");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function we(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const o=Object($["a"])(e,"boxes","nonMaxSuppressionAsync"),s=Object($["a"])(t,"scores","nonMaxSuppressionAsync"),i=ye(o,s,n,r,a);n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold;const c=await Promise.all([o.data(),s.data()]),u=c[0],l=c[1],{selectedIndices:d}=Object(Oe["a"])(u,l,n,r,a);return o!==e&&o.dispose(),s!==t&&s.dispose(),Object(C["a"])(d,"int32")}const Ce=we;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $e(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=0){const s=Object($["a"])(e,"boxes","nonMaxSuppression"),i=Object($["a"])(t,"scores","nonMaxSuppression"),c=ye(s,i,n,r,a,o);n=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,o=c.softNmsSigma;const u={boxes:s,scores:i},l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o},d=R["a"].runKernel(D["Ub"],u,l);return{selectedIndices:d[0],selectedScores:d[1]}}const ke=Object(u["a"])({nonMaxSuppressionWithScore_:$e});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ie(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=0){const s=Object($["a"])(e,"boxes","nonMaxSuppressionAsync"),i=Object($["a"])(t,"scores","nonMaxSuppressionAsync"),c=ye(s,i,n,r,a,o);n=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,o=c.softNmsSigma;const u=await Promise.all([s.data(),i.data()]),l=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=Object(Oe["c"])(l,d,n,r,a,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:Object(C["a"])(p,"int32"),selectedScores:Object(C["a"])(f)}}const je=Ie;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ee(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=!1){const s=Object($["a"])(e,"boxes","nonMaxSuppression"),i=Object($["a"])(t,"scores","nonMaxSuppression"),c=ye(s,i,n,r,a,null),u=c.maxOutputSize,l=c.iouThreshold,d=c.scoreThreshold,p={boxes:s,scores:i},f={maxOutputSize:u,iouThreshold:l,scoreThreshold:d,padToMaxOutputSize:o},h=R["a"].runKernel(D["Tb"],p,f);return{selectedIndices:h[0],validOutputs:h[1]}}const Te=Object(u["a"])({nonMaxSuppressionPadded_:Ee});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ne(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,o=!1){const s=Object($["a"])(e,"boxes","nonMaxSuppressionAsync"),i=Object($["a"])(t,"scores","nonMaxSuppressionAsync"),c=ye(s,i,n,r,a,null),u=c.maxOutputSize,l=c.iouThreshold,d=c.scoreThreshold,[p,f]=await Promise.all([s.data(),i.data()]),{selectedIndices:h,validOutputs:m}=Object(Oe["b"])(p,f,u,l,d,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:Object(C["a"])(h,"int32"),validOutputs:Object(b["a"])(m,"int32")}}const Se=Ne;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(e,t,n=!1,r=!1){const a=Object($["a"])(e,"images","resizeBilinear");k["b"](3===a.rank||4===a.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),k["b"](2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."),k["b"](!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=a,s=!1;3===a.rank&&(s=!0,o=Object(m["a"])(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,i={images:o},c={alignCorners:n,halfPixelCenters:r,size:t},u=R["a"].runKernel(D["kc"],i,c);return s?Object(m["a"])(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const _e=Object(u["a"])({resizeBilinear_:Ae});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Re(e,t,n=!1,r=!1){const a=Object($["a"])(e,"images","resizeNearestNeighbor");k["b"](3===a.rank||4===a.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),k["b"](2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."),k["b"]("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),k["b"](!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=a,s=!1;3===a.rank&&(s=!0,o=Object(m["a"])(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,i={images:o},c={alignCorners:n,halfPixelCenters:r,size:t},u=R["a"].runKernel(D["mc"],i,c);return s?Object(m["a"])(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Fe=Object(u["a"])({resizeNearestNeighbor_:Re});var De=n("bb2d"),Le=n("b21c"),Pe=n("e333"),Me=n("84d6"),Be=n("6791");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ve(e,t,n){Object(k["b"])(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),Object(k["b"])(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=Object($["a"])(e,"a","bandPart");Object(k["b"])(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[o,s]=r.shape.slice(-2);if(!(t<=o))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`);if(!(n<=s))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`);t<0&&(t=o),n<0&&(n=s);const i=Object(m["a"])(Object(Me["a"])(0,o,1,"int32"),[-1,1]),c=Object(Me["a"])(0,s,1,"int32"),u=Object(O["a"])(i,c),l=Object(Pe["a"])(Object(Le["a"])(u,Object(b["a"])(+t,"int32")),Object(De["a"])(u,Object(b["a"])(-n,"int32"))),d=Object(T["a"])([o,s],r.dtype);return Object(m["a"])(Object(v["a"])(Object(E["a"])(Object(m["a"])(r,[-1,o,s])).map(e=>Object(Be["a"])(l,e,d))),a)}Object(u["a"])({bandPart_:Ve});var ze=n("8ae0"),Ue=n("36e5"),We=n("c021"),Ge=n("ae6d"),He=n("c9f1"),Ke=n("163a"),qe=n("93b2"),Xe=n("e053");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ye(e,t="euclidean",n=null,r=!1){e=Object($["a"])(e,"x","norm");const a=Qe(e,t,n);let o=a.shape;if(r){const t=Object(k["I"])(n,e.shape);o=Ue["e"](a.shape,t)}return Object(m["a"])(a,o)}function Qe(e,t,n=null){if(0===e.rank)return Object(ze["a"])(e);if(1!==e.rank&&null===n)return Qe(Object(m["a"])(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Object(Xe["a"])(Object(ze["a"])(e),n);if(t===1/0)return Object(We["a"])(Object(ze["a"])(e),n);if(t===-1/0)return Object(Ge["a"])(Object(ze["a"])(e),n);if("euclidean"===t||2===t)return Object(Ke["a"])(Object(Xe["a"])(Object(He["a"])(Object(ze["a"])(e),Object(b["a"])(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+t)}if(Array.isArray(n)&&2===n.length){if(1===t)return Object(We["a"])(Object(Xe["a"])(Object(ze["a"])(e),n[0]),n[1]-1);if(t===1/0)return Object(We["a"])(Object(Xe["a"])(Object(ze["a"])(e),n[1]),n[0]);if(t===-1/0)return Object(Ge["a"])(Object(Xe["a"])(Object(ze["a"])(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Object(Ke["a"])(Object(Xe["a"])(Object(qe["a"])(e),n));throw new Error("Error in norm: invalid ord value: "+t)}throw new Error("Error in norm: invalid axis: "+n)}const Je=Object(u["a"])({norm_:Ye});var Ze=n("45bb");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function et(e){let t;if(Array.isArray(e)){t=!1,Object(k["b"])(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)Object(k["b"])(e[t].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`)}else t=!0,e=Object(Ze["a"])(e,e.shape[0],0).map(e=>Object(x["a"])(e,[0]));Object(k["b"])(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let a=0;a<e.length;++a)n.push(R["a"].tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){const r=Object(h["a"])(Object(Xe["a"])(Object(h["a"])(n[t],e)),n[t]);e=Object(O["a"])(e,r)}return Object(p["a"])(e,Je(e,"euclidean"))}));return t?Object(v["a"])(n,0):n}Object(u["a"])({gramSchmidt_:et});var tt=n("c04e"),nt=n("8d71");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rt(e,t,n,r="float32"){null==t&&(t=e);const a=Object(o["a"])([e,t],r),s=e<=t?e:t;for(let o=0;o<s;++o)a.set(1,o,o);const i=Object(m["a"])(a.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return Object(nt["a"])(Object(f["a"])(i,0),[n[0],1,1]);if(2===n.length)return Object(nt["a"])(Object(f["a"])(Object(f["a"])(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(nt["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const at=Object(u["a"])({eye_:rt});var ot=n("cef0"),st=n("3bb7"),it=n("c912");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ct(e,t=!1){if(Object(k["b"])(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+e.rank),2===e.rank)return ut(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=Object(E["a"])(Object(m["a"])(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];r.forEach(e=>{const[n,r]=ut(e,t);a.push(n),o.push(r)});const s=Object(m["a"])(Object(v["a"])(a,0),e.shape),i=Object(m["a"])(Object(v["a"])(o,0),e.shape);return[s,i]}}function ut(e,t=!1){return R["a"].tidy(()=>{Object(k["b"])(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let a=at(n),o=Object(i["a"])(e);const s=j([[1]],[1,1]);let u=Object(i["a"])(s);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=o,l=u,d=a;[u,o,a]=R["a"].tidy(()=>{const t=Object(y["a"])(o,[e,e],[n-e,1]),l=Je(t),d=Object(y["a"])(o,[e,e],[1,1]),f=Object(Be["a"])(Object(ot["a"])(d,0),j([[-1]]),j([[1]])),m=Object(O["a"])(d,Object(h["a"])(f,l)),b=Object(p["a"])(t,m);u=1===b.shape[0]?Object(i["a"])(s):Object(c["a"])([s,Object(y["a"])(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const g=Object(st["a"])(Object(p["a"])(Object(ee["a"])(f,m),l)),x=Object(y["a"])(o,[e,0],[n-e,r]),v=Object(h["a"])(g,u),w=Object(it["a"])(u);if(0===e)o=Object(O["a"])(x,Object(ee["a"])(v,Object(ee["a"])(w,x)));else{const t=Object(O["a"])(x,Object(ee["a"])(v,Object(ee["a"])(w,x)));o=Object(c["a"])([Object(y["a"])(o,[0,0],[e,r]),t],0)}const C=Object(it["a"])(v),$=Object(y["a"])(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Object(O["a"])($,Object(ee["a"])(Object(ee["a"])($,u),C));else{const t=Object(O["a"])($,Object(ee["a"])(Object(ee["a"])($,u),C));a=Object(c["a"])([Object(y["a"])(a,[0,0],[n,e]),t],1)}return[u,o,a]}),Object(tt["a"])([t,l,d])}return!t&&n>r&&(a=Object(y["a"])(a,[0,0],[n,r]),o=Object(y["a"])(o,[0,0],[r,r])),[a,o]})}Object(u["a"])({qr_:ct});var lt=n("57e0"),dt=n("122e"),pt=n("d4de"),ft=n("c22a");function ht(e,t,n=lt["a"].SUM_BY_NONZERO_WEIGHTS){const r=Object($["a"])(e,"losses","computeWeightedLoss");let a=null;null!=t&&(a=Object($["a"])(t,"weights","computeWeightedLoss"));const o=null==a?r:Object(h["a"])(r,a);if(n===lt["a"].NONE)return o;if(n===lt["a"].SUM)return Object(Xe["a"])(o);if(n===lt["a"].MEAN){if(null==a)return Object(dt["a"])(o);{const e=r.size/a.size,t=Object(p["a"])(Object(Xe["a"])(o),Object(Xe["a"])(a));return e>1?Object(p["a"])(t,Object(b["a"])(e)):t}}if(n===lt["a"].SUM_BY_NONZERO_WEIGHTS){if(null==a)return Object(p["a"])(Object(Xe["a"])(o),Object(b["a"])(r.size));{const e=Object(h["a"])(a,Object(ft["a"])(r.shape)),t=Object(s["a"])(Object(Xe["a"])(Object(pt["a"])(e,Object(b["a"])(0))),"float32");return Object(p["a"])(Object(Xe["a"])(o),t)}}throw Error("Unknown reduction: "+n)}const mt=Object(u["a"])({computeWeightedLoss_:ht});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bt(e,t,n,r=lt["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object($["a"])(e,"labels","absoluteDifference"),o=Object($["a"])(t,"predictions","absoluteDifference");let s=null;null!=n&&(s=Object($["a"])(n,"weights","absoluteDifference")),Object(k["e"])(a.shape,o.shape,"Error in absoluteDifference: ");const i=Object(ze["a"])(Object(O["a"])(a,o));return mt(i,s,r)}Object(u["a"])({absoluteDifference_:bt});function gt(e,t,n,r,a=lt["a"].SUM_BY_NONZERO_WEIGHTS){const o=Object($["a"])(e,"labels","cosineDistance"),s=Object($["a"])(t,"predictions","cosineDistance");let i=null;null!=r&&(i=Object($["a"])(r,"weights","cosineDistance")),Object(k["e"])(o.shape,s.shape,"Error in cosineDistance: ");const c=Object(b["a"])(1),u=Object(O["a"])(c,Object(Xe["a"])(Object(h["a"])(o,s),n,!0));return mt(u,i,a)}Object(u["a"])({cosineDistance_:gt});var yt=n("917a");function xt(e,t,n,r=lt["a"].SUM_BY_NONZERO_WEIGHTS){let a=Object($["a"])(e,"labels","hingeLoss");const o=Object($["a"])(t,"predictions","hingeLoss");let s=null;null!=n&&(s=Object($["a"])(n,"weights","hingeLoss")),Object(k["e"])(a.shape,o.shape,"Error in hingeLoss: ");const i=Object(b["a"])(1);a=Object(O["a"])(Object(h["a"])(Object(b["a"])(2),a),i);const c=Object(yt["a"])(Object(O["a"])(i,Object(h["a"])(a,o)));return mt(c,s,r)}Object(u["a"])({hingeLoss_:xt});var vt=n("f0e5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ot(e,t,n,r=1,o=lt["a"].SUM_BY_NONZERO_WEIGHTS){const s=Object($["a"])(e,"labels","huberLoss"),i=Object($["a"])(t,"predictions","huberLoss");let c=null;null!=n&&(c=Object($["a"])(n,"weights","huberLoss")),Object(k["e"])(s.shape,i.shape,"Error in huberLoss: ");const u=Object(b["a"])(r),l=Object(ze["a"])(Object(O["a"])(i,s)),d=Object(vt["a"])(l,u),p=Object(O["a"])(l,d),f=Object(a["a"])(Object(h["a"])(Object(b["a"])(.5),Object(qe["a"])(d)),Object(h["a"])(u,p));return mt(f,c,o)}Object(u["a"])({huberLoss_:Ot});var wt=n("1359");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(e,t,n,r=1e-7,o=lt["a"].SUM_BY_NONZERO_WEIGHTS){const s=Object($["a"])(e,"labels","logLoss"),i=Object($["a"])(t,"predictions","logLoss");let c=null;null!=n&&(c=Object($["a"])(n,"weights","logLoss")),Object(k["e"])(s.shape,i.shape,"Error in logLoss: ");const u=Object(b["a"])(1),l=Object(b["a"])(r),d=Object(st["a"])(Object(h["a"])(s,Object(wt["a"])(Object(a["a"])(i,l)))),p=Object(h["a"])(Object(O["a"])(u,s),Object(wt["a"])(Object(a["a"])(Object(O["a"])(u,i),l))),f=Object(O["a"])(d,p);return mt(f,c,o)}Object(u["a"])({logLoss_:Ct});var $t=n("4184");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(e,t,n,r=lt["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object($["a"])(e,"labels","meanSquaredError"),o=Object($["a"])(t,"predictions","meanSquaredError");let s=null;null!=n&&(s=Object($["a"])(n,"weights","meanSquaredError")),Object(k["e"])(a.shape,o.shape,"Error in meanSquaredError: ");const i=Object($t["a"])(a,o);return mt(i,s,r)}Object(u["a"])({meanSquaredError_:kt});var It=n("4f20"),jt=n("46b1");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Et(e,t){const n=Object($["a"])(e,"labels","sigmoidCrossEntropyWithLogits"),r=Object($["a"])(t,"logits","sigmoidCrossEntropyWithLogits");Object(k["e"])(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=Object(yt["a"])(r),s=Object(h["a"])(r,n),i=Object(jt["a"])(Object(It["a"])(Object(st["a"])(Object(ze["a"])(r))));return Object(a["a"])(Object(O["a"])(o,s),i)}function Tt(e,t,n,r=0,o=lt["a"].SUM_BY_NONZERO_WEIGHTS){let s=Object($["a"])(e,"multiClassLabels","sigmoidCrossEntropy");const i=Object($["a"])(t,"logits","sigmoidCrossEntropy");let c=null;if(null!=n&&(c=Object($["a"])(n,"weights","sigmoidCrossEntropy")),Object(k["e"])(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=Object(b["a"])(r),t=Object(b["a"])(1),n=Object(b["a"])(.5);s=Object(a["a"])(Object(h["a"])(s,Object(O["a"])(t,e)),Object(h["a"])(n,e))}const u=Et(s,i);return mt(u,c,o)}Object(u["a"])({sigmoidCrossEntropy_:Tt});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nt(e,t=null,n=!1){const r=Object($["a"])(e,"x","logSumExp"),o=Object(k["I"])(t,r.shape),s=Object(We["a"])(r,o,!0),i=Object(O["a"])(r,s),c=Object(It["a"])(i),u=Object(Xe["a"])(c,o),l=Object(wt["a"])(u),d=Object(a["a"])(Object(m["a"])(s,l.shape),l);if(n){const e=Object(Ue["e"])(d.shape,o);return Object(m["a"])(d,e)}return d}const St=Object(u["a"])({logSumExp_:Nt});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function At(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was `+n);const r=Object(F["a"])((e,t,r)=>{const a=!0,o=St(t,[n],a),i=Object(O["a"])(Object(s["a"])(t,"float32"),o);r([e,i]);const c=Object(st["a"])(Object(h["a"])(i,e)),u=Object(Xe["a"])(c,[n]),l=(e,t)=>{const[r,a]=t,o=Object(Ue["e"])(e.shape,[n]);return[Object(h["a"])(Object(m["a"])(e,o),Object(O["a"])(Object(s["a"])(r,"float32"),Object(It["a"])(a))),Object(h["a"])(Object(m["a"])(e,o),Object(O["a"])(Object(It["a"])(a),Object(s["a"])(r,"float32")))]};return{value:u,gradFunc:l}});return r(e,t)}function _t(e,t,n,r=0,o=lt["a"].SUM_BY_NONZERO_WEIGHTS){let s=Object($["a"])(e,"onehotLabels","softmaxCrossEntropy");const i=Object($["a"])(t,"logits","softmaxCrossEntropy");let c=null;if(null!=n&&(c=Object($["a"])(n,"weights","softmaxCrossEntropy")),Object(k["e"])(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=Object(b["a"])(r),t=Object(b["a"])(1),n=Object(b["a"])(s.shape[1]);s=Object(a["a"])(Object(h["a"])(s,Object(O["a"])(t,e)),Object(p["a"])(e,n))}const u=At(s,i);return mt(u,c,o)}Object(u["a"])({softmaxCrossEntropy_:_t}),S["a"],A["a"],N["a"],_["a"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rt={flipLeftRight:me,resizeNearestNeighbor:Fe,resizeBilinear:_e,rotateWithOffset:ge,cropAndResize:fe,nonMaxSuppression:ve,nonMaxSuppressionAsync:Ce,nonMaxSuppressionWithScore:ke,nonMaxSuppressionWithScoreAsync:je,nonMaxSuppressionPadded:Te,nonMaxSuppressionPaddedAsync:Se}},1359:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","log"),n={x:t};return r["a"].runKernel(a["yb"],n)}const c=Object(s["a"])({log_:i})},1590:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("b818"),c=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t,n,c,l="NDHWC",d=[1,1,1]){const p=Object(o["a"])(e,"x","conv3d"),f=Object(o["a"])(t,"filter","conv3d");let h=p,m=!1;4===p.rank&&(m=!0,h=Object(u["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),s["b"](5===h.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${h.rank}.`),s["b"](5===f.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+f.rank+"."),s["b"](h.shape[4]===f.shape[3],()=>`Error in conv3d: depth of input (${h.shape[4]}) must match input depth for filter ${f.shape[3]}.`),s["b"](Object(i["h"])(n,d),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`),s["b"]("NDHWC"===l,()=>`Error in conv3d: got dataFormat of ${l} but only NDHWC is currently supported.`);const b={x:h,filter:f},g={strides:n,pad:c,dataFormat:l,dilations:d},y=r["a"].runKernel(a["E"],b,g);return m?Object(u["a"])(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const d=Object(c["a"])({conv3d_:l})},"163a":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","sqrt"),n={x:t};return r["a"].runKernel(a["Fc"],n)}const c=Object(s["a"])({sqrt_:i})},"19aa":function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"1ab7":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("6ad5"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){Object(o["b"])("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return r["a"].runKernel(a["Z"],t)}const c=Object(s["a"])({fft_:i})},"1ba2":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","expm1"),n={x:t};return r["a"].runKernel(a["Y"],n)}const c=Object(s["a"])({expm1_:i})},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var r=n("b622"),a=r("iterator"),o=!1;try{var s=0,i={next:function(){return{done:!!s++}},return:function(){o=!0}};i[a]=function(){return this},Array.from(i,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[a]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1df6":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","sign"),n={x:t};return r["a"].runKernel(a["wc"],n)}const c=Object(s["a"])({sign_:i})},"1e68":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=0,n=!1,s=!1){const i=Object(o["a"])(e,"x","cumsum"),c={x:i},u={axis:t,exclusive:n,reverse:s};return r["a"].runKernel(a["K"],c,u)}const c=Object(s["a"])({cumsum_:i})},"1fb5":function(e,t,n){"use strict";t.byteLength=l,t.toByteArray=p,t.fromByteArray=m;for(var r=[],a=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,c=s.length;i<c;++i)r[i]=s[i],a[s.charCodeAt(i)]=i;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function l(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function d(e,t,n){return 3*(t+n)/4-n}function p(e){var t,n,r=u(e),s=r[0],i=r[1],c=new o(d(e,s,i)),l=0,p=i>0?s-4:s;for(n=0;n<p;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===i&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===i&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c}function f(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function h(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(f(r));return a.join("")}function m(e){for(var t,n=e.length,a=n%3,o=[],s=16383,i=0,c=n-a;i<c;i+=s)o.push(h(e,i,i+s>c?c:i+s));return 1===a?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},"220f":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","asin"),n={x:t};return r["a"].runKernel(a["j"],n)}const c=Object(s["a"])({asin_:i})},2266:function(e,t,n){var r=n("825a"),a=n("e95a"),o=n("50c4"),s=n("0366"),i=n("35a1"),c=n("2a62"),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,d,p,f,h,m,b,g=n&&n.that,y=!(!n||!n.AS_ENTRIES),x=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),O=s(t,g,1+y+v),w=function(e){return l&&c(l),new u(!0,e)},C=function(e){return y?(r(e),v?O(e[0],e[1],w):O(e[0],e[1])):v?O(e,w):O(e)};if(x)l=e;else{if(d=i(e),"function"!=typeof d)throw TypeError("Target is not iterable");if(a(d)){for(p=0,f=o(e.length);f>p;p++)if(h=C(e[p]),h&&h instanceof u)return h;return new u(!1)}l=d.call(e)}m=l.next;while(!(b=m.call(l)).done){try{h=C(b.value)}catch($){throw c(l),$}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},"23bf":function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r,a,o,s,i;n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),function(e){e["R0"]="R0",e["R1"]="R1",e["R2"]="R2",e["R3"]="R3",e["R4"]="R4",e["R5"]="R5",e["R6"]="R6"}(r||(r={})),function(e){e["float32"]="float32",e["int32"]="int32",e["bool"]="int32",e["complex64"]="complex64"}(a||(a={})),function(e){e["float32"]="float32",e["int32"]="int32",e["bool"]="bool",e["complex64"]="complex64"}(o||(o={})),function(e){e["float32"]="float32",e["int32"]="float32",e["bool"]="float32",e["complex64"]="complex64"}(s||(s={})),function(e){e["float32"]="complex64",e["int32"]="complex64",e["bool"]="complex64",e["complex64"]="complex64"}(i||(i={}));const c={float32:s,int32:a,bool:o,complex64:i};function u(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return c[e][t]}function l(e){return u(e,"int32")}},"23cb":function(e,t,n){var r=n("a691"),a=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):o(n,t)}},"23e7":function(e,t,n){var r=n("da84"),a=n("06cf").f,o=n("9112"),s=n("6eeb"),i=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,d,p,f,h,m=e.target,b=e.global,g=e.stat;if(l=b?r:g?r[m]||i(m,{}):(r[m]||{}).prototype,l)for(d in t){if(f=t[d],e.noTargetGet?(h=a(l,d),p=h&&h.value):p=l[d],n=u(b?d:m+(g?".":"#")+d,e.forced),!n&&void 0!==p){if(typeof f===typeof p)continue;c(f,p)}(e.sham||p&&p.sham)&&o(f,"sham",!0),s(l,d,f,e)}}},"241c":function(e,t,n){var r=n("ca84"),a=n("7839"),o=a.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},"24b0":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"input","imag"),n={input:t};return r["a"].runKernel(a["ob"],n)}const c=Object(s["a"])({imag_:i})},2626:function(e,t,n){"use strict";var r=n("d066"),a=n("9bf2"),o=n("b622"),s=n("83ab"),i=o("species");e.exports=function(e){var t=r(e),n=a.f;s&&t&&!t[i]&&n(t,i,{configurable:!0,get:function(){return this}})}},2877:function(e,t,n){"use strict";function r(e,t,n,r,a,o,s,i){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=c):a&&(c=i?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},"29a8":function(e,t,n){"use strict";(function(e){n("6ae2");var t=n("7ed6"),r=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const a=Object(r["b"])();a.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),a.registerFlag("IS_BROWSER",()=>t["isBrowser"]()),a.registerFlag("IS_NODE",()=>"undefined"!==typeof e&&"undefined"!==typeof e.versions&&"undefined"!==typeof e.versions.node),a.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),a.registerFlag("PROD",()=>!1),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>a.getBool("DEBUG")),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),a.registerFlag("IS_TEST",()=>!1),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0)}).call(this,n("4362"))},"29d8":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},"2a62":function(e,t,n){var r=n("825a");e.exports=function(e){var t=e["return"];if(void 0!==t)return r(t.call(e)).value}},"2b0e":function(e,t,n){"use strict";(function(e){
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function a(e){return void 0!==e&&null!==e}function o(e){return!0===e}function s(e){return!1===e}function i(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var u=Object.prototype.toString;function l(e){return"[object Object]"===u.call(e)}function d(e){return"[object RegExp]"===u.call(e)}function p(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function f(e){return a(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function h(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===u?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function b(e,t){for(var n=Object.create(null),r=e.split(","),a=0;a<r.length;a++)n[r[a]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}b("slot,component",!0);var g=b("key,ref,slot,slot-scope,is");function y(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var x=Object.prototype.hasOwnProperty;function v(e,t){return x.call(e,t)}function O(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var w=/-(\w)/g,C=O((function(e){return e.replace(w,(function(e,t){return t?t.toUpperCase():""}))})),$=O((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),k=/\B([A-Z])/g,I=O((function(e){return e.replace(k,"-$1").toLowerCase()}));function j(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function E(e,t){return e.bind(t)}var T=Function.prototype.bind?E:j;function N(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function S(e,t){for(var n in t)e[n]=t[n];return e}function A(e){for(var t={},n=0;n<e.length;n++)e[n]&&S(t,e[n]);return t}function _(e,t,n){}var R=function(e,t,n){return!1},F=function(e){return e};function D(e,t){if(e===t)return!0;var n=c(e),r=c(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var a=Array.isArray(e),o=Array.isArray(t);if(a&&o)return e.length===t.length&&e.every((function(e,n){return D(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(a||o)return!1;var s=Object.keys(e),i=Object.keys(t);return s.length===i.length&&s.every((function(n){return D(e[n],t[n])}))}catch(u){return!1}}function L(e,t){for(var n=0;n<e.length;n++)if(D(e[n],t))return n;return-1}function P(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var M="data-server-rendered",B=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],z={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:_,parsePlatformTagName:F,mustUseProp:R,async:!0,_lifecycleHooks:V},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function W(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function G(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var H=new RegExp("[^"+U.source+".$_\\d]");function K(e){if(!H.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var q,X="__proto__"in{},Y="undefined"!==typeof window,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Q&&WXEnvironment.platform.toLowerCase(),Z=Y&&window.navigator.userAgent.toLowerCase(),ee=Z&&/msie|trident/.test(Z),te=Z&&Z.indexOf("msie 9.0")>0,ne=Z&&Z.indexOf("edge/")>0,re=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===J),ae=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),oe={}.watch,se=!1;if(Y)try{var ie={};Object.defineProperty(ie,"passive",{get:function(){se=!0}}),window.addEventListener("test-passive",null,ie)}catch(Cs){}var ce=function(){return void 0===q&&(q=!Y&&!Q&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),q},ue=Y&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function le(e){return"function"===typeof e&&/native code/.test(e.toString())}var de,pe="undefined"!==typeof Symbol&&le(Symbol)&&"undefined"!==typeof Reflect&&le(Reflect.ownKeys);de="undefined"!==typeof Set&&le(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var fe=_,he=0,me=function(){this.id=he++,this.subs=[]};me.prototype.addSub=function(e){this.subs.push(e)},me.prototype.removeSub=function(e){y(this.subs,e)},me.prototype.depend=function(){me.target&&me.target.addDep(this)},me.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},me.target=null;var be=[];function ge(e){be.push(e),me.target=e}function ye(){be.pop(),me.target=be[be.length-1]}var xe=function(e,t,n,r,a,o,s,i){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=a,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=i,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ve={child:{configurable:!0}};ve.child.get=function(){return this.componentInstance},Object.defineProperties(xe.prototype,ve);var Oe=function(e){void 0===e&&(e="");var t=new xe;return t.text=e,t.isComment=!0,t};function we(e){return new xe(void 0,void 0,void 0,String(e))}function Ce(e){var t=new xe(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var $e=Array.prototype,ke=Object.create($e),Ie=["push","pop","shift","unshift","splice","sort","reverse"];Ie.forEach((function(e){var t=$e[e];G(ke,e,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var a,o=t.apply(this,n),s=this.__ob__;switch(e){case"push":case"unshift":a=n;break;case"splice":a=n.slice(2);break}return a&&s.observeArray(a),s.dep.notify(),o}))}));var je=Object.getOwnPropertyNames(ke),Ee=!0;function Te(e){Ee=e}var Ne=function(e){this.value=e,this.dep=new me,this.vmCount=0,G(e,"__ob__",this),Array.isArray(e)?(X?Se(e,ke):Ae(e,ke,je),this.observeArray(e)):this.walk(e)};function Se(e,t){e.__proto__=t}function Ae(e,t,n){for(var r=0,a=n.length;r<a;r++){var o=n[r];G(e,o,t[o])}}function _e(e,t){var n;if(c(e)&&!(e instanceof xe))return v(e,"__ob__")&&e.__ob__ instanceof Ne?n=e.__ob__:Ee&&!ce()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Ne(e)),t&&n&&n.vmCount++,n}function Re(e,t,n,r,a){var o=new me,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var i=s&&s.get,c=s&&s.set;i&&!c||2!==arguments.length||(n=e[t]);var u=!a&&_e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=i?i.call(e):n;return me.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(t)&&Le(t))),t},set:function(t){var r=i?i.call(e):n;t===r||t!==t&&r!==r||i&&!c||(c?c.call(e,t):n=t,u=!a&&_e(t),o.notify())}})}}function Fe(e,t,n){if(Array.isArray(e)&&p(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Re(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function De(e,t){if(Array.isArray(e)&&p(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||v(e,t)&&(delete e[t],n&&n.dep.notify())}}function Le(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Le(t)}Ne.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Re(e,t[n])},Ne.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)_e(e[t])};var Pe=z.optionMergeStrategies;function Me(e,t){if(!t)return e;for(var n,r,a,o=pe?Reflect.ownKeys(t):Object.keys(t),s=0;s<o.length;s++)n=o[s],"__ob__"!==n&&(r=e[n],a=t[n],v(e,n)?r!==a&&l(r)&&l(a)&&Me(r,a):Fe(e,n,a));return e}function Be(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,a="function"===typeof e?e.call(n,n):e;return r?Me(r,a):a}:t?e?function(){return Me("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function Ve(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?ze(n):n}function ze(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Ue(e,t,n,r){var a=Object.create(e||null);return t?S(a,t):a}Pe.data=function(e,t,n){return n?Be(e,t,n):t&&"function"!==typeof t?e:Be(e,t)},V.forEach((function(e){Pe[e]=Ve})),B.forEach((function(e){Pe[e+"s"]=Ue})),Pe.watch=function(e,t,n,r){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var a={};for(var o in S(a,e),t){var s=a[o],i=t[o];s&&!Array.isArray(s)&&(s=[s]),a[o]=s?s.concat(i):Array.isArray(i)?i:[i]}return a},Pe.props=Pe.methods=Pe.inject=Pe.computed=function(e,t,n,r){if(!e)return t;var a=Object.create(null);return S(a,e),t&&S(a,t),a},Pe.provide=Be;var We=function(e,t){return void 0===t?e:t};function Ge(e,t){var n=e.props;if(n){var r,a,o,s={};if(Array.isArray(n)){r=n.length;while(r--)a=n[r],"string"===typeof a&&(o=C(a),s[o]={type:null})}else if(l(n))for(var i in n)a=n[i],o=C(i),s[o]=l(a)?a:{type:a};else 0;e.props=s}}function He(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var a=0;a<n.length;a++)r[n[a]]={from:n[a]};else if(l(n))for(var o in n){var s=n[o];r[o]=l(s)?S({from:o},s):{from:s}}else 0}}function Ke(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function qe(e,t,n){if("function"===typeof t&&(t=t.options),Ge(t,n),He(t,n),Ke(t),!t._base&&(t.extends&&(e=qe(e,t.extends,n)),t.mixins))for(var r=0,a=t.mixins.length;r<a;r++)e=qe(e,t.mixins[r],n);var o,s={};for(o in e)i(o);for(o in t)v(e,o)||i(o);function i(r){var a=Pe[r]||We;s[r]=a(e[r],t[r],n,r)}return s}function Xe(e,t,n,r){if("string"===typeof n){var a=e[t];if(v(a,n))return a[n];var o=C(n);if(v(a,o))return a[o];var s=$(o);if(v(a,s))return a[s];var i=a[n]||a[o]||a[s];return i}}function Ye(e,t,n,r){var a=t[e],o=!v(n,e),s=n[e],i=et(Boolean,a.type);if(i>-1)if(o&&!v(a,"default"))s=!1;else if(""===s||s===I(e)){var c=et(String,a.type);(c<0||i<c)&&(s=!0)}if(void 0===s){s=Qe(r,a,e);var u=Ee;Te(!0),_e(s),Te(u)}return s}function Qe(e,t,n){if(v(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Je(t.type)?r.call(e):r}}function Je(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ze(e,t){return Je(e)===Je(t)}function et(e,t){if(!Array.isArray(t))return Ze(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ze(t[n],e))return n;return-1}function tt(e,t,n){ge();try{if(t){var r=t;while(r=r.$parent){var a=r.$options.errorCaptured;if(a)for(var o=0;o<a.length;o++)try{var s=!1===a[o].call(r,e,t,n);if(s)return}catch(Cs){rt(Cs,r,"errorCaptured hook")}}}rt(e,t,n)}finally{ye()}}function nt(e,t,n,r,a){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&f(o)&&!o._handled&&(o.catch((function(e){return tt(e,r,a+" (Promise/async)")})),o._handled=!0)}catch(Cs){tt(Cs,r,a)}return o}function rt(e,t,n){if(z.errorHandler)try{return z.errorHandler.call(null,e,t,n)}catch(Cs){Cs!==e&&at(Cs,null,"config.errorHandler")}at(e,t,n)}function at(e,t,n){if(!Y&&!Q||"undefined"===typeof console)throw e;console.error(e)}var ot,st=!1,it=[],ct=!1;function ut(){ct=!1;var e=it.slice(0);it.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&le(Promise)){var lt=Promise.resolve();ot=function(){lt.then(ut),re&&setTimeout(_)},st=!0}else if(ee||"undefined"===typeof MutationObserver||!le(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ot="undefined"!==typeof setImmediate&&le(setImmediate)?function(){setImmediate(ut)}:function(){setTimeout(ut,0)};else{var dt=1,pt=new MutationObserver(ut),ft=document.createTextNode(String(dt));pt.observe(ft,{characterData:!0}),ot=function(){dt=(dt+1)%2,ft.data=String(dt)},st=!0}function ht(e,t){var n;if(it.push((function(){if(e)try{e.call(t)}catch(Cs){tt(Cs,t,"nextTick")}else n&&n(t)})),ct||(ct=!0,ot()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var mt=new de;function bt(e){gt(e,mt),mt.clear()}function gt(e,t){var n,r,a=Array.isArray(e);if(!(!a&&!c(e)||Object.isFrozen(e)||e instanceof xe)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(a){n=e.length;while(n--)gt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)gt(e[r[n]],t)}}}var yt=O((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function xt(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return nt(r,null,arguments,t,"v-on handler");for(var a=r.slice(),o=0;o<a.length;o++)nt(a[o],null,e,t,"v-on handler")}return n.fns=e,n}function vt(e,t,n,a,s,i){var c,u,l,d;for(c in e)u=e[c],l=t[c],d=yt(c),r(u)||(r(l)?(r(u.fns)&&(u=e[c]=xt(u,i)),o(d.once)&&(u=e[c]=s(d.name,u,d.capture)),n(d.name,u,d.capture,d.passive,d.params)):u!==l&&(l.fns=u,e[c]=l));for(c in t)r(e[c])&&(d=yt(c),a(d.name,t[c],d.capture))}function Ot(e,t,n){var s;e instanceof xe&&(e=e.data.hook||(e.data.hook={}));var i=e[t];function c(){n.apply(this,arguments),y(s.fns,c)}r(i)?s=xt([c]):a(i.fns)&&o(i.merged)?(s=i,s.fns.push(c)):s=xt([i,c]),s.merged=!0,e[t]=s}function wt(e,t,n){var o=t.options.props;if(!r(o)){var s={},i=e.attrs,c=e.props;if(a(i)||a(c))for(var u in o){var l=I(u);Ct(s,c,u,l,!0)||Ct(s,i,u,l,!1)}return s}}function Ct(e,t,n,r,o){if(a(t)){if(v(t,n))return e[n]=t[n],o||delete t[n],!0;if(v(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function $t(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function kt(e){return i(e)?[we(e)]:Array.isArray(e)?jt(e):void 0}function It(e){return a(e)&&a(e.text)&&s(e.isComment)}function jt(e,t){var n,s,c,u,l=[];for(n=0;n<e.length;n++)s=e[n],r(s)||"boolean"===typeof s||(c=l.length-1,u=l[c],Array.isArray(s)?s.length>0&&(s=jt(s,(t||"")+"_"+n),It(s[0])&&It(u)&&(l[c]=we(u.text+s[0].text),s.shift()),l.push.apply(l,s)):i(s)?It(u)?l[c]=we(u.text+s):""!==s&&l.push(we(s)):It(s)&&It(u)?l[c]=we(u.text+s.text):(o(e._isVList)&&a(s.tag)&&r(s.key)&&a(t)&&(s.key="__vlist"+t+"_"+n+"__"),l.push(s)));return l}function Et(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Tt(e){var t=Nt(e.$options.inject,e);t&&(Te(!1),Object.keys(t).forEach((function(n){Re(e,n,t[n])})),Te(!0))}function Nt(e,t){if(e){for(var n=Object.create(null),r=pe?Reflect.ownKeys(e):Object.keys(e),a=0;a<r.length;a++){var o=r[a];if("__ob__"!==o){var s=e[o].from,i=t;while(i){if(i._provided&&v(i._provided,s)){n[o]=i._provided[s];break}i=i.$parent}if(!i)if("default"in e[o]){var c=e[o].default;n[o]="function"===typeof c?c.call(t):c}else 0}}return n}}function St(e,t){if(!e||!e.length)return{};for(var n={},r=0,a=e.length;r<a;r++){var o=e[r],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==t&&o.fnContext!==t||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var i=s.slot,c=n[i]||(n[i]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(At)&&delete n[u];return n}function At(e){return e.isComment&&!e.asyncFactory||" "===e.text}function _t(e,t,r){var a,o=Object.keys(t).length>0,s=e?!!e.$stable:!o,i=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&r&&r!==n&&i===r.$key&&!o&&!r.$hasNormal)return r;for(var c in a={},e)e[c]&&"$"!==c[0]&&(a[c]=Rt(t,c,e[c]))}else a={};for(var u in t)u in a||(a[u]=Ft(t,u));return e&&Object.isExtensible(e)&&(e._normalized=a),G(a,"$stable",s),G(a,"$key",i),G(a,"$hasNormal",o),a}function Rt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:kt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Ft(e,t){return function(){return e[t]}}function Dt(e,t){var n,r,o,s,i;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(c(e))if(pe&&e[Symbol.iterator]){n=[];var u=e[Symbol.iterator](),l=u.next();while(!l.done)n.push(t(l.value,n.length)),l=u.next()}else for(s=Object.keys(e),n=new Array(s.length),r=0,o=s.length;r<o;r++)i=s[r],n[r]=t(e[i],i,r);return a(n)||(n=[]),n._isVList=!0,n}function Lt(e,t,n,r){var a,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=S(S({},r),n)),a=o(n)||t):a=this.$slots[e]||t;var s=n&&n.slot;return s?this.$createElement("template",{slot:s},a):a}function Pt(e){return Xe(this.$options,"filters",e,!0)||F}function Mt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Bt(e,t,n,r,a){var o=z.keyCodes[t]||n;return a&&r&&!z.keyCodes[t]?Mt(a,r):o?Mt(o,e):r?I(r)!==t:void 0}function Vt(e,t,n,r,a){if(n)if(c(n)){var o;Array.isArray(n)&&(n=A(n));var s=function(s){if("class"===s||"style"===s||g(s))o=e;else{var i=e.attrs&&e.attrs.type;o=r||z.mustUseProp(t,i,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=C(s),u=I(s);if(!(c in o)&&!(u in o)&&(o[s]=n[s],a)){var l=e.on||(e.on={});l["update:"+s]=function(e){n[s]=e}}};for(var i in n)s(i)}else;return e}function zt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Wt(r,"__static__"+e,!1)),r}function Ut(e,t,n){return Wt(e,"__once__"+t+(n?"_"+n:""),!0),e}function Wt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Gt(e[r],t+"_"+r,n);else Gt(e,t,n)}function Gt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Ht(e,t){if(t)if(l(t)){var n=e.on=e.on?S({},e.on):{};for(var r in t){var a=n[r],o=t[r];n[r]=a?[].concat(a,o):o}}else;return e}function Kt(e,t,n,r){t=t||{$stable:!n};for(var a=0;a<e.length;a++){var o=e[a];Array.isArray(o)?Kt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function qt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Xt(e,t){return"string"===typeof e?t+e:e}function Yt(e){e._o=Ut,e._n=m,e._s=h,e._l=Dt,e._t=Lt,e._q=D,e._i=L,e._m=zt,e._f=Pt,e._k=Bt,e._b=Vt,e._v=we,e._e=Oe,e._u=Kt,e._g=Ht,e._d=qt,e._p=Xt}function Qt(e,t,r,a,s){var i,c=this,u=s.options;v(a,"_uid")?(i=Object.create(a),i._original=a):(i=a,a=a._original);var l=o(u._compiled),d=!l;this.data=e,this.props=t,this.children=r,this.parent=a,this.listeners=e.on||n,this.injections=Nt(u.inject,a),this.slots=function(){return c.$slots||_t(e.scopedSlots,c.$slots=St(r,a)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return _t(e.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=_t(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,r){var o=dn(i,e,t,n,r,d);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=a),o}:this._c=function(e,t,n,r){return dn(i,e,t,n,r,d)}}function Jt(e,t,r,o,s){var i=e.options,c={},u=i.props;if(a(u))for(var l in u)c[l]=Ye(l,u,t||n);else a(r.attrs)&&en(c,r.attrs),a(r.props)&&en(c,r.props);var d=new Qt(r,c,s,o,e),p=i.render.call(null,d._c,d);if(p instanceof xe)return Zt(p,r,d.parent,i,d);if(Array.isArray(p)){for(var f=kt(p)||[],h=new Array(f.length),m=0;m<f.length;m++)h[m]=Zt(f[m],r,d.parent,i,d);return h}}function Zt(e,t,n,r,a){var o=Ce(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function en(e,t){for(var n in t)e[C(n)]=t[n]}Yt(Qt.prototype);var tn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;tn.prepatch(n,n)}else{var r=e.componentInstance=an(e,Nn);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;Fn(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Mn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Jn(n):Ln(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Pn(t,!0):t.$destroy())}},nn=Object.keys(tn);function rn(e,t,n,s,i){if(!r(e)){var u=n.$options._base;if(c(e)&&(e=u.extend(e)),"function"===typeof e){var l;if(r(e.cid)&&(l=e,e=On(l,u),void 0===e))return vn(l,t,n,s,i);t=t||{},Or(e),a(t.model)&&cn(e.options,t);var d=wt(t,e,i);if(o(e.options.functional))return Jt(e,d,t,n,s);var p=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var f=t.slot;t={},f&&(t.slot=f)}on(t);var h=e.options.name||i,m=new xe("vue-component-"+e.cid+(h?"-"+h:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:p,tag:i,children:s},l);return m}}}function an(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return a(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function on(e){for(var t=e.hook||(e.hook={}),n=0;n<nn.length;n++){var r=nn[n],a=t[r],o=tn[r];a===o||a&&a._merged||(t[r]=a?sn(o,a):o)}}function sn(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function cn(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),s=o[r],i=t.model.callback;a(s)?(Array.isArray(s)?-1===s.indexOf(i):s!==i)&&(o[r]=[i].concat(s)):o[r]=i}var un=1,ln=2;function dn(e,t,n,r,a,s){return(Array.isArray(n)||i(n))&&(a=r,r=n,n=void 0),o(s)&&(a=ln),pn(e,t,n,r,a)}function pn(e,t,n,r,o){if(a(n)&&a(n.__ob__))return Oe();if(a(n)&&a(n.is)&&(t=n.is),!t)return Oe();var s,i,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===ln?r=kt(r):o===un&&(r=$t(r)),"string"===typeof t)?(i=e.$vnode&&e.$vnode.ns||z.getTagNamespace(t),s=z.isReservedTag(t)?new xe(z.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!a(c=Xe(e.$options,"components",t))?new xe(t,n,r,void 0,void 0,e):rn(c,n,e,r,t)):s=rn(t,n,e,r);return Array.isArray(s)?s:a(s)?(a(i)&&fn(s,i),a(n)&&hn(n),s):Oe()}function fn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),a(e.children))for(var s=0,i=e.children.length;s<i;s++){var c=e.children[s];a(c.tag)&&(r(c.ns)||o(n)&&"svg"!==c.tag)&&fn(c,t,n)}}function hn(e){c(e.style)&&bt(e.style),c(e.class)&&bt(e.class)}function mn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,a=r&&r.context;e.$slots=St(t._renderChildren,a),e.$scopedSlots=n,e._c=function(t,n,r,a){return dn(e,t,n,r,a,!1)},e.$createElement=function(t,n,r,a){return dn(e,t,n,r,a,!0)};var o=r&&r.data;Re(e,"$attrs",o&&o.attrs||n,null,!0),Re(e,"$listeners",t._parentListeners||n,null,!0)}var bn,gn=null;function yn(e){Yt(e.prototype),e.prototype.$nextTick=function(e){return ht(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,a=n._parentVnode;a&&(t.$scopedSlots=_t(a.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=a;try{gn=t,e=r.call(t._renderProxy,t.$createElement)}catch(Cs){tt(Cs,t,"render"),e=t._vnode}finally{gn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof xe||(e=Oe()),e.parent=a,e}}function xn(e,t){return(e.__esModule||pe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function vn(e,t,n,r,a){var o=Oe();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:a},o}function On(e,t){if(o(e.error)&&a(e.errorComp))return e.errorComp;if(a(e.resolved))return e.resolved;var n=gn;if(n&&a(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&a(e.loadingComp))return e.loadingComp;if(n&&!a(e.owners)){var s=e.owners=[n],i=!0,u=null,l=null;n.$on("hook:destroyed",(function(){return y(s,n)}));var d=function(e){for(var t=0,n=s.length;t<n;t++)s[t].$forceUpdate();e&&(s.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},p=P((function(n){e.resolved=xn(n,t),i?s.length=0:d(!0)})),h=P((function(t){a(e.errorComp)&&(e.error=!0,d(!0))})),m=e(p,h);return c(m)&&(f(m)?r(e.resolved)&&m.then(p,h):f(m.component)&&(m.component.then(p,h),a(m.error)&&(e.errorComp=xn(m.error,t)),a(m.loading)&&(e.loadingComp=xn(m.loading,t),0===m.delay?e.loading=!0:u=setTimeout((function(){u=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,d(!1))}),m.delay||200)),a(m.timeout)&&(l=setTimeout((function(){l=null,r(e.resolved)&&h(null)}),m.timeout)))),i=!1,e.loading?e.loadingComp:e.resolved}}function wn(e){return e.isComment&&e.asyncFactory}function Cn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(a(n)&&(a(n.componentOptions)||wn(n)))return n}}function $n(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&En(e,t)}function kn(e,t){bn.$on(e,t)}function In(e,t){bn.$off(e,t)}function jn(e,t){var n=bn;return function r(){var a=t.apply(null,arguments);null!==a&&n.$off(e,r)}}function En(e,t,n){bn=e,vt(t,n||{},kn,In,jn,e),bn=void 0}function Tn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var a=0,o=e.length;a<o;a++)r.$on(e[a],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,a=e.length;r<a;r++)n.$off(e[r],t);return n}var o,s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;var i=s.length;while(i--)if(o=s[i],o===t||o.fn===t){s.splice(i,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?N(n):n;for(var r=N(arguments,1),a='event handler for "'+e+'"',o=0,s=n.length;o<s;o++)nt(n[o],t,r,t,a)}return t}}var Nn=null;function Sn(e){var t=Nn;return Nn=e,function(){Nn=t}}function An(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function _n(e){e.prototype._update=function(e,t){var n=this,r=n.$el,a=n._vnode,o=Sn(n);n._vnode=e,n.$el=a?n.__patch__(a,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Mn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Mn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Rn(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=Oe),Mn(e,"beforeMount"),r=function(){e._update(e._render(),n)},new nr(e,r,_,{before:function(){e._isMounted&&!e._isDestroyed&&Mn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Mn(e,"mounted")),e}function Fn(e,t,r,a,o){var s=a.data.scopedSlots,i=e.$scopedSlots,c=!!(s&&!s.$stable||i!==n&&!i.$stable||s&&e.$scopedSlots.$key!==s.$key),u=!!(o||e.$options._renderChildren||c);if(e.$options._parentVnode=a,e.$vnode=a,e._vnode&&(e._vnode.parent=a),e.$options._renderChildren=o,e.$attrs=a.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){Te(!1);for(var l=e._props,d=e.$options._propKeys||[],p=0;p<d.length;p++){var f=d[p],h=e.$options.props;l[f]=Ye(f,h,t,e)}Te(!0),e.$options.propsData=t}r=r||n;var m=e.$options._parentListeners;e.$options._parentListeners=r,En(e,r,m),u&&(e.$slots=St(o,a.context),e.$forceUpdate())}function Dn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Ln(e,t){if(t){if(e._directInactive=!1,Dn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Ln(e.$children[n]);Mn(e,"activated")}}function Pn(e,t){if((!t||(e._directInactive=!0,!Dn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Pn(e.$children[n]);Mn(e,"deactivated")}}function Mn(e,t){ge();var n=e.$options[t],r=t+" hook";if(n)for(var a=0,o=n.length;a<o;a++)nt(n[a],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),ye()}var Bn=[],Vn=[],zn={},Un=!1,Wn=!1,Gn=0;function Hn(){Gn=Bn.length=Vn.length=0,zn={},Un=Wn=!1}var Kn=0,qn=Date.now;if(Y&&!ee){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&qn()>document.createEvent("Event").timeStamp&&(qn=function(){return Xn.now()})}function Yn(){var e,t;for(Kn=qn(),Wn=!0,Bn.sort((function(e,t){return e.id-t.id})),Gn=0;Gn<Bn.length;Gn++)e=Bn[Gn],e.before&&e.before(),t=e.id,zn[t]=null,e.run();var n=Vn.slice(),r=Bn.slice();Hn(),Zn(n),Qn(r),ue&&z.devtools&&ue.emit("flush")}function Qn(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Mn(r,"updated")}}function Jn(e){e._inactive=!1,Vn.push(e)}function Zn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Ln(e[t],!0)}function er(e){var t=e.id;if(null==zn[t]){if(zn[t]=!0,Wn){var n=Bn.length-1;while(n>Gn&&Bn[n].id>e.id)n--;Bn.splice(n+1,0,e)}else Bn.push(e);Un||(Un=!0,ht(Yn))}}var tr=0,nr=function(e,t,n,r,a){this.vm=e,a&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++tr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new de,this.newDepIds=new de,this.expression="","function"===typeof t?this.getter=t:(this.getter=K(t),this.getter||(this.getter=_)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var e;ge(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Cs){if(!this.user)throw Cs;tt(Cs,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&bt(e),ye(),this.cleanupDeps()}return e},nr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},nr.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():er(this)},nr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(Cs){tt(Cs,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:_,set:_};function ar(e,t,n){rr.get=function(){return this[t][n]},rr.set=function(e){this[t][n]=e},Object.defineProperty(e,n,rr)}function or(e){e._watchers=[];var t=e.$options;t.props&&sr(e,t.props),t.methods&&hr(e,t.methods),t.data?ir(e):_e(e._data={},!0),t.computed&&lr(e,t.computed),t.watch&&t.watch!==oe&&mr(e,t.watch)}function sr(e,t){var n=e.$options.propsData||{},r=e._props={},a=e.$options._propKeys=[],o=!e.$parent;o||Te(!1);var s=function(o){a.push(o);var s=Ye(o,t,n,e);Re(r,o,s),o in e||ar(e,"_props",o)};for(var i in t)s(i);Te(!0)}function ir(e){var t=e.$options.data;t=e._data="function"===typeof t?cr(t,e):t||{},l(t)||(t={});var n=Object.keys(t),r=e.$options.props,a=(e.$options.methods,n.length);while(a--){var o=n[a];0,r&&v(r,o)||W(o)||ar(e,"_data",o)}_e(t,!0)}function cr(e,t){ge();try{return e.call(t,t)}catch(Cs){return tt(Cs,t,"data()"),{}}finally{ye()}}var ur={lazy:!0};function lr(e,t){var n=e._computedWatchers=Object.create(null),r=ce();for(var a in t){var o=t[a],s="function"===typeof o?o:o.get;0,r||(n[a]=new nr(e,s||_,_,ur)),a in e||dr(e,a,o)}}function dr(e,t,n){var r=!ce();"function"===typeof n?(rr.get=r?pr(t):fr(n),rr.set=_):(rr.get=n.get?r&&!1!==n.cache?pr(t):fr(n.get):_,rr.set=n.set||_),Object.defineProperty(e,t,rr)}function pr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),me.target&&t.depend(),t.value}}function fr(e){return function(){return e.call(this,this)}}function hr(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?_:T(t[n],e)}function mr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var a=0;a<r.length;a++)br(e,n,r[a]);else br(e,n,r)}}function br(e,t,n,r){return l(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function gr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Fe,e.prototype.$delete=De,e.prototype.$watch=function(e,t,n){var r=this;if(l(t))return br(r,e,t,n);n=n||{},n.user=!0;var a=new nr(r,e,t,n);if(n.immediate)try{t.call(r,a.value)}catch(o){tt(o,r,'callback for immediate watcher "'+a.expression+'"')}return function(){a.teardown()}}}var yr=0;function xr(e){e.prototype._init=function(e){var t=this;t._uid=yr++,t._isVue=!0,e&&e._isComponent?vr(t,e):t.$options=qe(Or(t.constructor),e||{},t),t._renderProxy=t,t._self=t,An(t),$n(t),mn(t),Mn(t,"beforeCreate"),Tt(t),or(t),Et(t),Mn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function vr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var a=r.componentOptions;n.propsData=a.propsData,n._parentListeners=a.listeners,n._renderChildren=a.children,n._componentTag=a.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Or(e){var t=e.options;if(e.super){var n=Or(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var a=wr(e);a&&S(e.extendOptions,a),t=e.options=qe(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function wr(e){var t,n=e.options,r=e.sealedOptions;for(var a in n)n[a]!==r[a]&&(t||(t={}),t[a]=n[a]);return t}function Cr(e){this._init(e)}function $r(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=N(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function kr(e){e.mixin=function(e){return this.options=qe(this.options,e),this}}function Ir(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,a=e._Ctor||(e._Ctor={});if(a[r])return a[r];var o=e.name||n.options.name;var s=function(e){this._init(e)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=t++,s.options=qe(n.options,e),s["super"]=n,s.options.props&&jr(s),s.options.computed&&Er(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,B.forEach((function(e){s[e]=n[e]})),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=e,s.sealedOptions=S({},s.options),a[r]=s,s}}function jr(e){var t=e.options.props;for(var n in t)ar(e.prototype,"_props",n)}function Er(e){var t=e.options.computed;for(var n in t)dr(e.prototype,n,t[n])}function Tr(e){B.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function Nr(e){return e&&(e.Ctor.options.name||e.tag)}function Sr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Ar(e,t){var n=e.cache,r=e.keys,a=e._vnode;for(var o in n){var s=n[o];if(s){var i=Nr(s.componentOptions);i&&!t(i)&&_r(n,o,r,a)}}}function _r(e,t,n,r){var a=e[t];!a||r&&a.tag===r.tag||a.componentInstance.$destroy(),e[t]=null,y(n,t)}xr(Cr),gr(Cr),Tn(Cr),_n(Cr),yn(Cr);var Rr=[String,RegExp,Array],Fr={name:"keep-alive",abstract:!0,props:{include:Rr,exclude:Rr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)_r(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Ar(e,(function(e){return Sr(t,e)}))})),this.$watch("exclude",(function(t){Ar(e,(function(e){return!Sr(t,e)}))}))},render:function(){var e=this.$slots.default,t=Cn(e),n=t&&t.componentOptions;if(n){var r=Nr(n),a=this,o=a.include,s=a.exclude;if(o&&(!r||!Sr(o,r))||s&&r&&Sr(s,r))return t;var i=this,c=i.cache,u=i.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[l]?(t.componentInstance=c[l].componentInstance,y(u,l),u.push(l)):(c[l]=t,u.push(l),this.max&&u.length>parseInt(this.max)&&_r(c,u[0],u,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Dr={KeepAlive:Fr};function Lr(e){var t={get:function(){return z}};Object.defineProperty(e,"config",t),e.util={warn:fe,extend:S,mergeOptions:qe,defineReactive:Re},e.set=Fe,e.delete=De,e.nextTick=ht,e.observable=function(e){return _e(e),e},e.options=Object.create(null),B.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,S(e.options.components,Dr),$r(e),kr(e),Ir(e),Tr(e)}Lr(Cr),Object.defineProperty(Cr.prototype,"$isServer",{get:ce}),Object.defineProperty(Cr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Cr,"FunctionalRenderContext",{value:Qt}),Cr.version="2.6.12";var Pr=b("style,class"),Mr=b("input,textarea,option,select,progress"),Br=function(e,t,n){return"value"===n&&Mr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Vr=b("contenteditable,draggable,spellcheck"),zr=b("events,caret,typing,plaintext-only"),Ur=function(e,t){return qr(t)||"false"===t?"false":"contenteditable"===e&&zr(t)?t:"true"},Wr=b("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Gr="http://www.w3.org/1999/xlink",Hr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Kr=function(e){return Hr(e)?e.slice(6,e.length):""},qr=function(e){return null==e||!1===e};function Xr(e){var t=e.data,n=e,r=e;while(a(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=Yr(r.data,t));while(a(n=n.parent))n&&n.data&&(t=Yr(t,n.data));return Qr(t.staticClass,t.class)}function Yr(e,t){return{staticClass:Jr(e.staticClass,t.staticClass),class:a(e.class)?[e.class,t.class]:t.class}}function Qr(e,t){return a(e)||a(t)?Jr(e,Zr(t)):""}function Jr(e,t){return e?t?e+" "+t:e:t||""}function Zr(e){return Array.isArray(e)?ea(e):c(e)?ta(e):"string"===typeof e?e:""}function ea(e){for(var t,n="",r=0,o=e.length;r<o;r++)a(t=Zr(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ta(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var na={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ra=b("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),aa=b("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),oa=function(e){return ra(e)||aa(e)};function sa(e){return aa(e)?"svg":"math"===e?"math":void 0}var ia=Object.create(null);function ca(e){if(!Y)return!0;if(oa(e))return!1;if(e=e.toLowerCase(),null!=ia[e])return ia[e];var t=document.createElement(e);return e.indexOf("-")>-1?ia[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ia[e]=/HTMLUnknownElement/.test(t.toString())}var ua=b("text,number,password,search,email,tel,url");function la(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function da(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function pa(e,t){return document.createElementNS(na[e],t)}function fa(e){return document.createTextNode(e)}function ha(e){return document.createComment(e)}function ma(e,t,n){e.insertBefore(t,n)}function ba(e,t){e.removeChild(t)}function ga(e,t){e.appendChild(t)}function ya(e){return e.parentNode}function xa(e){return e.nextSibling}function va(e){return e.tagName}function Oa(e,t){e.textContent=t}function wa(e,t){e.setAttribute(t,"")}var Ca=Object.freeze({createElement:da,createElementNS:pa,createTextNode:fa,createComment:ha,insertBefore:ma,removeChild:ba,appendChild:ga,parentNode:ya,nextSibling:xa,tagName:va,setTextContent:Oa,setStyleScope:wa}),$a={create:function(e,t){ka(t)},update:function(e,t){e.data.ref!==t.data.ref&&(ka(e,!0),ka(t))},destroy:function(e){ka(e,!0)}};function ka(e,t){var n=e.data.ref;if(a(n)){var r=e.context,o=e.componentInstance||e.elm,s=r.$refs;t?Array.isArray(s[n])?y(s[n],o):s[n]===o&&(s[n]=void 0):e.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}var Ia=new xe("",{},[]),ja=["create","activate","update","remove","destroy"];function Ea(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&a(e.data)===a(t.data)&&Ta(e,t)||o(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&r(t.asyncFactory.error))}function Ta(e,t){if("input"!==e.tag)return!0;var n,r=a(n=e.data)&&a(n=n.attrs)&&n.type,o=a(n=t.data)&&a(n=n.attrs)&&n.type;return r===o||ua(r)&&ua(o)}function Na(e,t,n){var r,o,s={};for(r=t;r<=n;++r)o=e[r].key,a(o)&&(s[o]=r);return s}function Sa(e){var t,n,s={},c=e.modules,u=e.nodeOps;for(t=0;t<ja.length;++t)for(s[ja[t]]=[],n=0;n<c.length;++n)a(c[n][ja[t]])&&s[ja[t]].push(c[n][ja[t]]);function l(e){return new xe(u.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&p(e)}return n.listeners=t,n}function p(e){var t=u.parentNode(e);a(t)&&u.removeChild(t,e)}function f(e,t,n,r,s,i,c){if(a(e.elm)&&a(i)&&(e=i[c]=Ce(e)),e.isRootInsert=!s,!h(e,t,n,r)){var l=e.data,d=e.children,p=e.tag;a(p)?(e.elm=e.ns?u.createElementNS(e.ns,p):u.createElement(p,e),w(e),x(e,d,t),a(l)&&O(e,t),y(n,e.elm,r)):o(e.isComment)?(e.elm=u.createComment(e.text),y(n,e.elm,r)):(e.elm=u.createTextNode(e.text),y(n,e.elm,r))}}function h(e,t,n,r){var s=e.data;if(a(s)){var i=a(e.componentInstance)&&s.keepAlive;if(a(s=s.hook)&&a(s=s.init)&&s(e,!1),a(e.componentInstance))return m(e,t),y(n,e.elm,r),o(i)&&g(e,t,n,r),!0}}function m(e,t){a(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,v(e)?(O(e,t),w(e)):(ka(e),t.push(e))}function g(e,t,n,r){var o,i=e;while(i.componentInstance)if(i=i.componentInstance._vnode,a(o=i.data)&&a(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Ia,i);t.push(i);break}y(n,e.elm,r)}function y(e,t,n){a(e)&&(a(n)?u.parentNode(n)===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function x(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)f(t[r],n,e.elm,null,!0,t,r)}else i(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function v(e){while(e.componentInstance)e=e.componentInstance._vnode;return a(e.tag)}function O(e,n){for(var r=0;r<s.create.length;++r)s.create[r](Ia,e);t=e.data.hook,a(t)&&(a(t.create)&&t.create(Ia,e),a(t.insert)&&n.push(e))}function w(e){var t;if(a(t=e.fnScopeId))u.setStyleScope(e.elm,t);else{var n=e;while(n)a(t=n.context)&&a(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t),n=n.parent}a(t=Nn)&&t!==e.context&&t!==e.fnContext&&a(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t)}function C(e,t,n,r,a,o){for(;r<=a;++r)f(n[r],o,e,t,!1,n,r)}function $(e){var t,n,r=e.data;if(a(r))for(a(t=r.hook)&&a(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(a(t=e.children))for(n=0;n<e.children.length;++n)$(e.children[n])}function k(e,t,n){for(;t<=n;++t){var r=e[t];a(r)&&(a(r.tag)?(I(r),$(r)):p(r.elm))}}function I(e,t){if(a(t)||a(e.data)){var n,r=s.remove.length+1;for(a(t)?t.listeners+=r:t=d(e.elm,r),a(n=e.componentInstance)&&a(n=n._vnode)&&a(n.data)&&I(n,t),n=0;n<s.remove.length;++n)s.remove[n](e,t);a(n=e.data.hook)&&a(n=n.remove)?n(e,t):t()}else p(e.elm)}function j(e,t,n,o,s){var i,c,l,d,p=0,h=0,m=t.length-1,b=t[0],g=t[m],y=n.length-1,x=n[0],v=n[y],O=!s;while(p<=m&&h<=y)r(b)?b=t[++p]:r(g)?g=t[--m]:Ea(b,x)?(T(b,x,o,n,h),b=t[++p],x=n[++h]):Ea(g,v)?(T(g,v,o,n,y),g=t[--m],v=n[--y]):Ea(b,v)?(T(b,v,o,n,y),O&&u.insertBefore(e,b.elm,u.nextSibling(g.elm)),b=t[++p],v=n[--y]):Ea(g,x)?(T(g,x,o,n,h),O&&u.insertBefore(e,g.elm,b.elm),g=t[--m],x=n[++h]):(r(i)&&(i=Na(t,p,m)),c=a(x.key)?i[x.key]:E(x,t,p,m),r(c)?f(x,o,e,b.elm,!1,n,h):(l=t[c],Ea(l,x)?(T(l,x,o,n,h),t[c]=void 0,O&&u.insertBefore(e,l.elm,b.elm)):f(x,o,e,b.elm,!1,n,h)),x=n[++h]);p>m?(d=r(n[y+1])?null:n[y+1].elm,C(e,d,n,h,y,o)):h>y&&k(t,p,m)}function E(e,t,n,r){for(var o=n;o<r;o++){var s=t[o];if(a(s)&&Ea(e,s))return o}}function T(e,t,n,i,c,l){if(e!==t){a(t.elm)&&a(i)&&(t=i[c]=Ce(t));var d=t.elm=e.elm;if(o(e.isAsyncPlaceholder))a(t.asyncFactory.resolved)?A(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var p,f=t.data;a(f)&&a(p=f.hook)&&a(p=p.prepatch)&&p(e,t);var h=e.children,m=t.children;if(a(f)&&v(t)){for(p=0;p<s.update.length;++p)s.update[p](e,t);a(p=f.hook)&&a(p=p.update)&&p(e,t)}r(t.text)?a(h)&&a(m)?h!==m&&j(d,h,m,n,l):a(m)?(a(e.text)&&u.setTextContent(d,""),C(d,null,m,0,m.length-1,n)):a(h)?k(h,0,h.length-1):a(e.text)&&u.setTextContent(d,""):e.text!==t.text&&u.setTextContent(d,t.text),a(f)&&a(p=f.hook)&&a(p=p.postpatch)&&p(e,t)}}}function N(e,t,n){if(o(n)&&a(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var S=b("attrs,class,staticClass,staticStyle,key");function A(e,t,n,r){var s,i=t.tag,c=t.data,u=t.children;if(r=r||c&&c.pre,t.elm=e,o(t.isComment)&&a(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(a(c)&&(a(s=c.hook)&&a(s=s.init)&&s(t,!0),a(s=t.componentInstance)))return m(t,n),!0;if(a(i)){if(a(u))if(e.hasChildNodes())if(a(s=c)&&a(s=s.domProps)&&a(s=s.innerHTML)){if(s!==e.innerHTML)return!1}else{for(var l=!0,d=e.firstChild,p=0;p<u.length;p++){if(!d||!A(d,u[p],n,r)){l=!1;break}d=d.nextSibling}if(!l||d)return!1}else x(t,u,n);if(a(c)){var f=!1;for(var h in c)if(!S(h)){f=!0,O(t,n);break}!f&&c["class"]&&bt(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,i){if(!r(t)){var c=!1,d=[];if(r(e))c=!0,f(t,d);else{var p=a(e.nodeType);if(!p&&Ea(e,t))T(e,t,d,null,null,i);else{if(p){if(1===e.nodeType&&e.hasAttribute(M)&&(e.removeAttribute(M),n=!0),o(n)&&A(e,t,d))return N(t,d,!0),e;e=l(e)}var h=e.elm,m=u.parentNode(h);if(f(t,d,h._leaveCb?null:m,u.nextSibling(h)),a(t.parent)){var b=t.parent,g=v(t);while(b){for(var y=0;y<s.destroy.length;++y)s.destroy[y](b);if(b.elm=t.elm,g){for(var x=0;x<s.create.length;++x)s.create[x](Ia,b);var O=b.data.hook.insert;if(O.merged)for(var w=1;w<O.fns.length;w++)O.fns[w]()}else ka(b);b=b.parent}}a(m)?k([e],0,0):a(e.tag)&&$(e)}}return N(t,d,c),t.elm}a(e)&&$(e)}}var Aa={create:_a,update:_a,destroy:function(e){_a(e,Ia)}};function _a(e,t){(e.data.directives||t.data.directives)&&Ra(e,t)}function Ra(e,t){var n,r,a,o=e===Ia,s=t===Ia,i=Da(e.data.directives,e.context),c=Da(t.data.directives,t.context),u=[],l=[];for(n in c)r=i[n],a=c[n],r?(a.oldValue=r.value,a.oldArg=r.arg,Pa(a,"update",t,e),a.def&&a.def.componentUpdated&&l.push(a)):(Pa(a,"bind",t,e),a.def&&a.def.inserted&&u.push(a));if(u.length){var d=function(){for(var n=0;n<u.length;n++)Pa(u[n],"inserted",t,e)};o?Ot(t,"insert",d):d()}if(l.length&&Ot(t,"postpatch",(function(){for(var n=0;n<l.length;n++)Pa(l[n],"componentUpdated",t,e)})),!o)for(n in i)c[n]||Pa(i[n],"unbind",e,e,s)}var Fa=Object.create(null);function Da(e,t){var n,r,a=Object.create(null);if(!e)return a;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=Fa),a[La(r)]=r,r.def=Xe(t.$options,"directives",r.name,!0);return a}function La(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Pa(e,t,n,r,a){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,a)}catch(Cs){tt(Cs,n.context,"directive "+e.name+" "+t+" hook")}}var Ma=[$a,Aa];function Ba(e,t){var n=t.componentOptions;if((!a(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(e.data.attrs)||!r(t.data.attrs))){var o,s,i,c=t.elm,u=e.data.attrs||{},l=t.data.attrs||{};for(o in a(l.__ob__)&&(l=t.data.attrs=S({},l)),l)s=l[o],i=u[o],i!==s&&Va(c,o,s);for(o in(ee||ne)&&l.value!==u.value&&Va(c,"value",l.value),u)r(l[o])&&(Hr(o)?c.removeAttributeNS(Gr,Kr(o)):Vr(o)||c.removeAttribute(o))}}function Va(e,t,n){e.tagName.indexOf("-")>-1?za(e,t,n):Wr(t)?qr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Vr(t)?e.setAttribute(t,Ur(t,n)):Hr(t)?qr(n)?e.removeAttributeNS(Gr,Kr(t)):e.setAttributeNS(Gr,t,n):za(e,t,n)}function za(e,t,n){if(qr(n))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Ua={create:Ba,update:Ba};function Wa(e,t){var n=t.elm,o=t.data,s=e.data;if(!(r(o.staticClass)&&r(o.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var i=Xr(t),c=n._transitionClasses;a(c)&&(i=Jr(i,Zr(c))),i!==n._prevClass&&(n.setAttribute("class",i),n._prevClass=i)}}var Ga,Ha={create:Wa,update:Wa},Ka="__r",qa="__c";function Xa(e){if(a(e[Ka])){var t=ee?"change":"input";e[t]=[].concat(e[Ka],e[t]||[]),delete e[Ka]}a(e[qa])&&(e.change=[].concat(e[qa],e.change||[]),delete e[qa])}function Ya(e,t,n){var r=Ga;return function a(){var o=t.apply(null,arguments);null!==o&&Za(e,a,n,r)}}var Qa=st&&!(ae&&Number(ae[1])<=53);function Ja(e,t,n,r){if(Qa){var a=Kn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=a||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Ga.addEventListener(e,t,se?{capture:n,passive:r}:n)}function Za(e,t,n,r){(r||Ga).removeEventListener(e,t._wrapper||t,n)}function eo(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},a=e.data.on||{};Ga=t.elm,Xa(n),vt(n,a,Ja,Za,Ya,t.context),Ga=void 0}}var to,no={create:eo,update:eo};function ro(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,o,s=t.elm,i=e.data.domProps||{},c=t.data.domProps||{};for(n in a(c.__ob__)&&(c=t.data.domProps=S({},c)),i)n in c||(s[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===i[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=o;var u=r(o)?"":String(o);ao(s,u)&&(s.value=u)}else if("innerHTML"===n&&aa(s.tagName)&&r(s.innerHTML)){to=to||document.createElement("div"),to.innerHTML="<svg>"+o+"</svg>";var l=to.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(l.firstChild)s.appendChild(l.firstChild)}else if(o!==i[n])try{s[n]=o}catch(Cs){}}}}function ao(e,t){return!e.composing&&("OPTION"===e.tagName||oo(e,t)||so(e,t))}function oo(e,t){var n=!0;try{n=document.activeElement!==e}catch(Cs){}return n&&e.value!==t}function so(e,t){var n=e.value,r=e._vModifiers;if(a(r)){if(r.number)return m(n)!==m(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var io={create:ro,update:ro},co=O((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function uo(e){var t=lo(e.style);return e.staticStyle?S(e.staticStyle,t):t}function lo(e){return Array.isArray(e)?A(e):"string"===typeof e?co(e):e}function po(e,t){var n,r={};if(t){var a=e;while(a.componentInstance)a=a.componentInstance._vnode,a&&a.data&&(n=uo(a.data))&&S(r,n)}(n=uo(e.data))&&S(r,n);var o=e;while(o=o.parent)o.data&&(n=uo(o.data))&&S(r,n);return r}var fo,ho=/^--/,mo=/\s*!important$/,bo=function(e,t,n){if(ho.test(t))e.style.setProperty(t,n);else if(mo.test(n))e.style.setProperty(I(t),n.replace(mo,""),"important");else{var r=yo(t);if(Array.isArray(n))for(var a=0,o=n.length;a<o;a++)e.style[r]=n[a];else e.style[r]=n}},go=["Webkit","Moz","ms"],yo=O((function(e){if(fo=fo||document.createElement("div").style,e=C(e),"filter"!==e&&e in fo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<go.length;n++){var r=go[n]+t;if(r in fo)return r}}));function xo(e,t){var n=t.data,o=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var s,i,c=t.elm,u=o.staticStyle,l=o.normalizedStyle||o.style||{},d=u||l,p=lo(t.data.style)||{};t.data.normalizedStyle=a(p.__ob__)?S({},p):p;var f=po(t,!0);for(i in d)r(f[i])&&bo(c,i,"");for(i in f)s=f[i],s!==d[i]&&bo(c,i,null==s?"":s)}}var vo={create:xo,update:xo},Oo=/\s+/;function wo(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Oo).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Co(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Oo).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function $o(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&S(t,ko(e.name||"v")),S(t,e),t}return"string"===typeof e?ko(e):void 0}}var ko=O((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Io=Y&&!te,jo="transition",Eo="animation",To="transition",No="transitionend",So="animation",Ao="animationend";Io&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(To="WebkitTransition",No="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(So="WebkitAnimation",Ao="webkitAnimationEnd"));var _o=Y?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Ro(e){_o((function(){_o(e)}))}function Fo(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),wo(e,t))}function Do(e,t){e._transitionClasses&&y(e._transitionClasses,t),Co(e,t)}function Lo(e,t,n){var r=Mo(e,t),a=r.type,o=r.timeout,s=r.propCount;if(!a)return n();var i=a===jo?No:Ao,c=0,u=function(){e.removeEventListener(i,l),n()},l=function(t){t.target===e&&++c>=s&&u()};setTimeout((function(){c<s&&u()}),o+1),e.addEventListener(i,l)}var Po=/\b(transform|all)(,|$)/;function Mo(e,t){var n,r=window.getComputedStyle(e),a=(r[To+"Delay"]||"").split(", "),o=(r[To+"Duration"]||"").split(", "),s=Bo(a,o),i=(r[So+"Delay"]||"").split(", "),c=(r[So+"Duration"]||"").split(", "),u=Bo(i,c),l=0,d=0;t===jo?s>0&&(n=jo,l=s,d=o.length):t===Eo?u>0&&(n=Eo,l=u,d=c.length):(l=Math.max(s,u),n=l>0?s>u?jo:Eo:null,d=n?n===jo?o.length:c.length:0);var p=n===jo&&Po.test(r[To+"Property"]);return{type:n,timeout:l,propCount:d,hasTransform:p}}function Bo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Vo(t)+Vo(e[n])})))}function Vo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function zo(e,t){var n=e.elm;a(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=$o(e.data.transition);if(!r(o)&&!a(n._enterCb)&&1===n.nodeType){var s=o.css,i=o.type,u=o.enterClass,l=o.enterToClass,d=o.enterActiveClass,p=o.appearClass,f=o.appearToClass,h=o.appearActiveClass,b=o.beforeEnter,g=o.enter,y=o.afterEnter,x=o.enterCancelled,v=o.beforeAppear,O=o.appear,w=o.afterAppear,C=o.appearCancelled,$=o.duration,k=Nn,I=Nn.$vnode;while(I&&I.parent)k=I.context,I=I.parent;var j=!k._isMounted||!e.isRootInsert;if(!j||O||""===O){var E=j&&p?p:u,T=j&&h?h:d,N=j&&f?f:l,S=j&&v||b,A=j&&"function"===typeof O?O:g,_=j&&w||y,R=j&&C||x,F=m(c($)?$.enter:$);0;var D=!1!==s&&!te,L=Go(A),M=n._enterCb=P((function(){D&&(Do(n,N),Do(n,T)),M.cancelled?(D&&Do(n,E),R&&R(n)):_&&_(n),n._enterCb=null}));e.data.show||Ot(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),A&&A(n,M)})),S&&S(n),D&&(Fo(n,E),Fo(n,T),Ro((function(){Do(n,E),M.cancelled||(Fo(n,N),L||(Wo(F)?setTimeout(M,F):Lo(n,i,M)))}))),e.data.show&&(t&&t(),A&&A(n,M)),D||L||M()}}}function Uo(e,t){var n=e.elm;a(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=$o(e.data.transition);if(r(o)||1!==n.nodeType)return t();if(!a(n._leaveCb)){var s=o.css,i=o.type,u=o.leaveClass,l=o.leaveToClass,d=o.leaveActiveClass,p=o.beforeLeave,f=o.leave,h=o.afterLeave,b=o.leaveCancelled,g=o.delayLeave,y=o.duration,x=!1!==s&&!te,v=Go(f),O=m(c(y)?y.leave:y);0;var w=n._leaveCb=P((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),x&&(Do(n,l),Do(n,d)),w.cancelled?(x&&Do(n,u),b&&b(n)):(t(),h&&h(n)),n._leaveCb=null}));g?g(C):C()}function C(){w.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),p&&p(n),x&&(Fo(n,u),Fo(n,d),Ro((function(){Do(n,u),w.cancelled||(Fo(n,l),v||(Wo(O)?setTimeout(w,O):Lo(n,i,w)))}))),f&&f(n,w),x||v||w())}}function Wo(e){return"number"===typeof e&&!isNaN(e)}function Go(e){if(r(e))return!1;var t=e.fns;return a(t)?Go(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Ho(e,t){!0!==t.data.show&&zo(t)}var Ko=Y?{create:Ho,activate:Ho,remove:function(e,t){!0!==e.data.show?Uo(e,t):t()}}:{},qo=[Ua,Ha,no,io,vo,Ko],Xo=qo.concat(Ma),Yo=Sa({nodeOps:Ca,modules:Xo});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&as(e,"input")}));var Qo={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Ot(n,"postpatch",(function(){Qo.componentUpdated(e,t,n)})):Jo(e,t,n.context),e._vOptions=[].map.call(e.options,ts)):("textarea"===n.tag||ua(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",ns),e.addEventListener("compositionend",rs),e.addEventListener("change",rs),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Jo(e,t,n.context);var r=e._vOptions,a=e._vOptions=[].map.call(e.options,ts);if(a.some((function(e,t){return!D(e,r[t])}))){var o=e.multiple?t.value.some((function(e){return es(e,a)})):t.value!==t.oldValue&&es(t.value,a);o&&as(e,"change")}}}};function Jo(e,t,n){Zo(e,t,n),(ee||ne)&&setTimeout((function(){Zo(e,t,n)}),0)}function Zo(e,t,n){var r=t.value,a=e.multiple;if(!a||Array.isArray(r)){for(var o,s,i=0,c=e.options.length;i<c;i++)if(s=e.options[i],a)o=L(r,ts(s))>-1,s.selected!==o&&(s.selected=o);else if(D(ts(s),r))return void(e.selectedIndex!==i&&(e.selectedIndex=i));a||(e.selectedIndex=-1)}}function es(e,t){return t.every((function(t){return!D(t,e)}))}function ts(e){return"_value"in e?e._value:e.value}function ns(e){e.target.composing=!0}function rs(e){e.target.composing&&(e.target.composing=!1,as(e.target,"input"))}function as(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function os(e){return!e.componentInstance||e.data&&e.data.transition?e:os(e.componentInstance._vnode)}var ss={bind:function(e,t,n){var r=t.value;n=os(n);var a=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&a?(n.data.show=!0,zo(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,a=t.oldValue;if(!r!==!a){n=os(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?zo(n,(function(){e.style.display=e.__vOriginalDisplay})):Uo(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,a){a||(e.style.display=e.__vOriginalDisplay)}},is={model:Qo,show:ss},cs={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function us(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?us(Cn(t.children)):e}function ls(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var a=n._parentListeners;for(var o in a)t[C(o)]=a[o];return t}function ds(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ps(e){while(e=e.parent)if(e.data.transition)return!0}function fs(e,t){return t.key===e.key&&t.tag===e.tag}var hs=function(e){return e.tag||wn(e)},ms=function(e){return"show"===e.name},bs={name:"transition",props:cs,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(hs),n.length)){0;var r=this.mode;0;var a=n[0];if(ps(this.$vnode))return a;var o=us(a);if(!o)return a;if(this._leaving)return ds(e,a);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:i(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var c=(o.data||(o.data={})).transition=ls(this),u=this._vnode,l=us(u);if(o.data.directives&&o.data.directives.some(ms)&&(o.data.show=!0),l&&l.data&&!fs(o,l)&&!wn(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var d=l.data.transition=S({},c);if("out-in"===r)return this._leaving=!0,Ot(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),ds(e,a);if("in-out"===r){if(wn(o))return u;var p,f=function(){p()};Ot(c,"afterEnter",f),Ot(c,"enterCancelled",f),Ot(d,"delayLeave",(function(e){p=e}))}}return a}}},gs=S({tag:String,moveClass:String},cs);delete gs.mode;var ys={props:gs,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var a=Sn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,a(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,a=this.$slots.default||[],o=this.children=[],s=ls(this),i=0;i<a.length;i++){var c=a[i];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(r){for(var u=[],l=[],d=0;d<r.length;d++){var p=r[d];p.data.transition=s,p.data.pos=p.elm.getBoundingClientRect(),n[p.key]?u.push(p):l.push(p)}this.kept=e(t,null,u),this.removed=l}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(xs),e.forEach(vs),e.forEach(Os),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;Fo(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(No,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(No,e),n._moveCb=null,Do(n,t))})}})))},methods:{hasMove:function(e,t){if(!Io)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Co(n,e)})),wo(n,t),n.style.display="none",this.$el.appendChild(n);var r=Mo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function xs(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function vs(e){e.data.newPos=e.elm.getBoundingClientRect()}function Os(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,a=t.top-n.top;if(r||a){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+a+"px)",o.transitionDuration="0s"}}var ws={Transition:bs,TransitionGroup:ys};Cr.config.mustUseProp=Br,Cr.config.isReservedTag=oa,Cr.config.isReservedAttr=Pr,Cr.config.getTagNamespace=sa,Cr.config.isUnknownElement=ca,S(Cr.options.directives,is),S(Cr.options.components,ws),Cr.prototype.__patch__=Y?Yo:_,Cr.prototype.$mount=function(e,t){return e=e&&Y?la(e):void 0,Rn(this,e,t)},Y&&setTimeout((function(){z.devtools&&ue&&ue.emit("init",Cr)}),0),t["a"]=Cr}).call(this,n("c8ba"))},"2cf4":function(e,t,n){var r,a,o,s=n("da84"),i=n("d039"),c=n("0366"),u=n("1be4"),l=n("cc12"),d=n("1cdc"),p=n("605d"),f=s.location,h=s.setImmediate,m=s.clearImmediate,b=s.process,g=s.MessageChannel,y=s.Dispatch,x=0,v={},O="onreadystatechange",w=function(e){if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},C=function(e){return function(){w(e)}},$=function(e){w(e.data)},k=function(e){s.postMessage(e+"",f.protocol+"//"+f.host)};h&&m||(h=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return v[++x]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(x),x},m=function(e){delete v[e]},p?r=function(e){b.nextTick(C(e))}:y&&y.now?r=function(e){y.now(C(e))}:g&&!d?(a=new g,o=a.port2,a.port1.onmessage=$,r=c(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&f&&"file:"!==f.protocol&&!i(k)?(r=k,s.addEventListener("message",$,!1)):r=O in l("script")?function(e){u.appendChild(l("script"))[O]=function(){u.removeChild(this),w(e)}}:function(e){setTimeout(C(e),0)}),e.exports={set:h,clear:m}},"2d00":function(e,t,n){var r,a,o=n("da84"),s=n("342f"),i=o.process,c=i&&i.versions,u=c&&c.v8;u?(r=u.split("."),a=r[0]+r[1]):s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(a=r[1]))),e.exports=a&&+a},"2f2c":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n,i=!1){const c=Object(o["a"])(e,"x","denseBincount"),u=Object(o["a"])(t,"weights","denseBincount");s["b"]("int32"===c.dtype,()=>"Error in denseBincount: input dtype must be int32, but got "+c.dtype),s["b"](c.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${c.rank}.`),s["b"](n>=0,()=>`size must be non-negative, but got ${n}.`),s["b"](u.size===c.size||0===u.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${c.shape}, weights shape: `+u.shape+".");const l={x:c,weights:u},d={size:n,binaryOutput:i};return r["a"].runKernel(a["L"],l,d)}const u=Object(i["a"])({denseBincount_:c})},"2fb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=0){const n=Object(o["a"])(e,"x","step"),s={x:n},i={alpha:t};return r["a"].runKernel(a["Ic"],s,i)}const c=Object(s["a"])({step_:i})},"31bb":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"34d7":function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return x})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return $}));var r=n("f490"),a=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o=20,s=3,i=7;function c(e,t,n,r){const o=Object(a["j"])(t),s=u(e,t,n,o),i=t.length,c=p(e,t,n,o,s),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+i),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(c.map(e=>"    "+e).join("\n")),l.join("\n")}function u(e,t,n,r){const o=Object(a["O"])(t),s=r[r.length-1],i=new Array(s).fill(0),c=t.length,u="complex64"===n?f(e):e;if(c>1)for(let a=0;a<o/s;a++){const e=a*s;for(let t=0;t<s;t++)i[t]=Math.max(i[t],l(u[e+t],0,n).length)}return i}function l(e,t,n){let r;return r=Array.isArray(e)?parseFloat(e[0].toFixed(i))+" + "+parseFloat(e[1].toFixed(i))+"j":Object(a["z"])(e)?`'${e}'`:"bool"===n?d(e):parseFloat(e.toFixed(i)).toString(),Object(a["L"])(r,t)}function d(e){return 0===e?"false":"true"}function p(e,t,n,r,a,i=!0){const c="complex64"===n?2:1,u=t[0],h=t.length;if(0===h){if("complex64"===n){const t=f(e);return[l(t[0],0,n)]}return"bool"===n?[d(e[0])]:[e[0].toString()]}if(1===h){if(u>o){const t=s*c;let r=Array.from(e.slice(0,t)),o=Array.from(e.slice((u-s)*c,u*c));return"complex64"===n&&(r=f(r),o=f(o)),["["+r.map((e,t)=>l(e,a[t],n)).join(", ")+", ..., "+o.map((e,t)=>l(e,a[u-s+t],n)).join(", ")+"]"]}const t="complex64"===n?f(e):Array.from(e);return["["+t.map((e,t)=>l(e,a[t],n)).join(", ")+"]"]}const m=t.slice(1),b=r.slice(1),g=r[0]*c,y=[];if(u>o){for(let t=0;t<s;t++){const r=t*g,o=r+g;y.push(...p(e.slice(r,o),m,n,b,a,!1))}y.push("...");for(let t=u-s;t<u;t++){const r=t*g,o=r+g;y.push(...p(e.slice(r,o),m,n,b,a,t===u-1))}}else for(let o=0;o<u;o++){const t=o*g,r=t+g;y.push(...p(e.slice(t,r),m,n,b,a,o===u-1))}const x=2===h?",":"";y[0]="["+y[0]+x;for(let o=1;o<y.length-1;o++)y[o]=" "+y[o]+x;let v=",\n";for(let o=2;o<h;o++)v+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(i?"":v),y}function f(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var h=n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=a["O"](e),null!=n){const e=n.length;a["b"](e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||a["n"](t,this.size),this.strides=Object(a["j"])(e)}set(e,...t){0===t.length&&(t=[0]),a["b"](t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const r of e){if(r<0||r>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=`+this.shape;throw new Error(t)}t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return b().makeTensor(this.values,this.shape,this.dtype)}}let b=null,g=null,y=null;function x(e){b=e}function v(e){g=e}function O(e){y=e}class w{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=a["O"](e),this.strides=Object(a["j"])(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return g.buffer(this.shape,this.dtype,e)}bufferSync(){return g.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Object(a["T"])(this.shape,e)}arraySync(){return Object(a["T"])(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const e=b().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>h["decodeString"](e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=b().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>h["decodeString"](e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await b().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(b().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return g.print(this,e)}clone(){return this.throwIfDisposed(),g.clone(this)}toString(e=!1){const t=this.dataSync();return c(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),g.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),b().makeVariable(this,e,t,n)}}function C(){return Object(r["a"])("Tensor",()=>w)}Object.defineProperty(w,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),C();class $ extends w{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!a["a"](e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);b().disposeTensor(this),this.dataId=e.dataId,b().incRef(this,null)}dispose(){b().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty($,Symbol.hasInstance,{value:e=>e instanceof w&&null!=e.assign&&e.assign instanceof Function})},"350f":function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return g}));var r=n("0777"),a=n("357d"),o=n("6ad5"),s=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const i=4;async function c(e,t){const n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let s=0;s<a.length;++s){const o=a[s],c=Array.isArray(e)?e[s].tensor:e[o];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype&&"complex64"!==c.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${c.dtype}`);const u={name:o,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){const e=new Promise(async e=>{const t=await c.bytes(),n=t.reduce((e,t)=>e+t.length,0)+i*t.length,r=new Uint8Array(n);let a=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=i,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(c.data());null!=t&&(u.group=t),n.push(u)}const o=await Promise.all(r);return{data:l(o),specs:n}}function u(e,t){const n={};let c,u=0;for(const l of t){const t=l.name,d=l.dtype,p=l.shape,f=Object(o["O"])(p);let h;if("quantization"in l){const n=l.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${l.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${l.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==d)throw new Error(`Weight ${l.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${d}.`)}const r=s["a"][n.dtype],a=e.slice(u,u+f*r),o="uint8"===n.dtype?new Uint8Array(a):new Uint16Array(a);if("float32"===d)if("uint8"===n.dtype||"uint16"===n.dtype){h=new Float32Array(o.length);for(let e=0;e<o.length;e++){const t=o[e];h[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===c&&(c=O()),h=c(o)}else{if("int32"!==d)throw new Error(`Unsupported dtype in weight '${t}': ${d}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);h=new Int32Array(o.length);for(let e=0;e<o.length;e++){const t=o[e];h[e]=Math.round(t*n.scale+n.min)}}u+=f*r}else if("string"===d){const t=Object(o["O"])(l.shape);h=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(u,u+i))[0];u+=i;const n=new Uint8Array(e.slice(u,u+t));h.push(n),u+=t}}else{const o=s["a"][d],i=e.slice(u,u+f*o);if("float32"===d)h=new Float32Array(i);else if("int32"===d)h=new Int32Array(i);else if("bool"===d)h=new Uint8Array(i);else{if("complex64"!==d)throw new Error(`Unsupported dtype in weight '${t}': ${d}`);{h=new Float32Array(i);const e=new Float32Array(h.length/2),o=new Float32Array(h.length/2);for(let t=0;t<e.length;t++)e[t]=h[2*t],o[t]=h[2*t+1];const s=Object(a["a"])(e,p,"float32"),c=Object(a["a"])(o,p,"float32");n[t]=Object(r["a"])(s,c),s.dispose(),c.dispose()}}u+=f*o}"complex64"!==d&&(n[t]=Object(a["a"])(h,p,d))}return n}function l(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});const r=new Uint8Array(t);let a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}const d="undefined"!==typeof e&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function p(t){return d?e.byteLength(t):new Blob([t]).size}function f(t){if(d)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,a=n.length;e<a;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function h(t){if(d){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function m(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function b(e){const t="/";e=e.trim();while(e.endsWith(t))e=e.slice(0,e.length-1);const n=e.split(t);return n[n.length-1]}function g(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:p(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:p(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function y(){const e=e=>{let t=e<<13,n=0;while(0===(8388608&t))n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function x(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function v(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function O(){const e=y(),t=x(),n=v();return r=>{const a=new ArrayBuffer(4*r.length),o=new Uint32Array(a);for(let s=0;s<r.length;s++){const a=r[s],i=e[n[a>>10]+(1023&a)]+t[a>>10];o[s]=i}return new Float32Array(a)}}}).call(this,n("b639").Buffer)},"357d":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("a3f7"),a=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t,n){const o=Object(r["c"])(e,n);return Object(a["a"])(e,t,o,n)}},"35a1":function(e,t,n){var r=n("f5df"),a=n("3f8c"),o=n("b622"),s=o("iterator");e.exports=function(e){if(void 0!=e)return e[s]||e["@@iterator"]||a[r(e)]}},"35c9":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t){const n=Object(o["a"])(e,"x","reshape","string_or_numeric"),s={x:n},i={shape:t};return r["a"].runKernel(a["jc"],s,i)}const c=Object(s["a"])({reshape_:i})},"364e":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n="NHWC"){const i=Object(o["a"])(e,"x","depthToSpace"),c="NHWC"===n?i.shape[1]:i.shape[2],u="NHWC"===n?i.shape[2]:i.shape[3],l="NHWC"===n?i.shape[3]:i.shape[1];s["b"](c*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${c} and ${t}  for depthToSpace with input shape\n    ${i.shape}`),s["b"](u*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${t} for depthToSpace with input shape\n        ${i.shape}`),s["b"](l%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${l} for depthToSpace with input shape ${i.shape}`);const d={x:i},p={blockSize:t,dataFormat:n};return r["a"].runKernel(a["M"],d,p)}const u=Object(i["a"])({depthToSpace_:c})},"36e5":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d}));var r=n("6ad5");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function o(e,t,n){const r=e.length+t.length,a=[];let o=0,s=0;for(let i=0;i<r;i++)-1===n.indexOf(i)?a.push(e[o++]):a.push(t[s++]);return a}function s(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);const a=t.map(t=>e[t]);return[n,a]}function i(e,t){const n=t.map(e=>1);return o(e,n,t)}function c(e,t,n){r["b"](a(t,n),()=>e+" supports only inner-most axes for now. "+`Got axes ${t} and rank-${n} input.`)}function u(e,t){if(a(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function l(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function d(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}},"37e8":function(e,t,n){var r=n("83ab"),a=n("9bf2"),o=n("825a"),s=n("df75");e.exports=r?Object.defineProperties:function(e,t){o(e);var n,r=s(t),i=r.length,c=0;while(i>c)a.f(e,n=r[c++],t[n]);return e}},"3a44":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t=0){const n=Object(o["a"])(e,"x","unstack","string_or_numeric");s["b"](t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const i={value:n},c={axis:t};return r["a"].runKernel(a["Sc"],i,c)}const u=Object(i["a"])({unstack_:c})},"3b28":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n){const i=Object(o["a"])(e,"x","batchToSpaceND"),c=t.reduce((e,t)=>e*t);s["b"](i.rank>=1+t.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${t.length}`),s["b"](n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),s["b"](i.shape[0]%c===0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${c}`);const u={x:i},l={blockShape:t,crops:n};return r["a"].runKernel(a["t"],u,l)}const u=Object(i["a"])({batchToSpaceND_:c})},"3bb7":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","neg"),n={x:t};return r["a"].runKernel(a["Rb"],n)}const c=Object(s["a"])({neg_:i})},"3bbe":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3bfc":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},"3d50":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},"3efc":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef"),i=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n,s=!1){const c=Object(o["a"])(e,"logits","multinomial"),u=c.size,l=c.rank;if(u<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+u+".");if(l>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+l);n=n||Math.random();const d=1===l?Object(i["a"])(c,[1,-1]):c,p={logits:d},f={numSamples:t,seed:n,normalized:s},h=r["a"].runKernel(a["Pb"],p,f);return 1===l?Object(i["a"])(h,[h.size]):h}const u=Object(s["a"])({multinomial_:c})},"3f8c":function(e,t){e.exports={}},4184:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","squaredDifference"),c=Object(s["a"])(t,"b","squaredDifference");[n,c]=Object(o["b"])(n,c),Object(i["a"])(n.shape,c.shape);const u={a:n,b:c},l={};return r["a"].runKernel(a["Hc"],u,l)}const l=Object(c["a"])({squaredDifference_:u})},"428f":function(e,t,n){var r=n("da84");e.exports=r},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,n){var r=n("d039"),a=n("c6b6"),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?o.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var r=n("b622"),a=n("7c73"),o=n("9bf2"),s=r("unscopables"),i=Array.prototype;void 0==i[s]&&o.f(i,s,{configurable:!0,value:a(null)}),e.exports=function(e){i[s][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},4516:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=null,n=!1){const s=Object(o["a"])(e,"x","any","bool"),i={x:s},c={axis:t,keepDims:n};return r["a"].runKernel(a["g"],i,c)}const c=Object(s["a"])({any_:i})},"45bb":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t,n=0){const s=Object(o["a"])(e,"x","split"),i={x:s},c={numOrSizeSplits:t,axis:n};return r["a"].runKernel(a["Ec"],i,c)}const c=Object(s["a"])({split_:i})},4611:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=Object(s["a"])(e,"a","mod"),i=Object(s["a"])(t,"b","mod");[n,i]=Object(o["b"])(n,i);const c={a:n,b:i};return r["a"].runKernel(a["Ob"],c)}const u=Object(i["a"])({mod_:c})},4615:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","acosh"),n={x:t};return r["a"].runKernel(a["c"],n)}const c=Object(s["a"])({acosh_:i})},"46a8":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","relu6"),n={x:t};return r["a"].runKernel(a["ic"],n)}const c=Object(s["a"])({relu6_:i})},"46b1":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","log1p"),n={x:t};return r["a"].runKernel(a["zb"],n)}const c=Object(s["a"])({log1p_:i})},"46b8":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("6ae2"),a=n("c05b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t,n){const o={shape:e,value:t,dtype:n};return r["a"].runKernel(a["ab"],{},o)}},"46cc":function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
var r,a;n.d(t,"a",(function(){return r})),function(e){e[e["DT_INVALID"]=0]="DT_INVALID",e[e["DT_FLOAT"]=1]="DT_FLOAT",e[e["DT_DOUBLE"]=2]="DT_DOUBLE",e[e["DT_INT32"]=3]="DT_INT32",e[e["DT_UINT8"]=4]="DT_UINT8",e[e["DT_INT16"]=5]="DT_INT16",e[e["DT_INT8"]=6]="DT_INT8",e[e["DT_STRING"]=7]="DT_STRING",e[e["DT_COMPLEX64"]=8]="DT_COMPLEX64",e[e["DT_INT64"]=9]="DT_INT64",e[e["DT_BOOL"]=10]="DT_BOOL",e[e["DT_QINT8"]=11]="DT_QINT8",e[e["DT_QUINT8"]=12]="DT_QUINT8",e[e["DT_QINT32"]=13]="DT_QINT32",e[e["DT_BFLOAT16"]=14]="DT_BFLOAT16",e[e["DT_FLOAT_REF"]=101]="DT_FLOAT_REF",e[e["DT_DOUBLE_REF"]=102]="DT_DOUBLE_REF",e[e["DT_INT32_REF"]=103]="DT_INT32_REF",e[e["DT_UINT8_REF"]=104]="DT_UINT8_REF",e[e["DT_INT16_REF"]=105]="DT_INT16_REF",e[e["DT_INT8_REF"]=106]="DT_INT8_REF",e[e["DT_STRING_REF"]=107]="DT_STRING_REF",e[e["DT_COMPLEX64_REF"]=108]="DT_COMPLEX64_REF",e[e["DT_INT64_REF"]=109]="DT_INT64_REF",e[e["DT_BOOL_REF"]=110]="DT_BOOL_REF",e[e["DT_QINT8_REF"]=111]="DT_QINT8_REF",e[e["DT_QUINT8_REF"]=112]="DT_QUINT8_REF",e[e["DT_QINT32_REF"]=113]="DT_QINT32_REF",e[e["DT_BFLOAT16_REF"]=114]="DT_BFLOAT16_REF"}(r||(r={})),function(e){let t;(function(e){e[e["LEGACY"]=0]="LEGACY",e[e["V1"]=1]="V1",e[e["V2"]=2]="V2"})(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(a||(a={}))},4749:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return b}));var r=n("526f"),a=n("9e38"),o=n("6f37"),s=n("a5aa"),i=n("520f"),c=n("917a"),u=n("46a8"),l=n("35c9"),d=n("2fb1"),p=n("e053");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Object(s["a"])(e,Object(d["a"])(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function h(e,t){let n=t;const a=r["c"](e.shape,t.shape);return a.length>0&&(n=Object(p["a"])(n,a)),Object(l["a"])(n,e.shape)}function m(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Object(c["a"])(e);if("elu"===t)return Object(a["a"])(e);if("relu6"===t)return Object(u["a"])(e);if("prelu"===t)return Object(i["a"])(e,n);if("leakyrelu"===t)return Object(o["a"])(e,r);throw new Error(`Unknown fused activation ${t}.`)}const b=(e,t)=>{const n=e>0;return!n||"linear"===t}},4840:function(e,t,n){var r=n("825a"),a=n("1c0b"),o=n("b622"),s=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[s])?t:a(n)}},4850:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e){s["b"](Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),s["b"](e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+e.length);const t=e.map((e,t)=>Object(o["a"])(e,"tensors"+t,"addN")),n=t[0];t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!s["a"](e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const i=t;return r["a"].runKernel(a["e"],i)}const u=Object(i["a"])({addN_:c})},"487b":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n=!1,i=!1){let c=Object(s["a"])(e,"a","matMul"),u=Object(s["a"])(t,"b","matMul");[c,u]=Object(o["b"])(c,u);const l={a:c,b:u},d={transposeA:n,transposeB:i};return r["a"].runKernel(a["s"],l,d)}const u=Object(i["a"])({matMul_:c})},"48db":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("f0a9"),i=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(o["a"])(e,"broadcastTo","x");const i=n.shape;if(t.some(e=>!(e>0)||e%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();while(e.length<t.length)e.unshift(1);n=Object(c["a"])(n,e)}const u=n.shape,l=Array.from(t);for(let r=t.length-1;r>=0;r--)if(u[r]===t[r])l[r]=1;else if(1!==n.shape[r])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${t}].`);const d=l.map((e,t)=>e>1?t:-1).filter(e=>e>=0);if(0===d.length)return Object(s["a"])(n);const p={x:n},f={reps:l};return r["a"].runKernel(a["Oc"],p,f)}const l=Object(i["a"])({broadcastTo_:u})},4930:function(e,t,n){var r=n("605d"),a=n("2d00"),o=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(r?38===a:a>37&&a<41)}))},"4b05":function(e,t,n){"use strict";(function(e){var t=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r={importFetch:()=>n(1)};let a;class o{constructor(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=Object(t["b"])().global.fetch?Object(t["b"])().global.fetch(e,n):(null==a&&(a=r.importFetch()),a(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}Object(t["b"])().get("IS_NODE")&&Object(t["b"])().setPlatform("node",new o)}).call(this,n("4362"))},"4c7a":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("6ad5"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){Object(o["b"])("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return r["a"].runKernel(a["mb"],t)}const c=Object(s["a"])({ifft_:i})},"4d64":function(e,t,n){var r=n("fc6a"),a=n("50c4"),o=n("23cb"),s=function(e){return function(t,n,s){var i,c=r(t),u=a(c.length),l=o(s,u);if(e&&n!=n){while(u>l)if(i=c[l++],i!=i)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4f20":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","exp"),n={x:t};return r["a"].runKernel(a["W"],n)}const c=Object(s["a"])({exp_:i})},"508f":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=Object(s["a"])(e,"a","floorDiv"),i=Object(s["a"])(t,"b","floorDiv");[n,i]=Object(o["b"])(n,i);const c={a:n,b:i};return r["a"].runKernel(a["db"],c)}const u=Object(i["a"])({floorDiv_:c})},"50c4":function(e,t,n){var r=n("a691"),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},5135:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"520f":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t){const n=Object(o["a"])(e,"x","prelu"),s=Object(o["a"])(t,"alpha","prelu"),i={x:n,alpha:s};return r["a"].runKernel(a["bc"],i)}const c=Object(s["a"])({prelu_:i})},"526c":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t,n,a,s){const i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,c=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return o(t.inputNames[i.inputIndexStart],n,a,s);if("tensors"===i.type){const r=t.inputNames.slice(e,c);return r.map(e=>o(e,n,a,s))}const u=o(t.inputNames.slice(e)[0],n,a,s),l=u.dataSync();return"number"===i.type?l[0]:r["Ld"].toNestedArray(u.shape,l)}const c=t.attrParams[e];return c&&c.value}function o(e,t,n,r){const[a,o]=u(e);if(null!=r){const e=r.getHashTableHandleByName(a);if(null!=e)return e}const s=n.currentContextIds.find(e=>!!t[c(a,e)]);return void 0!==s?t[c(a,s)][o]:void 0}function s(e,t,n){return t[c(e,n.currentContextId)]}function i(e,t){const[n,r]=u(e);return[c(n,t&&t.currentContextId),r]}function c(e,t){return t?`${e}-${t}`:e}function u(e){const t=e.split(":");if(1===t.length)return[e,0];const n=t[0];return[n,Number(t[t.length-1])]}function l(e,t,n){let r=a("pad",e,t,n);if("explicit"===r){r=a("explicitPaddings",e,t,n);const o=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)o[e][0]=r[2*e],o[e][1]=r[2*e+1];return o}return r}function d(e){return e.kept?e:Object(r["fd"])(e)}},"526f":function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const o=n-1-a,s=e[o]||1,i=t[t.length-1-a]||1;i>1&&1===s&&r.unshift(o)}return r}function a(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],o=t.length-r-1,s=t[o];(null==a||1===a&&s>1)&&n.unshift(o)}return n}function o(e,t){const n=[],r=Math.max(e.length,t.length);for(let a=0;a<r;a++){let r=e[e.length-a-1];null==r&&(r=1);let o=t[t.length-a-1];if(null==o&&(o=1),1===r)n.unshift(o);else if(1===o)n.unshift(r);else{if(r!==o){const n=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(n)}n.unshift(r)}}return n}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}))},"538e":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("6ae2");n("34d7"),n("a3f7"),n("6ad5");function a(e){return r["a"].customGrad(e)}},"53fd":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t=[1,1,1],n,i,u,l="NDHWC"){const d=Object(o["a"])(e,"x","maxPool3d");let p=d,f=!1;4===d.rank&&(f=!0,p=Object(c["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),s["b"](5===p.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${p.rank}.`),s["b"]("NDHWC"===l,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+l),null!=u&&s["b"](s["v"](i),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${u} but got pad ${i}.`);const h={x:p},m={filterSize:t,strides:n,pad:i,dimRoundingMode:u,dataFormat:l},b=r["a"].runKernel(a["Fb"],h,m);return f?Object(c["a"])(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const l=Object(i["a"])({maxPool3d_:u})},"54ef":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("6ae2"),a=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o="__op";function s(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");let n=t[0];const s=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=o;const i=(...e)=>{r["a"].startScope(n);try{const t=s(...e);return Object(a["x"])(t)&&console.error("Cannot return a Promise inside of tidy."),r["a"].endScope(t),t}catch(t){throw r["a"].endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}},5616:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=1,n=!0){const s=Object(o["a"])(e,"x","topk");if(0===s.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=s.shape[s.shape.length-1];if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got `+t);const c={x:s},u={k:t,sorted:n},[l,d]=r["a"].runKernel(a["Pc"],c,u);return{values:l,indices:d}}const c=Object(s["a"])({topk_:i})},5692:function(e,t,n){var r=n("c430"),a=n("c6cd");(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),a=n("241c"),o=n("7418"),s=n("825a");e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},"57e0":function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r;n.d(t,"a",(function(){return r})),function(e){e[e["NONE"]=0]="NONE",e[e["MEAN"]=1]="MEAN",e[e["SUM"]=2]="SUM",e[e["SUM_BY_NONZERO_WEIGHTS"]=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},5874:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},5894:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("6ae2"),a=n("c05b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const o={start:e,stop:t,num:n};return r["a"].runKernel(a["xb"],{},o)}},5959:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("6ae2"),a=n("6ad5"),o=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e,t,n,s){if(null==s&&(s=Object(a["r"])(e)),"complex64"===s)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(a["A"])(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Object(a["c"])(t);const e=Object(a["O"])(t),r=Object(a["O"])(n);Object(a["b"])(e===r,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`);for(let o=0;o<n.length;++o){const e=n[o],r=o!==n.length-1||e!==Object(a["O"])(t.slice(o));Object(a["b"])(n[o]===t[o]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return Object(a["A"])(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==s?Object(o["toTypedArray"])(e,s):Object(a["m"])(e,[],!0),r["a"].makeTensor(e,t,s)}},5960:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","ceil"),n={x:t};return r["a"].runKernel(a["w"],n)}const c=Object(s["a"])({ceil_:i})},"5a2c":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("6ae2"),a=n("6ad5"),o=n("0777");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e,t="float32"){if("complex64"===t){const t=s(e,"float32"),n=s(e,"float32");return Object(o["a"])(t,n)}const n=Object(a["F"])(Object(a["O"])(e),t);return r["a"].makeTensor(n,e,t)}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5dc4":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","sinh"),n={x:t};return r["a"].runKernel(a["yc"],n)}const c=Object(s["a"])({sinh_:i})},"5f2a":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","rsqrt"),n={x:t};return r["a"].runKernel(a["rc"],n)}const c=Object(s["a"])({rsqrt_:i})},"5f87":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=-1){const n=Object(o["a"])(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const s={logits:n},i={dim:t};return r["a"].runKernel(a["Ac"],s,i)}const c=Object(s["a"])({softmax_:i})},6002:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=Object(s["a"])(e,"a","atan2"),i=Object(s["a"])(t,"b","atan2");[n,i]=Object(o["b"])(n,i);const c={a:n,b:i};return r["a"].runKernel(a["m"],c)}const u=Object(i["a"])({atan2_:c})},"605d":function(e,t,n){var r=n("c6b6"),a=n("da84");e.exports="process"==r(a.process)},"60da":function(e,t,n){"use strict";var r=n("83ab"),a=n("d039"),o=n("df75"),s=n("7418"),i=n("d1e7"),c=n("7b0b"),u=n("44ad"),l=Object.assign,d=Object.defineProperty;e.exports=!l||a((function(){if(r&&1!==l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||o(l({},t)).join("")!=a}))?function(e,t){var n=c(e),a=arguments.length,l=1,d=s.f,p=i.f;while(a>l){var f,h=u(arguments[l++]),m=d?o(h).concat(d(h)):o(h),b=m.length,g=0;while(b>g)f=m[g++],r&&!p.call(h,f)||(n[f]=h[f])}return n}:l},6125:function(e,t,n){var r=n("1212"),a=n("b838"),o=n("a49e"),s=n("cae0"),i=n("7aec"),c=n("89ed"),u=n("a49d");u.alea=r,u.xor128=a,u.xorwow=o,u.xorshift7=s,u.xor4096=i,u.tychei=c,e.exports=u},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"649e":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("f0a9"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t=0){Object(s["b"])(e.length>=1,()=>"Pass at least one tensor to concat");const n=Object(o["b"])(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===n.length)return Object(i["a"])(n[0]);const c=n,u={axis:t};return r["a"].runKernel(a["A"],c,u)}const l=Object(c["a"])({concat_:u})},"673d":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},6791:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("48db"),c=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t,n){const u=Object(o["a"])(t,"a","where"),l=Object(o["a"])(n,"b","where"),d=Object(o["a"])(e,"condition","where","bool"),p=Object(c["a"])(u.shape,l.shape),f=Object(i["a"])(u,p),h=Object(i["a"])(l,p);1===d.rank&&Object(s["b"])(d.shape[0]===u.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==d.rank&&Object(s["e"])(d.shape,h.shape,"Error in where: ");const m={condition:d,t:f,e:h};return r["a"].runKernel(a["tc"],m)}const d=Object(u["a"])({where_:l})},6932:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","sin"),n={x:t};return r["a"].runKernel(a["xc"],n)}const c=Object(s["a"])({sin_:i})},"69dc":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("0777"),a=n("649e"),o=n("24b0"),s=n("a5aa"),i=n("54ef"),c=n("d7b0"),u=n("35c9"),l=n("d08e"),d=n("015f"),p=n("6d3c"),f=n("4c7a");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function h(e){const t=e.shape[e.shape.length-1],n=e.size/t;let i;if(t<=2){const r=Object(u["a"])(e,[n,t]);i=Object(f["a"])(r)}else{const h=[n,2*(t-1)],m=Object(u["a"])(Object(c["a"])(e),[n,t]),b=Object(u["a"])(Object(o["a"])(e),[n,t]),g=Object(l["a"])(Object(p["a"])(m,[0,1],[n,t-2]),1),y=Object(s["a"])(Object(l["a"])(Object(p["a"])(b,[0,1],[n,t-2]),1),Object(d["a"])(-1)),x=Object(a["a"])([m,g],1),v=Object(a["a"])([b,y],1),O=Object(u["a"])(Object(r["a"])(x,v),[h[0],h[1]]);i=Object(f["a"])(O)}if(i=Object(c["a"])(i),3===e.rank&&0!==e.shape[0]){const t=i,n=e.shape[0];i=Object(u["a"])(i,[n,i.shape[0]/n,i.shape[1]]),t.dispose()}return i}const m=Object(i["a"])({irfft_:h})},"69f3":function(e,t,n){var r,a,o,s=n("7f9a"),i=n("da84"),c=n("861d"),u=n("9112"),l=n("5135"),d=n("c6cd"),p=n("f772"),f=n("d012"),h=i.WeakMap,m=function(e){return o(e)?a(e):r(e,{})},b=function(e){return function(t){var n;if(!c(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(s){var g=d.state||(d.state=new h),y=g.get,x=g.has,v=g.set;r=function(e,t){return t.facade=e,v.call(g,e,t),t},a=function(e){return y.call(g,e)||{}},o=function(e){return x.call(g,e)}}else{var O=p("state");f[O]=!0,r=function(e,t){return t.facade=e,u(e,O,t),t},a=function(e){return l(e,O)?e[O]:{}},o=function(e){return l(e,O)}}e.exports={set:r,get:a,has:o,enforce:m,getterFor:b}},"6ad5":function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e){let t=e.length,n=0,r=0;while(t>0)r=Math.random()*t|0,t--,n=e[t],e[t]=e[r],e[r]=n}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together First array length was "+e.length+"Second array length was "+t.length);let n,r,a=e.length,o=0;while(a>0)o=Math.random()*a|0,a--,n=e[a],r=t[a],e[a]=e[o],t[a]=t[o],e[o]=n,t[o]=r}function o(e,t,n){return Math.max(e,Math.min(t,n))}function s(e){return e%2===0?e:e+1}function i(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){const n=Math.random();return t*n+(1-n)*e}function u(e,t){let n=0;for(let r=0;r<e.length;r++){const a=Number(e[r])-Number(t[r]);n+=a*a}return n}function l(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function d(e,t,n=""){l(b(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function p(e){l(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function f(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||S(e)&&!n)for(let r=0;r<e.length;++r)f(e[r],t,n);else t.push(e);return t}function h(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function m(e){return 0===e.length}function b(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function g(e){return e%1===0}function y(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function x(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function v(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return r(t),t}function O(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function w(e,t=(e=>0),n){return new Promise((r,a)=>{let o=0;const s=()=>{if(e())return void r();o++;const i=t(o);null!=n&&o>=n?a():setTimeout(s,i)};s()})}function C(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(e[o]<0)throw Error(`Shapes can not be < 0. Found ${e[o]} at dim ${o}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const a=e.slice();return a[r]=t/n,a}function $(e,t){const n=t.length;return e=null==e?t.map((e,t)=>t):[].concat(e),l(e.every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis `+e),l(e.every(e=>g(e)),()=>"All values in axis param must be integers but got axis "+e),e.map(e=>e<0?n+e:e)}function k(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:$(t,e).sort();let s=0;for(let i=0;i<e.length;++i){if(null!=o){if(o[s]===i&&1!==e[i])throw new Error(`Can't squeeze axis ${i} since its dim '${e[i]}' is not 1`);(null==o[s]||o[s]>i)&&1===e[i]&&(n.push(e[i]),r.push(i)),o[s]<=i&&s++}1!==e[i]&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}}function I(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function j(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function E(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function T(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function N(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function S(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function A(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function _(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function R(e){return"string"===typeof e||e instanceof String}function F(e){return"boolean"===typeof e}function D(e){return"number"===typeof e}function L(e){return Array.isArray(e)?L(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":D(e)?"float32":R(e)?"string":F(e)?"bool":"float32"}function P(e){return!!(e&&e.constructor&&e.call&&e.apply)}function M(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function B(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function V(e,t,n){const r=new Array;if(1===t.length){const a=t[0];for(let t=0;t<a;t++)r[t]=n[e+t]}else{const a=t[0],o=t.slice(1),s=o.reduce((e,t)=>e*t);for(let t=0;t<a;t++)r[t]=V(e+t*s,o,n)}return r}function z(e,t){if(0===e.length)return t[0];const n=e.reduce((e,t)=>e*t);if(0===n)return[];if(n!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}.`);return V(0,e,t)}function U(e,t){const n=W(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function W(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function G(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return z(e,new Float32Array(n));if("int32"===t)return z(e,new Int32Array(n));if("bool"===t)return z(e,new Uint8Array(n));throw new Error("Unknown data type "+t)}function H(e){e.forEach(t=>{l(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function K(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function q(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function X(e){return e&&e.then&&"function"===typeof e.then}n.d(t,"M",(function(){return r})),n.d(t,"N",(function(){return a})),n.d(t,"i",(function(){return o})),n.d(t,"H",(function(){return s})),n.d(t,"R",(function(){return i})),n.d(t,"J",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"O",(function(){return h})),n.d(t,"y",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"v",(function(){return g})),n.d(t,"S",(function(){return y})),n.d(t,"P",(function(){return x})),n.d(t,"k",(function(){return v})),n.d(t,"L",(function(){return O})),n.d(t,"K",(function(){return w})),n.d(t,"s",(function(){return C})),n.d(t,"I",(function(){return $})),n.d(t,"Q",(function(){return k})),n.d(t,"o",(function(){return I})),n.d(t,"n",(function(){return j})),n.d(t,"h",(function(){return E})),n.d(t,"B",(function(){return T})),n.d(t,"p",(function(){return N})),n.d(t,"A",(function(){return S})),n.d(t,"g",(function(){return A})),n.d(t,"f",(function(){return _})),n.d(t,"z",(function(){return R})),n.d(t,"t",(function(){return F})),n.d(t,"w",(function(){return D})),n.d(t,"r",(function(){return L})),n.d(t,"u",(function(){return P})),n.d(t,"G",(function(){return M})),n.d(t,"j",(function(){return B})),n.d(t,"T",(function(){return z})),n.d(t,"D",(function(){return U})),n.d(t,"F",(function(){return W})),n.d(t,"E",(function(){return G})),n.d(t,"c",(function(){return H})),n.d(t,"C",(function(){return K})),n.d(t,"q",(function(){return q})),n.d(t,"x",(function(){return X}))},"6ae2":function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return w}));var r=n("8b87"),a=n("b333"),o=n("f490"),s=n("c05b"),i=n("73b8"),c=n("eb7e"),u=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class l{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new p)}profileKernel(e,t,n){let r;const o=()=>{r=n()};let s;const i=c["now"]();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(o);else{o();for(const e of r)e.dataSync();s=Promise.resolve({kernelMs:c["now"]()-i})}if(Object(a["b"])().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let a=0;a<r.length;a++){const t=r[a];t.data().then(n=>{d(n,t.dtype,e)})}const u={kernelName:e,outputs:r,inputs:t,timeMs:s.then(e=>e.kernelMs),extraInfo:s.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")};return u}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:o}=e;n.forEach(e=>{Promise.all([e.data(),r,o]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}function d(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class p{logKernelProfile(e,t,n,r,a,o){const s="number"===typeof r?u["L"](r+"ms",9):r["error"],i=u["L"](e,25),c=t.rank,l=t.size,d=u["L"](t.shape.toString(),14);let p="";for(const u in a){const e=a[u];if(null!=e){const n=e.shape||t.shape,r=n.length;p+=`${u}: ${r}D ${r>0?n:""} `}}console.log(`%c${i}\t%c${s}\t%c${c}D ${d}\t%c${l}\t%c${p}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f(e,t,n){const r={},a={};for(let c=0;c<t.length;c++)r[t[c].id]=!0;for(let c=0;c<e.length;c++){const n=e[c],o=n.inputs;for(const e in o){const s=o[e];let i=!1;for(let e=0;e<t.length;e++)if(r[s.id]){n.outputs.forEach(e=>r[e.id]=!0),i=!0,a[n.id]=!0;break}if(i)break}}const o={};o[n.id]=!0;const s={};for(let c=e.length-1;c>=0;c--){const t=e[c],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,s[t.id]=!0;break}}const i=[];for(let c=0;c<e.length;c++){const t=e[c];if(a[t.id]&&s[t.id]){const e={};for(const a in t.inputs){const n=t.inputs[a];r[n.id]&&(e[a]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,i.push(n)}}return i}function h(e,t,n,r){for(let a=t.length-1;a>=0;a--){const o=t[a],s=[];if(o.outputs.forEach(t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)}),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const i=o.gradient(s);for(const t in o.inputs){if(!(t in i))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(i)}.`);const a=n(()=>i[t]());if("float32"!==a.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);const s=o.inputs[t];if(!u["a"](a.shape,s.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${s.shape}'`);if(null==e[s.id])e[s.id]=a;else{const t=e[s.id];e[s.id]=r(t,a),t.dispose()}}}}var m=n("34d7"),b=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function g(e){return null!=e.kernelName}class y{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class x{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new y}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],r=await this.initializeBackend(n).success;if(r)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e),r=n?await t:t;if(!r)return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new l(this.backendInstance),!0}setupRegisteredKernels(){const e=Object(i["c"])(this.backendName);e.forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){const t=Object(i["c"])(e);t.forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof r["b"]||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${e} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return x.nextTensorId++}nextVariableId(){return x.nextVariableId++}clone(e){const t=w.runKernel(s["nb"],{x:e}),n={x:e},r=e=>({x:()=>{const t="float32",n={x:e},r={dtype:t};return w.runKernel(s["v"],n,r)}}),a=[];return this.addTapeNode(this.state.activeScope.name,n,[t],r,a,{}),t}runKernel(e,t,n){const r=null!=Object(i["b"])(e,this.backendName);if(!r)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-a-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;let s,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=g(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(e)){const{kernelName:t,inputs:a,attrs:o}=e;null==this.backendName&&this.backend;const l=Object(i["b"])(t,this.backendName);u["b"](null!=l,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),s=()=>{const e=this.backend.numDataIds();c=l.kernelFunc({inputs:a,attrs:o,backend:this.backend});const s=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const i=s.map(e=>{if(null!=e.rank)return e;const{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)});if(r){const e=this.getTensorsForGradient(t,a,i);n=this.saveTensorsForBackwardMode(e)}return i}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map(e=>this.keep(this.clone(e))))};s=()=>{const e=this.backend.numDataIds();c=this.tidy(()=>t(this.backend,a));const n=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:d,attrs:p}=e,f=g(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(l,d,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=s()}),r&&this.addTapeNode(l,d,t,f,n,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(e=>null!=d[e]?d[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map(e=>this.keep(this.clone(e)));return t}getTensorsForGradient(e,t,n){const r=Object(i["a"])(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let o;r.saveAllInputs?(u["b"](Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(e=>t[e])):o=e.map(e=>t[e]);const s=n.filter((e,t)=>a[t]);return o.concat(s)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&u["z"](e[0])&&(a=e.map(e=>c["encodeString"](e)));const o=r.write(a,t,n),s=new m["a"](t,n,o,this.nextTensorId());if(this.trackTensor(s,r),"string"===n){const e=this.state.tensorInfo.get(o),t=Object(u["f"])(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,r){n=n||"float32";const a=new m["a"](t,n,e,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new m["c"](e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*u["g"](e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof m["c"]||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*u["g"](e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},c=Object(i["a"])(e);null!=c&&(r=c.gradFunc),null!=r&&(s.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],r=u["F"](e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Object(b["a"])(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){const e=this.state.activeScope.track[a];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n,r=!1){if(u["b"](t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));u["b"](a instanceof m["a"],()=>"The result y returned by f() must be a tensor.");const o=f(this.state.activeTape,t,a);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[a.id]=null==n?v(a.shape):n,h(e,o,e=>this.tidy(e),C);const r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){return u["b"](u["u"](e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let n;u["b"](t.every(e=>e instanceof m["a"]),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};t.forEach((e,t)=>{r[t]=e});const a=(r,a)=>(n=e(...t,a),u["b"](n.value instanceof m["a"],()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),u["b"](u["u"](n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),o=(e,r)=>{const a=n.gradFunc(e,r),o=Array.isArray(a)?a:[a];u["b"](o.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),u["b"](o.every(e=>e instanceof m["a"]),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const s={};return o.forEach((e,t)=>{s[t]=()=>e}),s};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:r})}}readSync(e){const t=this.state.tensorInfo.get(e);return t.backend.readSync(e)}read(e){const t=this.state.tensorInfo.get(e);return t.backend.read(e)}async time(e){const t=Object(c["now"])(),n=await this.backend.time(e);return n.wallMs=Object(c["now"])()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new y;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function v(e){const t=Object(u["D"])(Object(u["O"])(e),"float32");return w.makeTensor(t,e,"float32")}function O(){const e=Object(o["b"])();if(null==e._tfengine){const t=new a["a"](e);e._tfengine=new x(t)}return Object(a["c"])(e._tfengine.ENV),Object(m["f"])(()=>e._tfengine),e._tfengine}x.nextTensorId=0,x.nextVariableId=0;const w=O();function C(e,t){const n={a:e,b:t};return w.runKernel(s["d"],n)}},"6d3c":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t,n){const s=Object(o["a"])(e,"x","slice","string_or_numeric");if(0===s.rank)throw new Error("Slicing scalar is not possible");const i={x:s},c={begin:t,size:n};return r["a"].runKernel(a["zc"],i,c)}const c=Object(s["a"])({slice_:i})},"6e83":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));const r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}]},"6eeb":function(e,t,n){var r=n("da84"),a=n("9112"),o=n("5135"),s=n("ce4e"),i=n("8925"),c=n("69f3"),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,i){var c,u=!!i&&!!i.unsafe,p=!!i&&!!i.enumerable,f=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||a(n,"name",t),c=l(n),c.source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(u?!f&&e[t]&&(p=!0):delete e[t],p?e[t]=n:a(e,t,n)):p?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||i(this)}))},"6f37":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=.2){const n=Object(o["a"])(e,"x","leakyRelu"),s={x:n},i={alpha:t};return r["a"].runKernel(a["ub"],s,i)}const c=Object(s["a"])({leakyRelu_:i})},"71db":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("35c9");function c(e){let t;return t=0===e.rank||1===e.rank?Object(i["a"])(e,[1,1,1,e.size]):2===e.rank?Object(i["a"])(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Object(i["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}var u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l(e,t,n,u,l,d){null==d&&(d=.001);const p=Object(o["a"])(e,"x","batchNorm"),f=Object(o["a"])(t,"mean","batchNorm"),h=Object(o["a"])(n,"variance","batchNorm");let m,b;null!=l&&(m=Object(o["a"])(l,"scale","batchNorm")),null!=u&&(b=Object(o["a"])(u,"offset","batchNorm")),s["b"](f.rank===h.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),s["b"](null==b||f.rank===b.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),s["b"](null==m||f.rank===m.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const g=c(p),y={x:g,scale:m,offset:b,mean:f,variance:h},x={varianceEpsilon:d},v=r["a"].runKernel(a["fb"],y,x);return Object(i["a"])(v,p.shape)}const d=Object(u["a"])({batchNorm_:l})},"73b8":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u}));n("b333");var r=n("f490");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const a=Object(r["a"])("kernelRegistry",()=>new Map),o=Object(r["a"])("gradRegistry",()=>new Map);function s(e,t){const n=l(e,t);return a.get(n)}function i(e){return o.get(e)}function c(e){const t=a.entries(),n=[];while(1){const{done:r,value:a}=t.next();if(r)break;const[o,s]=a,[i]=o.split("_");i===e&&n.push(s)}return n}function u(e){const{kernelName:t,backendName:n}=e,r=l(t,n);a.has(r)&&console.warn(`The kernel '${t}' for backend '${n}' is already registered`),a.set(r,e)}function l(e,t){return`${t}_${e}`}},"73d3":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("6ad5"),s=n("54ef"),i=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n,s,c,u="NHWC",l){o["b"](e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let d=e,p=t,f=!1;3===t.rank&&(f=!0,p=Object(i["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]),d=[1,e[0],e[1],e[2]]),o["b"](4===d.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+d.length+"."),o["b"](4===p.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+p.rank),o["b"](4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);const h="NHWC"===u?d[3]:d[1],m="NHWC"===u?p.shape[3]:p.shape[1];o["b"](h===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),o["b"](m===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${m}) must match output depth for filter ${n.shape[3]}.`),null!=l&&o["b"](o["v"](c),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${l} but got pad ${c}.`);const b={dy:p,filter:n},g={strides:s,pad:c,dataFormat:u,dimRoundingMode:l,inputShape:d},y=r["a"].runKernel(a["D"],b,g);return f?Object(i["a"])(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const u=Object(s["a"])({conv2DBackpropInput_:c})},7418:function(e,t){t.f=Object.getOwnPropertySymbols},7568:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t=!1){console.log(e.toString(t))}n.d(t,"a",(function(){return r}))},7580:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n){const i=Object(o["a"])(e,"x","spaceToBatchND");s["b"](i.rank>=1+t.length,()=>`input rank ${i.rank} should be > than [blockShape] ${t.length}`),s["b"](n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),s["b"](i.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const c={x:i},u={blockShape:t,paddings:n};return r["a"].runKernel(a["Cc"],c,u)}const u=Object(i["a"])({spaceToBatchND_:c})},7675:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("a3f7"),a=n("6ad5"),o=n("dd7e"),s=n("b818"),i=n("54ef"),c=n("35c9");function u(e,t,n,i,u="NWC",l=1,d){const p=Object(r["a"])(e,"x","conv1d"),f=Object(r["a"])(t,"filter","conv1d");let h=p,m=!1;2===p.rank&&(m=!0,h=Object(c["a"])(p,[1,p.shape[0],p.shape[1]])),a["b"](3===h.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${h.rank}.`),a["b"](3===f.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+f.rank+"."),null!=d&&a["b"](a["v"](i),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${i}.`),a["b"](h.shape[2]===f.shape[1],()=>`Error in conv1d: depth of input (${h.shape[2]}) must match input depth for filter ${f.shape[1]}.`),a["b"](s["h"](n,l),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${l}'`),a["b"]("NWC"===u,()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`);const b=Object(c["a"])(f,[1,f.shape[0],f.shape[1],f.shape[2]]),g=Object(c["a"])(h,[h.shape[0],1,h.shape[1],h.shape[2]]),y=[1,n],x=[1,l],v="NHWC",O=Object(o["a"])(g,b,y,i,v,x,d);return m?Object(c["a"])(O,[O.shape[2],O.shape[3]]):Object(c["a"])(O,[O.shape[0],O.shape[2],O.shape[3]])}const l=Object(i["a"])({conv1d_:u})},"76c2":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("34d7"),a=n("23bf");n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t){if(e.dtype===t.dtype)return[e,t];const n=Object(a["b"])(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e){const t=[],n=new Set;return i(e,t,n),t}function i(e,t,n){if(null==e)return;if(e instanceof r["a"])return void t.push(e);if(!c(e))return;const a=e;for(const r in a){const e=a[r];n.has(e)||(n.add(e),i(e,t,n))}}function c(e){return Array.isArray(e)||"object"===typeof e}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7aec":function(e,t,n){(function(e){var r;(function(e,a,o){function s(e){var t=this;function n(e,t){var n,r,a,o,s,i=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),a=0,o=-32;o<c;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,n=i[127&o]^=r+s,a=0==n?a+1:0);for(a>=128&&(i[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=i[a+34&127],n=i[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,i[a]=r^n;e.w=s,e.X=i,e.i=a}t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},n(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=c:n("07d6")&&n("3c35")?(r=function(){return c}.call(t,n,t,a),void 0===r||(a.exports=r)):this.xor4096=c})(0,e,n("07d6"))}).call(this,n("62e4")(e))},"7b0b":function(e,t,n){var r=n("1d80");e.exports=function(e){return Object(r(e))}},"7c73":function(e,t,n){var r,a=n("825a"),o=n("37e8"),s=n("7839"),i=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),d=">",p="<",f="prototype",h="script",m=l("IE_PROTO"),b=function(){},g=function(e){return p+h+d+e+p+"/"+h+d},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},x=function(){var e,t=u("iframe"),n="java"+h+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},v=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}v=r?y(r):x();var e=s.length;while(e--)delete v[f][s[e]];return v()};i[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(b[f]=a(e),n=new b,b[f]=null,n[m]=e):n=v(),void 0===t?n:o(n,t)}},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),a=n("9ed3"),o=n("e163"),s=n("d2bb"),i=n("d44e"),c=n("9112"),u=n("6eeb"),l=n("b622"),d=n("c430"),p=n("3f8c"),f=n("ae93"),h=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,b=l("iterator"),g="keys",y="values",x="entries",v=function(){return this};e.exports=function(e,t,n,l,f,O,w){a(n,t,l);var C,$,k,I=function(e){if(e===f&&S)return S;if(!m&&e in T)return T[e];switch(e){case g:return function(){return new n(this,e)};case y:return function(){return new n(this,e)};case x:return function(){return new n(this,e)}}return function(){return new n(this)}},j=t+" Iterator",E=!1,T=e.prototype,N=T[b]||T["@@iterator"]||f&&T[f],S=!m&&N||I(f),A="Array"==t&&T.entries||N;if(A&&(C=o(A.call(new e)),h!==Object.prototype&&C.next&&(d||o(C)===h||(s?s(C,h):"function"!=typeof C[b]&&c(C,b,v)),i(C,j,!0,!0),d&&(p[j]=v))),f==y&&N&&N.name!==y&&(E=!0,S=function(){return N.call(this)}),d&&!w||T[b]===S||c(T,b,S),p[t]=S,f)if($={values:I(y),keys:O?S:I(g),entries:I(x)},w)for(k in $)(m||E||!(k in T))&&u(T,k,$[k]);else r({target:t,proto:!0,forced:m||E},$);return $}},"7e36":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","atan"),n={x:t};return r["a"].runKernel(a["l"],n)}const c=Object(s["a"])({atan_:i})},"7e6a":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("043e"),a=n("54ef"),o=n("d4e4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e,t=0,n=1,a,s){if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");const i=new o["a"](t,n,a,!0,s),c=Object(r["a"])(e,a);for(let r=0;r<c.values.length;r++)c.values[r]=i.nextValue();return c.toTensor()}const i=Object(a["a"])({truncatedNormal_:s})},"7ed6":function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(){return"undefined"!==typeof navigator&&null!=navigator}function a(){if(r()){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function o(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(t),n.d(t,"isMobile",(function(){return a})),n.d(t,"isBrowser",(function(){return o}))},"7f9a":function(e,t,n){var r=n("da84"),a=n("8925"),o=r.WeakMap;e.exports="function"===typeof o&&/native code/.test(a(o))},"804a":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("538e"),a=n("a3f7"),o=n("deb3"),s=n("4f20"),i=n("1359"),c=n("c021"),u=n("a5aa"),l=n("54ef"),d=n("a009"),p=n("e053");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(e,t=-1){const n=Object(a["a"])(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const l=Object(r["a"])((e,n)=>{const r=!0,a=Object(c["a"])(e,t,!0),l=Object(d["a"])(e,a),f=Object(d["a"])(Object(o["a"])(l,"float32"),Object(i["a"])(Object(p["a"])(Object(s["a"])(l),t,r)));n([f]);const h=(e,n)=>{const[r]=n,a=!0,o=Object(s["a"])(r);return Object(d["a"])(e,Object(u["a"])(Object(p["a"])(e,t,a),o))};return{value:f,gradFunc:h}});return l(n)}const h=Object(l["a"])({logSoftmax_:f})},"825a":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},8389:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t,n){const r=a(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function a(e,t,n){return s(e,t,n||o)}function o(e,t){return e>t?1:e<t?-1:0}function s(e,t,n){let r=0,a=e.length,o=0,s=!1;while(r<a){o=r+(a-r>>>1);const i=n(t,e[o]);i>0?r=o+1:(a=o,s=!i)}return s?r:-r-1}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(e,t,n,r,a){return l(e,t,n,r,a,0)}function c(e,t,n,r,a,o){return l(e,t,n,r,a,0,!1,o,!0)}function u(e,t,n,r,a,o){return l(e,t,n,r,a,o,!0)}function l(e,t,n,a,o,s,i=!1,c=!1,u=!1){const l=[];for(let r=0;r<t.length;r++)t[r]>o&&l.push({score:t[r],boxIndex:r,suppressBeginIndex:0});l.sort(f);const h=s>0?-.5/s:0,m=[],b=[];while(m.length<n&&l.length>0){const t=l.pop(),{score:n,boxIndex:s,suppressBeginIndex:i}=t;if(n<o)break;let c=!1;for(let r=m.length-1;r>=i;--r){const n=d(e,s,m[r]);if(n>=a){c=!0;break}if(t.score=t.score*p(a,h,n),t.score<=o)break}t.suppressBeginIndex=m.length,c||(t.score===n?(m.push(s),b.push(t.score)):t.score>o&&r(l,t,f))}const g=m.length,y=n-g;c&&y>0&&(m.push(...new Array(y).fill(0)),b.push(...new Array(y).fill(0)));const x={selectedIndices:m};return i&&(x["selectedScores"]=b),u&&(x["validOutputs"]=g),x}function d(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(i-o)*(c-s),h=(d-u)*(p-l);if(f<=0||h<=0)return 0;const m=Math.max(o,u),b=Math.max(s,l),g=Math.min(i,d),y=Math.min(c,p),x=Math.max(g-m,0)*Math.max(y-b,0);return x/(f+h-x)}function p(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function f(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}))},"838f":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t,n,i,u="NHWC",l=[1,1],d){const p=Object(o["a"])(e,"x","depthwiseConv2d"),f=Object(o["a"])(t,"filter","depthwiseConv2d");let h=p,m=!1;3===p.rank&&(m=!0,h=Object(c["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2]])),s["b"](4===h.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),s["b"](4===f.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+f.rank+"."),s["b"](h.shape[3]===f.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),null!=d&&s["b"](s["v"](i),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${i}.`);const b={x:h,filter:f},g={strides:n,pad:i,dataFormat:u,dilations:l,dimRoundingMode:d},y=r["a"].runKernel(a["N"],b,g);return m?Object(c["a"])(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const l=Object(i["a"])({depthwiseConv2d_:u})},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"84d6":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("6ae2"),a=n("c05b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t,n=1,o="float32"){if(0===n)throw new Error("Cannot have a step of zero");const s={start:e,stop:t,step:n,dtype:o};return r["a"].runKernel(a["dc"],{},s)}},"853e":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t=0){const n=Object(o["a"])(e,"x","unique","string_or_numeric");Object(s["b"])(n.rank>0,()=>"The input tensor must be at least 1D");const i={x:n},c={axis:t},[u,l]=r["a"].runKernel(a["Rc"],i,c);return{values:u,indices:l}}const u=Object(i["a"])({unique_:c})},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8629:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("043e"),a=n("54ef"),o=n("d4e4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e,t=0,n=1,a="float32",s){const i=Object(r["a"])(e,a),c=new o["b"](t,n,null,s);for(let r=0;r<i.values.length;r++)i.values[r]=c.nextValue();return i.toTensor()}const i=Object(a["a"])({randomUniform_:s})},8888:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","tanh"),n={x:t};return r["a"].runKernel(a["Nc"],n)}const c=Object(s["a"])({tanh_:i})},8925:function(e,t,n){var r=n("c6cd"),a=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return a.call(e)}),e.exports=r.inspectSource},"89ed":function(e,t,n){(function(e){var r;(function(e,a,o){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=c:n("07d6")&&n("3c35")?(r=function(){return c}.call(t,n,t,a),void 0===r||(a.exports=r)):this.tychei=c})(0,e,n("07d6"))}).call(this,n("62e4")(e))},"8ae0":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return r["a"].runKernel(a["z"],e)}{const e={x:t};return r["a"].runKernel(a["a"],e)}}const c=Object(s["a"])({abs_:i})},"8b87":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=1e-7,a=1e-4;class o{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class s{refCount(e){return i("refCount")}incRef(e){return i("incRef")}timerAvailable(){return!0}time(e){return i("time")}read(e){return i("read")}readSync(e){return i("readSync")}numDataIds(){return i("numDataIds")}disposeData(e,t){return i("disposeData")}write(e,t,n){return i("write")}move(e,t,n,r,a){return i("move")}memory(){return i("memory")}floatPrecision(){return i("floatPrecision")}epsilon(){return 32===this.floatPrecision()?r:a}dispose(){return i("dispose")}}function i(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},"8bc9":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t,n,s,i=!1){const c=Object(o["a"])(e,"x","maxPoolWithArgmax"),u={x:c},l={filterSize:t,strides:n,pad:s,includeBatchInIndex:i},d=r["a"].runKernel(a["Ib"],u,l);return{result:d[0],indexes:d[1]}}const c=Object(s["a"])({maxPoolWithArgmax_:i})},"8bfa":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef"),i=n("a34f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n){const s=Object(o["a"])(e,"indices","scatterND","int32"),c=Object(o["a"])(t,"updates","scatterND");i["b"](c,s,n);const u={indices:s,updates:c},l={shape:n};return r["a"].runKernel(a["sc"],u,l)}const u=Object(s["a"])({scatterND_:c})},"8d71":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){const n=Object(o["a"])(e,"x","tile","string_or_numeric");s["b"](n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const i={x:n},c={reps:t};return r["a"].runKernel(a["Oc"],i,c)}const u=Object(i["a"])({tile_:c})},"8e05":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("deb3"),c=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e){let t=Object(o["a"])(e,"x","erf");s["b"]("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=Object(i["a"])(t,"float32"));const n={x:t};return r["a"].runKernel(a["V"],n)}const l=Object(c["a"])({erf_:u})},"90e3":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},9112:function(e,t,n){var r=n("83ab"),a=n("9bf2"),o=n("5c6c");e.exports=r?function(e,t,n){return a.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9117:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=Object(s["a"])(e,"a","add"),i=Object(s["a"])(t,"b","add");[n,i]=Object(o["b"])(n,i);const c={a:n,b:i};return r["a"].runKernel(a["d"],c)}const u=Object(i["a"])({add_:c})},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,a){var o,s,i=8*a-r-1,c=(1<<i)-1,u=c>>1,l=-7,d=n?a-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-l)-1,f>>=-l,l+=i;l>0;o=256*o+e[t+d],d+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=u}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var s,i,c,u=8*o-a-1,l=(1<<u)-1,d=l>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+d>=1?p/c:p*Math.pow(2,1-d),t*c>=2&&(s++,c/=2),s+d>=l?(i=0,s=l):s+d>=1?(i=(t*c-1)*Math.pow(2,a),s+=d):(i=t*Math.pow(2,d-1)*Math.pow(2,a),s=0));a>=8;e[n+f]=255&i,f+=h,i/=256,a-=8);for(s=s<<a|i,u+=a;u>0;e[n+f]=255&s,f+=h,s/=256,u-=8);e[n+f-h]|=128*m}},"917a":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","relu"),n={x:t};return r["a"].runKernel(a["hc"],n)}const c=Object(s["a"])({relu_:i})},"91a3":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t,n=0,s=0){const i=Object(o["a"])(e,"x","gather"),c=Object(o["a"])(t,"indices","gather","int32"),u={x:i,indices:c},l={axis:n,batchDims:s};return r["a"].runKernel(a["jb"],u,l)}const c=Object(s["a"])({gather_:i})},"93b2":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("6ae2"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e){const t=Object(a["a"])(e,"x","square"),n={};return r["a"].runKernel("Square",{x:t},n)}const i=Object(o["a"])({square_:s})},"93db":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n){s["b"]("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const i=Object(o["a"])(e,"x","mirrorPad");if(0===i.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");s["b"](t.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${t.length}.`);const c="reflect"===n?1:0;for(let r=0;r<i.rank;r++)s["b"](2===t[r].length,()=>"Invalid number of paddings. Must be length of 2 each."),s["b"](t[r][0]>=0&&t[r][0]<=i.shape[r]-c&&t[r][1]>=0&&t[r][1]<=i.shape[r]-c,()=>`Padding in dimension ${r} cannot be greater than or equal to ${i.shape[r]-c} or less than 0 for input of shape `+i.shape);const u={paddings:t,mode:n},l={x:i};return r["a"].runKernel(a["Nb"],l,u)}const u=Object(i["a"])({mirrorPad_:c})},9489:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},"94ca":function(e,t,n){var r=n("d039"),a=/#|\.prototype\./,o=function(e,t){var n=i[s(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},i=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},"960f":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("a3f7"),a=n("6ad5"),o=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(e,t){Object(a["d"])(e);const n=Object(r["c"])(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");const s=null;return Object(o["a"])(e,s,n,t)}},9748:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("deb3"),c=n("b818"),u=n("54ef"),l=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(e,t,n,u,d){const p=Object(o["a"])(e,"x","avgPool","float32"),f=1;s["b"](c["h"](n,f),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${f}'`);let h=p,m=!1;3===p.rank&&(m=!0,h=Object(l["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2]])),s["b"](4===h.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${h.rank}.`),null!=d&&s["b"](s["v"](u),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${d} but got pad ${u}.`);const b={x:h},g={filterSize:t,strides:n,pad:u,dimRoundingMode:d};let y=r["a"].runKernel(a["o"],b,g);return y=Object(i["a"])(y,p.dtype),m?Object(l["a"])(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const p=Object(u["a"])({avgPool_:d})},9847:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},"9bf2":function(e,t,n){var r=n("83ab"),a=n("0cfb"),o=n("825a"),s=n("c04ea"),i=Object.defineProperty;t.f=r?i:function(e,t,n){if(o(e),t=s(t,!0),o(n),a)try{return i(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9e38":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","elu"),n={x:t};return r["a"].runKernel(a["S"],n)}const c=Object(s["a"])({elu_:i})},"9e7b":function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,a=n("7c73"),o=n("5c6c"),s=n("d44e"),i=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=a(r,{next:o(1,n)}),s(e,u,!1,!0),i[u]=c,e}},"9fe6":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("b818"),c=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t,n,c,l){const d=Object(o["a"])(e,"x","maxPool"),p=1;let f=d,h=!1;3===d.rank&&(h=!0,f=Object(u["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2]])),s["b"](4===f.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${f.rank}.`),s["b"](i["h"](n,p),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${p}'`),null!=l&&s["b"](s["v"](c),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${l} but got pad ${c}.`);const m={x:f},b={filterSize:t,strides:n,pad:c,dimRoundingMode:l},g=r["a"].runKernel(a["Eb"],m,b);return h?Object(u["a"])(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const d=Object(c["a"])({maxPool_:l})},"9ffd":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","softplus"),n={x:t};return r["a"].runKernel(a["Bc"],n)}const c=Object(s["a"])({softplus_:i})},a009:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=Object(s["a"])(e,"a","sub"),i=Object(s["a"])(t,"b","sub");[n,i]=Object(o["b"])(n,i);const c={a:n,b:i};return r["a"].runKernel(a["Kc"],c)}const u=Object(i["a"])({sub_:c})},a09b:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","zerosLike"),n={x:t};return r["a"].runKernel(a["Uc"],n)}const c=Object(s["a"])({zerosLike_:i})},a34f:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("6ad5");function a(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+`, indices.shape: ${t.shape}, shape: ${e}`+`, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(o+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(let s=0;s<a;++s)if(n.shape[s]!==t.shape[s])throw new Error(o+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+` updates.shape[${s+a}] (${n.shape[s+a]}) != shape[${s+a}] (${e[s+a]})`)}function o(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}a(n,t,e)}function s(e,t,n){const a=t.shape.length,o=a>1?t.shape[a-1]:1,s=n.length;let i=1;for(let r=o;r<s;++r)i*=n[r];const c=o<1?1:o,u=Object(r["O"])(t.shape)/c,l=[...Object(r["j"])(n.slice(0,o)),1],d=Object(r["O"])(n);return{sliceRank:o,numUpdates:u,sliceSize:i,strides:l,outputSize:d}}},a374:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","acos"),n={x:t};return r["a"].runKernel(a["b"],n)}const c=Object(s["a"])({acos_:i})},a3f7:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n("6ae2"),a=n("b333"),o=n("34d7"),s=n("6ad5"),i=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=e;if(Object(s["A"])(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];while(Array.isArray(n)||Object(s["A"])(n)&&"string"!==t)r.push(n.length),n=n[0];return Array.isArray(e)&&Object(a["b"])().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&u(e,r,[]),r}function u(e,t,n){if(n=n||[],!Array.isArray(e)&&!Object(s["A"])(e))return void Object(s["b"])(0===t.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);Object(s["b"])(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),Object(s["b"])(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const r=t.slice(1);for(let a=0;a<e.length;++a)u(e[a],r,n.concat(a))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function d(e,t,n,a="numeric"){if(e instanceof o["a"])return l(a,e.dtype,t,n),e;let u=Object(s["r"])(e);if("string"!==u&&["bool","int32","float32"].indexOf(a)>=0&&(u=a),l(a,u,t,n),null==e||!Object(s["A"])(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const d=c(e,u);Object(s["A"])(e)||Array.isArray(e)||(e=[e]);const p=!0,f="string"!==u?Object(i["toTypedArray"])(e,u):Object(s["m"])(e,[],p);return r["a"].makeTensor(f,d,u)}function p(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);const a=e;return a.map((e,a)=>d(e,`${t}[${a}]`,n,r))}},a492:function(e,t,n){"use strict";n.d(t,"a",(function(){return pr})),n.d(t,"b",(function(){return hr}));var r=n("fa11"),a=n("f8bb"),o=n("526c");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class s{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return Object(o["e"])(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return Object(o["e"])(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(a["f"])(this.node.rawAttrs,e,t);if(null!=n.s)return Object(a["i"])(this.node.rawAttrs,e,t);if(null!=n.b)return Object(a["c"])(this.node.rawAttrs,e,t);if(null!=n.shape)return Object(a["k"])(this.node.rawAttrs,e,t);if(null!=n.type)return Object(a["e"])(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(a["g"])(this.node.rawAttrs,e,t);if(null!=n.list.s)return Object(a["h"])(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Object(a["j"])(this.node.rawAttrs,e,t);if(null!=n.list.b)return Object(a["b"])(this.node.rawAttrs,e,t);if(null!=n.list.type)return Object(a["d"])(this.node.rawAttrs,e,t)}return t}}var i=n("d303"),c=n("9117"),u=n("4850"),l=n("4611"),d=n("a5aa"),p=n("c77c"),f=n("011b"),h=n("508f"),m=n("a009"),b=n("f0e5"),g=n("09f4"),y=n("c9f1"),x=n("4184");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const v=(e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[c["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"AddN":return[u["a"](Object(o["d"])("tensors",e,t,n))];case"FloorMod":case"Mod":return[l["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Mul":return[d["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"RealDiv":case"Div":return[p["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"DivNoNan":return[f["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"FloorDiv":return[h["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Sub":return[m["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Minimum":return[b["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Maximum":return[g["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Pow":return[y["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"SquaredDifference":return[x["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var O=n("8ae0"),w=n("a374"),C=n("4615"),$=n("220f"),k=n("dc59"),I=n("7e36"),j=n("6002"),E=n("d1a8"),T=n("5960"),N=n("0777"),S=n("eff7"),A=n("c1a2"),_=n("9e38"),R=n("8e05"),F=n("4f20"),D=n("1ba2"),L=n("d369"),P=n("1359"),M=n("46b1"),B=n("24b0"),V=n("3bb7"),z=n("b500"),U=n("d7b0"),W=n("917a"),G=n("08a9"),H=n("b39e"),K=n("ffb3"),q=n("6932"),X=n("1df6"),Y=n("5dc4"),Q=n("9ffd"),J=n("163a"),Z=n("93b2"),ee=n("8888"),te=n("d30a"),ne=n("c08f"),re=n("46a8"),ae=n("5f2a"),oe=n("f3ae"),se=n("6f37"),ie=n("520f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ce=(e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[O["a"](Object(o["d"])("x",e,t,n))];case"Acos":return[w["a"](Object(o["d"])("x",e,t,n))];case"Acosh":return[C["a"](Object(o["d"])("x",e,t,n))];case"Asin":return[$["a"](Object(o["d"])("x",e,t,n))];case"Asinh":return[k["a"](Object(o["d"])("x",e,t,n))];case"Atan":return[I["a"](Object(o["d"])("x",e,t,n))];case"Atan2":return[j["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("y",e,t,n))];case"Atanh":return[E["a"](Object(o["d"])("x",e,t,n))];case"Ceil":return[T["a"](Object(o["d"])("x",e,t,n))];case"Complex":return[N["a"](Object(o["d"])("real",e,t,n),Object(o["d"])("imag",e,t,n))];case"Cos":return[S["a"](Object(o["d"])("x",e,t,n))];case"Cosh":return[A["a"](Object(o["d"])("x",e,t,n))];case"Elu":return[_["a"](Object(o["d"])("x",e,t,n))];case"Erf":return[R["a"](Object(o["d"])("x",e,t,n))];case"Exp":return[F["a"](Object(o["d"])("x",e,t,n))];case"Expm1":return[D["a"](Object(o["d"])("x",e,t,n))];case"Floor":return[L["a"](Object(o["d"])("x",e,t,n))];case"Log":return[P["a"](Object(o["d"])("x",e,t,n))];case"Log1p":return[M["a"](Object(o["d"])("x",e,t,n))];case"Imag":return[B["a"](Object(o["d"])("x",e,t,n))];case"Neg":return[V["a"](Object(o["d"])("x",e,t,n))];case"Reciprocal":return[z["a"](Object(o["d"])("x",e,t,n))];case"Real":return[U["a"](Object(o["d"])("x",e,t,n))];case"Relu":return[W["a"](Object(o["d"])("x",e,t,n))];case"Round":return[G["a"](Object(o["d"])("x",e,t,n))];case"Selu":return[H["a"](Object(o["d"])("x",e,t,n))];case"Sigmoid":return[K["a"](Object(o["d"])("x",e,t,n))];case"Sin":return[q["a"](Object(o["d"])("x",e,t,n))];case"Sign":return[X["a"](Object(o["d"])("x",e,t,n))];case"Sinh":return[Y["a"](Object(o["d"])("x",e,t,n))];case"Softplus":return[Q["a"](Object(o["d"])("x",e,t,n))];case"Sqrt":return[J["a"](Object(o["d"])("x",e,t,n))];case"Square":return[Z["a"](Object(o["d"])("x",e,t,n))];case"Tanh":return[ee["a"](Object(o["d"])("x",e,t,n))];case"Tan":return[te["a"](Object(o["d"])("x",e,t,n))];case"ClipByValue":return[ne["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("clipValueMin",e,t,n),Object(o["d"])("clipValueMax",e,t,n))];case"Relu6":return[re["a"](Object(o["d"])("x",e,t,n))];case"Rsqrt":return[ae["a"](Object(o["e"])(e.inputNames[0],t,n))];case"Prod":return[oe["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("axes",e,t,n))];case"LeakyRelu":return[se["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("alpha",e,t,n))];case"Prelu":return[ie["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("alpha",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ue(e,t,n=""){if("number"!==typeof e&&"number"!==typeof t){r["Ld"].assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let a=0;a<e.length;a++){const o=e[a],s=t[a];r["Ld"].assert(o<0||s<0||o===s,()=>n+` Shapes ${e} and ${t} must match`)}}}function le(e){return"number"!==typeof e&&!e.some(e=>e<0)}function de(e,t,n){let r=pe(e,n);const a=!le(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: "+r);if(a&&t.forEach(e=>{r=pe(e.shape,r)}),!le(r))throw new Error("Non-fully-defined elementShape: "+r);return r}function pe(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const a=e[r],o=t[r];if(a>=0&&o>=0&&a!==o)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:o}return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fe{constructor(e,t,n,a,o,s,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=s,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=Object(r["wd"])(0),Object(r["qd"])(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),ue(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Object(r["qd"])(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Object(r["Fd"])([],[0].concat(this.elementShape));const n=this.readMany(e);return ue(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Object(r["Cd"])(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Object(r["Fd"])([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return ue(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Object(r["gd"])(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,Object(r["Jd"])(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const a=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const o=0===n?0:t.size/n,s=[];Object(r["Id"])(()=>{t=Object(r["vd"])(t,[1,n,o]);for(let n=0;n<e.length;++n){const i=0===n?0:a[n-1],c=[0,i,0],u=[1,e[n],o];s[n]=Object(r["vd"])(Object(r["zd"])(t,c,u),this.elementShape)}return s});const i=[];for(let r=0;r<e.length;r++)i[r]=r;this.writeMany(i,s)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class he{constructor(e,t,n,a=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);ue(t,e.shape,"TensorList shape mismatch: "),Object(r["qd"])(e)}),this.idTensor=Object(r["wd"])(0),this.maxNumElements=a,Object(r["qd"])(this.idTensor)}get id(){return this.idTensor.id}copy(){return new he([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);ue(e,this.elementShape,"TensorList shape mismatch: ");const a=de(this.elementShape,this.tensors,e);return Object(r["Id"])(()=>{const e=this.tensors.map(e=>Object(r["vd"])(e,a));return Object(r["Cd"])(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=de(this.elementShape,this.tensors,e),a=this.tensors.pop();return ue(a.shape,e,"TensorList shape mismatch: "),Object(r["vd"])(a,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ue(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(r["qd"])(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+e);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);ue(this.tensors[e].shape,t,"TensorList shape mismatch: ");const a=de(this.elementShape,this.tensors,t);return Object(r["vd"])(this.tensors[e],a)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ue(this.elementShape,t.shape,"TensorList shape mismatch: "),Object(r["qd"])(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);ue(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=de(this.elementShape,this.tensors,n);return 0===e.length?Object(r["Fd"])([],[0].concat(a)):Object(r["Id"])(()=>{const t=e.map(e=>Object(r["vd"])(this.tensors[e],a));return Object(r["Cd"])(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ue(this.elementShape,t,"TensorList shape mismatch: ");const n=de(this.elementShape,this.tensors,t);return 0===this.size()?Object(r["Fd"])([],[0].concat(n)):Object(r["Id"])(()=>{const e=this.tensors.map(e=>Object(r["vd"])(e,n));return Object(r["gd"])(e,0)})}}function me(e,t,n){const a=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+e.shape);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);const o=e.shape.slice(1);ue(o,t,"TensorList shape mismatch: ");const s=Object(r["Jd"])(e);return new he(s,t,a)}function be(e,t,n){return new he([],e,t,n)}function ge(e,t,n,a){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const o=Math.max(...t);if(null!=a&&-1!==a&&o>=a)throw new Error(`Max index must be < array size (${o}  vs. ${a})`);const s=new he([],n,e.dtype,a),i=Object(r["Jd"])(e,0);return t.forEach((e,t)=>{s.setItem(e,i[t])}),s}function ye(e,t,n){let a=0;const o=t.map(e=>(a+=e,a));if(a!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${a}, and tensor's shape is: ${e.shape}`);const s=e.shape.slice(1),i=pe(s,n),c=0===a?0:e.size/a,u=Object(r["Id"])(()=>{const n=[];e=Object(r["vd"])(e,[1,a,c]);for(let a=0;a<t.length;++a){const s=0===a?0:o[a-1],u=[0,s,0],l=[1,t[a],c];n[a]=Object(r["vd"])(Object(r["zd"])(e,u,l),i)}return e.dispose(),n}),l=new he([],n,e.dtype,t.length);for(let r=0;r<u.length;r++)l.setItem(r,u[r]);return l}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xe=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=Object(o["d"])("thenBranch",e,t,n),a=Object(o["d"])("elseBranch",e,t,n),s=Object(o["d"])("cond",e,t,n),i=Object(o["d"])("args",e,t,n),c=await s.data();return c[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Object(o["d"])("body",e,t,n),a=Object(o["d"])("cond",e,t,n),s=Object(o["d"])("args",e,t,n),i=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),c=s.map(e=>e.id);let u=await i[0].data();i.forEach(e=>{e.kept||-1!==c.indexOf(e.id)||e.dispose()});let l=s;while(u[0]){const e=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const t=l.map(e=>e.id);e.forEach(e=>{e.kept||-1!==c.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});const o=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await o[0].data(),o.forEach(e=>{e.kept||-1!==c.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":{const r=Object(o["d"])("pred",e,t,n);return[Object(o["a"])(r)]}case"Switch":{const r=Object(o["d"])("pred",e,t,n);let a=Object(o["d"])("data",e,t,n);return a.kept||(a=Object(o["a"])(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=e.inputNames.find(e=>void 0!==Object(o["e"])(e,t,n));if(r){const e=Object(o["e"])(r,t,n);return[Object(o["a"])(e)]}return}case"Enter":{const r=Object(o["d"])("frameName",e,t,n),a=Object(o["d"])("tensor",e,t,n);return n.enterFrame(r),[Object(o["a"])(a)]}case"Exit":{const r=Object(o["d"])("tensor",e,t,n);return n.exitFrame(),[Object(o["a"])(r)]}case"NextIteration":{const r=Object(o["d"])("tensor",e,t,n);return n.nextIteration(),[Object(o["a"])(r)]}case"TensorArrayV3":{const a=Object(o["d"])("size",e,t,n),s=Object(o["d"])("dtype",e,t,n),i=Object(o["d"])("elementShape",e,t,n),c=Object(o["d"])("dynamicSize",e,t,n),u=Object(o["d"])("clearAfterRead",e,t,n),l=Object(o["d"])("identicalElementShapes",e,t,n),d=Object(o["d"])("name",e,t,n),p=new fe(d,s,a,i,l,c,u);return n.addTensorArray(p),[p.idTensor,Object(r["wd"])(1)]}case"TensorArrayWriteV3":{const r=Object(o["d"])("tensorArrayId",e,t,n),a=Object(o["d"])("index",e,t,n),s=Object(o["d"])("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(a,s),[i.idTensor]}case"TensorArrayReadV3":{const r=Object(o["d"])("tensorArrayId",e,t,n),a=Object(o["d"])("index",e,t,n),s=n.getTensorArray(r.id);return[s.read(a)]}case"TensorArrayGatherV3":{const r=Object(o["d"])("tensorArrayId",e,t,n),a=Object(o["d"])("indices",e,t,n),s=Object(o["d"])("dtype",e,t,n),i=n.getTensorArray(r.id);return[i.gather(a,s)]}case"TensorArrayScatterV3":{const r=Object(o["d"])("tensorArrayId",e,t,n),a=Object(o["d"])("indices",e,t,n),s=Object(o["d"])("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(a,s),[i.idTensor]}case"TensorArrayConcatV3":{const r=Object(o["d"])("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),s=Object(o["d"])("dtype",e,t,n);return[a.concat(s)]}case"TensorArraySplitV3":{const r=Object(o["d"])("tensorArrayId",e,t,n),a=Object(o["d"])("tensor",e,t,n),s=Object(o["d"])("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(s,a),[i.idTensor]}case"TensorArraySizeV3":{const a=Object(o["d"])("tensorArrayId",e,t,n),s=n.getTensorArray(a.id);return[Object(r["wd"])(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=Object(o["d"])("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=Object(o["d"])("tensorListId",e,t,n),a=Object(o["d"])("index",e,t,n),s=Object(o["d"])("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(a,s),[i.idTensor]}case"TensorListGetItem":{const r=Object(o["d"])("tensorListId",e,t,n),a=Object(o["d"])("index",e,t,n),s=Object(o["d"])("elementShape",e,t,n),i=Object(o["d"])("elementDType",e,t,n),c=n.getTensorList(r.id);return[c.getItem(a,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Object(o["d"])("indices",e,t,n),a=Object(o["d"])("tensor",e,t,n),s=Object(o["d"])("elementShape",e,t,n),i=Object(o["d"])("numElements",e,t,n),c=ge(a,r,s,i);return n.addTensorList(c),[c.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=Object(o["d"])("elementShape",e,t,n),a=Object(o["d"])("elementDType",e,t,n);let s;s="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=Object(o["d"])(s,e,t,n),c=be(r,a,i);return n.addTensorList(c),[c.idTensor]}case"TensorListGather":{const r=Object(o["d"])("tensorListId",e,t,n),a=Object(o["d"])("indices",e,t,n),s=Object(o["d"])("elementShape",e,t,n),i=Object(o["d"])("elementDType",e,t,n),c=n.getTensorList(r.id);return[c.gather(a,i,s)]}case"TensorListStack":{const r=Object(o["d"])("tensorListId",e,t,n),a=Object(o["d"])("elementShape",e,t,n),s=Object(o["d"])("elementDType",e,t,n),i=Object(o["d"])("numElements",e,t,n),c=n.getTensorList(r.id);return[c.stack(a,s,i)]}case"TensorListFromTensor":{const r=Object(o["d"])("tensor",e,t,n),a=Object(o["d"])("elementShape",e,t,n),s=Object(o["d"])("elementDType",e,t,n),i=me(r,a,s);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":{const r=Object(o["d"])("tensorListId",e,t,n),a=n.getTensorList(r.id),s=Object(o["d"])("dtype",e,t,n),i=Object(o["d"])("elementShape",e,t,n);return[a.concat(s,i)]}case"TensorListPushBack":{const r=Object(o["d"])("tensorListId",e,t,n),a=Object(o["d"])("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{const r=Object(o["d"])("tensorListId",e,t,n),a=Object(o["d"])("elementShape",e,t,n),s=Object(o["d"])("elementDType",e,t,n),i=n.getTensorList(r.id);return[i.popBack(a,s)]}case"TensorListSplit":{const r=Object(o["d"])("tensor",e,t,n),a=Object(o["d"])("elementShape",e,t,n),s=Object(o["d"])("lengths",e,t,n),i=ye(r,s,a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var ve=n("7675"),Oe=n("dd7e"),we=n("132b"),Ce=n("cd1f"),$e=n("838f"),ke=n("1590"),Ie=n("9748"),je=n("9fe6"),Ee=n("8bc9"),Te=n("ba53"),Ne=n("53fd"),Se=n("c170");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ae(e,t,n){const[r,a]=Object(o["d"])("fusedOps",e,t,n),s="biasadd"===r,i="prelu"===a,c="fusedbatchnorm"===r,u=Object(o["d"])("numArgs",e,t,n);if(s){if(i&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const l=Object(o["d"])("strides",e,t,n),d=Object(o["c"])(e,t,n),p=Object(o["d"])("dataFormat",e,t,n).toUpperCase(),f=Object(o["d"])("dilations",e,t,n),[h,m]=Object(o["d"])("args",e,t,n),b=Object(o["d"])("leakyreluAlpha",e,t,n);return{stride:l,pad:d,dataFormat:p,dilations:f,biasArg:h,preluArg:m,activationFunc:a,leakyreluAlpha:b}}const _e=(e,t,n)=>{switch(e.op){case"Conv1D":{const r=Object(o["d"])("stride",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("dataFormat",e,t,n).toUpperCase(),i=Object(o["d"])("dilation",e,t,n);return[ve["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("filter",e,t,n),r,a,s,i)]}case"Conv2D":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["c"])(e,t,n),s=Object(o["d"])("dataFormat",e,t,n).toUpperCase(),i=Object(o["d"])("dilations",e,t,n);return[Oe["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("filter",e,t,n),[r[1],r[2]],a,s,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:r,pad:a,dataFormat:s,dilations:i,biasArg:c,preluArg:u,activationFunc:l,leakyreluAlpha:d}=Ae(e,t,n);return[we["i"].conv2d({x:Object(o["d"])("x",e,t,n),filter:Object(o["d"])("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[i[1],i[2]],bias:c,activation:l,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:a,dataFormat:s,dilations:i,biasArg:c,preluArg:u,activationFunc:l,leakyreluAlpha:d}=Ae(e,t,n);return[we["i"].depthwiseConv2d({x:Object(o["d"])("x",e,t,n),filter:Object(o["d"])("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[i[1],i[2]],bias:c,activation:l,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=Object(o["d"])("outputShape",e,t,n),a=Object(o["d"])("strides",e,t,n),s=Object(o["c"])(e,t,n);return[Ce["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("filter",e,t,n),r,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["c"])(e,t,n),s=Object(o["d"])("dilations",e,t,n),i=Object(o["d"])("dataFormat",e,t,n).toUpperCase();return[$e["a"](Object(o["d"])("input",e,t,n),Object(o["d"])("filter",e,t,n),[r[1],r[2]],a,i,[s[1],s[2]])]}case"Conv3D":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("dataFormat",e,t,n).toUpperCase(),i=Object(o["d"])("dilations",e,t,n);return[ke["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("filter",e,t,n),[r[1],r[2],r[3]],a,s,[i[1],i[2],i[3]])]}case"AvgPool":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("kernelSize",e,t,n);return[Ie["a"](Object(o["d"])("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPool":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("kernelSize",e,t,n);return[je["a"](Object(o["d"])("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPoolWithArgmax":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("kernelSize",e,t,n),i=Object(o["d"])("includeBatchInIndex",e,t,n),{result:c,indexes:u}=Ee["a"](Object(o["d"])("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a,i);return[c,u]}case"AvgPool3D":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("kernelSize",e,t,n);return[Te["a"](Object(o["d"])("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"MaxPool3D":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("kernelSize",e,t,n);return[Ne["a"](Object(o["d"])("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"Dilation2D":{const r=Object(o["d"])("strides",e,t,n),a=Object(o["d"])("pad",e,t,n),s=Object(o["d"])("dilations",e,t,n),i=r[1],c=r[2],u=s[1],l=s[2];return[Se["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("filter",e,t,n),[i,c],a,[u,l],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Re=n("46b8"),Fe=n("5894"),De=n("3efc"),Le=n("e22c"),Pe=n("c22a"),Me=n("0db5"),Be=n("8629"),Ve=n("84d6"),ze=n("7e6a"),Ue=n("5a2c"),We=n("a09b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ge=(e,t,n)=>{switch(e.op){case"Fill":{const r=Object(o["d"])("shape",e,t,n),a=Object(o["d"])("dtype",e,t,n),s=Object(o["d"])("value",e,t,n);return[Re["a"](r,s,a)]}case"LinSpace":{const r=Object(o["d"])("start",e,t,n),a=Object(o["d"])("stop",e,t,n),s=Object(o["d"])("num",e,t,n);return[Fe["a"](r,a,s)]}case"Multinomial":{const r=Object(o["d"])("logits",e,t,n),a=Object(o["d"])("numSamples",e,t,n),s=Object(o["d"])("seed",e,t,n);return[De["a"](r,a,s)]}case"OneHot":{const r=Object(o["d"])("indices",e,t,n),a=Object(o["d"])("depth",e,t,n),s=Object(o["d"])("onValue",e,t,n),i=Object(o["d"])("offValue",e,t,n);return[Le["a"](r,a,s,i)]}case"Ones":return[Pe["a"](Object(o["d"])("shape",e,t,n),Object(o["d"])("dtype",e,t,n))];case"OnesLike":return[Me["a"](Object(o["d"])("x",e,t,n))];case"RandomUniform":return[Be["a"](Object(o["d"])("shape",e,t,n),Object(o["d"])("minval",e,t,n),Object(o["d"])("maxval",e,t,n),Object(o["d"])("dtype",e,t,n))];case"Range":{const r=Object(o["d"])("start",e,t,n),a=Object(o["d"])("stop",e,t,n),s=Object(o["d"])("step",e,t,n);return[Ve["a"](r,a,s,Object(o["d"])("dtype",e,t,n))]}case"TruncatedNormal":{const r=Object(o["d"])("shape",e,t,n),a=Object(o["d"])("mean",e,t,n),s=Object(o["d"])("stdDev",e,t,n),i=Object(o["d"])("seed",e,t,n);return[ze["a"](r,a,s,Object(o["d"])("dtype",e,t,n),i)]}case"Zeros":return[Ue["a"](Object(o["d"])("shape",e,t,n),Object(o["d"])("dtype",e,t,n))];case"ZerosLike":return[We["a"](Object(o["d"])("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var He=n("deb3"),Ke=n("a780"),qe=n("f74c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Xe(e,t,n){const r=Object(o["d"])("boxes",e,t,n),a=Object(o["d"])("scores",e,t,n),s=Object(o["d"])("maxOutputSize",e,t,n),i=Object(o["d"])("iouThreshold",e,t,n),c=Object(o["d"])("scoreThreshold",e,t,n),u=Object(o["d"])("softNmsSigma",e,t,n);return{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:c,softNmsSigma:u}}const Ye=async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:o,iouThreshold:s,scoreThreshold:i,softNmsSigma:c}=Xe(e,t,n),u=await we["j"].nonMaxSuppressionWithScoreAsync(r,a,o,s,i,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:i,scoreThreshold:c}=Xe(e,t,n),u=Object(o["d"])("padToMaxOutputSize",e,t,n),l=await we["j"].nonMaxSuppressionPaddedAsync(r,a,s,i,c,u);return[l.selectedIndices,l.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:o,iouThreshold:s,scoreThreshold:i}=Xe(e,t,n);return[await we["j"].nonMaxSuppressionAsync(r,a,o,s,i)]}case"Where":{const r=He["a"](Object(o["d"])("condition",e,t,n),"bool"),a=[await Ke["a"](r)];return r.dispose(),a}case"ListDiff":return qe["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Qe=n("5616"),Je=n("853e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ze=(e,t,n)=>{switch(e.op){case"TopKV2":{const r=Object(o["d"])("x",e,t,n),a=Object(o["d"])("k",e,t,n),s=Object(o["d"])("sorted",e,t,n),i=Qe["a"](r,a,s);return[i.values,i.indices]}case"Unique":{const r=Object(o["d"])("x",e,t,n),a=Je["a"](r);return[a.values,a.indices]}case"UniqueV2":{const r=Object(o["d"])("x",e,t,n),a=Object(o["d"])("axis",e,t,n),s=Je["a"](r,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var et=n("960f"),tt=n("015f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const nt=(e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=Object(o["d"])("default",e,t,n);return[Object(o["e"])(e.name,t,n)||r];case"Placeholder":return[Object(o["e"])(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const r=Object(o["d"])("x",e,t,n);return[Object(o["a"])(r)]}case"IdentityN":return Object(o["d"])("x",e,t,n).map(e=>Object(o["a"])(e));case"Snapshot":const a=Object(o["d"])("x",e,t,n);return[Object(o["a"])(a)];case"Shape":return[et["a"](Object(o["d"])("x",e,t,n).shape,"int32")];case"ShapeN":return Object(o["d"])("x",e,t,n).map(e=>et["a"](e.shape));case"Size":return[tt["a"](Object(o["d"])("x",e,t,n).size,"int32")];case"Rank":return[tt["a"](Object(o["d"])("x",e,t,n).rank,"int32")];case"NoOp":return[tt["a"](1)];case"Print":const s=Object(o["d"])("x",e,t,n),i=Object(o["d"])("data",e,t,n),c=Object(o["d"])("message",e,t,n),u=Object(o["d"])("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,u));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class rt{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Object(r["wd"])(0),this.tensorMap=new Map,Object(r["qd"])(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),Object(r["Id"])(()=>{const e=Object(r["Jd"])(t),a=n.length,o=e.length;r["Ld"].assert(a===o,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${o} elements.`);for(let t=0;t<a;t++){const a=n[t],o=e[t];Object(r["qd"])(o),this.tensorMap.set(a,o)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Object(r["Id"])(()=>{const e=[];for(let r=0;r<n.length;r++){const a=n[r],o=this.findWithDefault(a,t);e.push(o)}return Object(r["Cd"])(e)})}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+e.dtype);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+t.dtype)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const at=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const a=Object(o["d"])("keyDType",e,t,n),s=Object(o["d"])("valueDType",e,t,n),i=new rt(a,s);return r.addHashTable(e.name,i),[i.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=Object(o["d"])("tableHandle",e,t,n,r),s=Object(o["d"])("keys",e,t,n),i=Object(o["d"])("values",e,t,n),c=r.getHashTableById(a.id);return[await c.import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{const a=Object(o["d"])("tableHandle",e,t,n,r),s=Object(o["d"])("keys",e,t,n),i=Object(o["d"])("defaultValue",e,t,n),c=r.getHashTableById(a.id);return[await c.find(s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},ot=(e,t,n)=>{switch(e.op){case"ResizeBilinear":{const r=Object(o["d"])("images",e,t,n),a=Object(o["d"])("size",e,t,n),s=Object(o["d"])("alignCorners",e,t,n),i=Object(o["d"])("halfPixelCenters",e,t,n);return[we["j"].resizeBilinear(r,[a[0],a[1]],s,i)]}case"ResizeNearestNeighbor":{const r=Object(o["d"])("images",e,t,n),a=Object(o["d"])("size",e,t,n),s=Object(o["d"])("alignCorners",e,t,n),i=Object(o["d"])("halfPixelCenters",e,t,n);return[we["j"].resizeNearestNeighbor(r,[a[0],a[1]],s,i)]}case"CropAndResize":{const r=Object(o["d"])("image",e,t,n),a=Object(o["d"])("boxes",e,t,n),s=Object(o["d"])("boxInd",e,t,n),i=Object(o["d"])("cropSize",e,t,n),c=Object(o["d"])("method",e,t,n),u=Object(o["d"])("extrapolationValue",e,t,n);return[we["j"].cropAndResize(r,a,s,i,c,u)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var st=n("b9b9"),it=n("d4de"),ct=n("cef0"),ut=n("bb2d"),lt=n("e1fd"),dt=n("b21c"),pt=n("e333"),ft=n("ef00"),ht=n("f183"),mt=n("6791");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const bt=(e,t,n)=>{switch(e.op){case"Equal":return[st["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"NotEqual":return[it["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Greater":return[ct["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"GreaterEqual":return[ut["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Less":return[lt["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"LessEqual":return[dt["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"LogicalAnd":return[pt["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"LogicalNot":return[ft["a"](Object(o["d"])("a",e,t,n))];case"LogicalOr":return[ht["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];case"Select":case"SelectV2":return[mt["a"](Object(o["d"])("condition",e,t,n),Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var gt=n("487b"),yt=n("c912");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const xt=(e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[gt["a"](Object(o["d"])("a",e,t,n),Object(o["d"])("b",e,t,n),Object(o["d"])("transposeA",e,t,n),Object(o["d"])("transposeB",e,t,n))];case"Transpose":return[yt["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("perm",e,t,n))];case"_FusedMatMul":const[r,a]=Object(o["d"])("fusedOps",e,t,n),s="biasadd"===r,i="prelu"===a,c=Object(o["d"])("numArgs",e,t,n),u=Object(o["d"])("leakyreluAlpha",e,t,n);if(s){if(i&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,d]=Object(o["d"])("args",e,t,n);return[we["i"].matMul({a:Object(o["d"])("a",e,t,n),b:Object(o["d"])("b",e,t,n),transposeA:Object(o["d"])("transposeA",e,t,n),transposeB:Object(o["d"])("transposeB",e,t,n),bias:l,activation:a,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var vt=n("71db"),Ot=n("e101"),wt=n("5f87"),Ct=n("804a"),$t=n("bc62");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const kt=(e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":return[vt["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("mean",e,t,n),Object(o["d"])("variance",e,t,n),Object(o["d"])("offset",e,t,n),Object(o["d"])("scale",e,t,n),Object(o["d"])("epsilon",e,t,n))];case"FusedBatchNormV3":return[vt["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("mean",e,t,n),Object(o["d"])("variance",e,t,n),Object(o["d"])("offset",e,t,n),Object(o["d"])("scale",e,t,n),Object(o["d"])("epsilon",e,t,n))];case"LRN":return[Ot["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("radius",e,t,n),Object(o["d"])("bias",e,t,n),Object(o["d"])("alpha",e,t,n),Object(o["d"])("beta",e,t,n))];case"Softmax":return[wt["a"](Object(o["d"])("x",e,t,n))];case"LogSoftmax":return[Ct["a"](Object(o["d"])("x",e,t,n))];case"SparseToDense":return[$t["a"](Object(o["d"])("sparseIndices",e,t,n),Object(o["d"])("outputShape",e,t,n),Object(o["d"])("sparseValues",e,t,n),Object(o["d"])("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var It=n("c021"),jt=n("122e"),Et=n("ae6d"),Tt=n("e053"),Nt=n("df81"),St=n("4516"),At=n("e89f"),_t=n("db49"),Rt=n("1e68"),Ft=n("04c4"),Dt=n("2f2c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Lt=(e,t,n)=>{switch(e.op){case"Max":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("keepDims",e,t,n);return[It["a"](Object(o["d"])("x",e,t,n),r,a)]}case"Mean":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("keepDims",e,t,n);return[jt["a"](Object(o["d"])("x",e,t,n),r,a)]}case"Min":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("keepDims",e,t,n);return[Et["a"](Object(o["d"])("x",e,t,n),r,a)]}case"Sum":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("keepDims",e,t,n);return[Tt["a"](Object(o["d"])("x",e,t,n),r,a)]}case"All":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("keepDims",e,t,n);return[Nt["a"](Object(o["d"])("x",e,t,n),r,a)]}case"Any":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("keepDims",e,t,n);return[St["a"](Object(o["d"])("x",e,t,n),r,a)]}case"ArgMax":{const r=Object(o["d"])("axis",e,t,n);return[At["a"](Object(o["d"])("x",e,t,n),r)]}case"ArgMin":{const r=Object(o["d"])("axis",e,t,n);return[_t["a"](Object(o["d"])("x",e,t,n),r)]}case"Prod":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("keepDims",e,t,n);return[oe["a"](Object(o["d"])("x",e,t,n),r,a)]}case"Cumsum":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("exclusive",e,t,n),s=Object(o["d"])("reverse",e,t,n);return[Rt["a"](Object(o["d"])("x",e,t,n),r,a,s)]}case"Bincount":const r=Object(o["d"])("x",e,t,n),a=Object(o["d"])("weights",e,t,n),s=Object(o["d"])("size",e,t,n);return[Ft["a"](r,a,s)];case"DenseBincount":{const r=Object(o["d"])("x",e,t,n),a=Object(o["d"])("weights",e,t,n),s=Object(o["d"])("size",e,t,n),i=Object(o["d"])("binaryOutput",e,t,n);return[Dt["a"](r,a,s,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Pt=n("649e"),Mt=n("91a3"),Bt=n("d08e"),Vt=n("6d3c"),zt=n("de1a"),Ut=n("d1f4"),Wt=n("35c9"),Gt=n("d54d"),Ht=n("3a44"),Kt=n("8d71"),qt=n("45bb"),Xt=n("8bfa"),Yt=n("ba40");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Qt=(e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{const r=Object(o["d"])("n",e,t,n),a=Object(o["d"])("axis",e,t,n);let s=Object(o["d"])("tensors",e,t,n);return s=s.slice(0,r),[Pt["a"](s,a)]}case"Gather":{const r=Object(o["d"])("x",e,t,n),a=Object(o["d"])("indices",e,t,n);return[Mt["a"](r,He["a"](a,"int32"),0)]}case"GatherV2":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("batchDims",e,t,n),s=Object(o["d"])("x",e,t,n),i=Object(o["d"])("indices",e,t,n);return[Mt["a"](s,He["a"](i,"int32"),r,a)]}case"Reverse":{const r=Object(o["d"])("dims",e,t,n),a=[];for(let e=0;e<r.length;e++)r[e]&&a.push(e);const s=Object(o["d"])("x",e,t,n);return[Bt["a"](s,a)]}case"ReverseV2":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("x",e,t,n);return[Bt["a"](a,r)]}case"Slice":{const r=Object(o["d"])("begin",e,t,n),a=Object(o["d"])("size",e,t,n);return[Vt["a"](Object(o["d"])("x",e,t,n),r,a)]}case"StridedSlice":{const r=Object(o["d"])("begin",e,t,n),a=Object(o["d"])("end",e,t,n),s=Object(o["d"])("strides",e,t,n),i=Object(o["d"])("beginMask",e,t,n),c=Object(o["d"])("endMask",e,t,n),u=Object(o["d"])("ellipsisMask",e,t,n),l=Object(o["d"])("newAxisMask",e,t,n),d=Object(o["d"])("shrinkAxisMask",e,t,n),p=Object(o["d"])("x",e,t,n);return[zt["a"](p,r,a,s,i,c,u,l,d)]}case"Pack":return Object(r["Id"])(()=>{const a=Object(o["d"])("axis",e,t,n),s=Object(o["d"])("tensors",e,t,n),i=s[0].shape,c=Ut["a"](s[0]).shape,u=s.map(e=>{const t=r["Ld"].arraysEqual(e.shape,i);if(!t&&!r["Ld"].arraysEqual(Ut["a"](e).shape,c))throw new Error("the input tensors shape does not match");return t?e:Wt["a"](e,i)});return[Gt["a"](u,a)]});case"Unpack":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("tensor",e,t,n);return Ht["a"](a,r)}case"Tile":{const r=Object(o["d"])("reps",e,t,n);return[Kt["a"](Object(o["d"])("x",e,t,n),r)]}case"Split":case"SplitV":{const r=Object(o["d"])("axis",e,t,n),a=Object(o["d"])("numOrSizeSplits",e,t,n),s=Object(o["d"])("x",e,t,n);return qt["a"](s,a,r)}case"ScatterNd":{const r=Object(o["d"])("indices",e,t,n),a=Object(o["d"])("values",e,t,n),s=Object(o["d"])("shape",e,t,n);return[Xt["a"](r,a,s)]}case"GatherNd":{const r=Object(o["d"])("x",e,t,n),a=Object(o["d"])("indices",e,t,n);return[Yt["a"](r,a)]}case"SparseToDense":{const r=Object(o["d"])("sparseIndices",e,t,n),a=Object(o["d"])("outputShape",e,t,n),s=Object(o["d"])("sparseValues",e,t,n),i=Object(o["d"])("defaultValue",e,t,n);return[$t["a"](r,s,a,s.dtype===i.dtype?i:He["a"](i,s.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Jt=n("1ab7"),Zt=n("4c7a"),en=n("b61d"),tn=n("69dc");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const nn=(e,t,n)=>{switch(e.op){case"FFT":return[Jt["a"](Object(o["d"])("x",e,t,n))];case"IFFT":return[Zt["a"](Object(o["d"])("x",e,t,n))];case"RFFT":return[en["a"](Object(o["d"])("x",e,t,n))];case"IRFFT":return[tn["a"](Object(o["d"])("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var rn=n("dae8"),an=n("93db"),on=n("0eb5"),sn=n("7580"),cn=n("3b28"),un=n("364e"),ln=n("48db");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const dn=(e,t,n)=>{switch(e.op){case"Cast":return[He["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("dtype",e,t,n))];case"ExpandDims":{const r=Object(o["d"])("axis",e,t,n);return[rn["a"](Object(o["d"])("x",e,t,n),r)]}case"Squeeze":{const r=Object(o["d"])("axis",e,t,n);return[Ut["a"](Object(o["d"])("x",e,t,n),r)]}case"Reshape":return[Wt["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("shape",e,t,n))];case"MirrorPad":return[an["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("padding",e,t,n),Object(o["d"])("mode",e,t,n))];case"PadV2":case"Pad":return[on["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("padding",e,t,n),Object(o["d"])("constantValue",e,t,n))];case"SpaceToBatchND":{const r=Object(o["d"])("blockShape",e,t,n),a=Object(o["d"])("paddings",e,t,n);return[sn["a"](Object(o["d"])("x",e,t,n),r,a)]}case"BatchToSpaceND":{const r=Object(o["d"])("blockShape",e,t,n),a=Object(o["d"])("crops",e,t,n);return[cn["a"](Object(o["d"])("x",e,t,n),r,a)]}case"DepthToSpace":{const r=Object(o["d"])("blockSize",e,t,n),a=Object(o["d"])("dataFormat",e,t,n).toUpperCase();return[un["a"](Object(o["d"])("x",e,t,n),r,a)]}case"BroadcastTo":return[ln["a"](Object(o["d"])("x",e,t,n),Object(o["d"])("shape",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pn(e,t,n,a){const o=((e,t,n)=>{switch(e.category){case"arithmetic":return r["Id"](()=>v(e,t,n));case"basic_math":return r["Id"](()=>ce(e,t,n));case"control":return xe(e,t,n);case"convolution":return r["Id"](()=>_e(e,t,n));case"creation":return r["Id"](()=>Ge(e,t,n));case"dynamic":return Ye(e,t,n);case"evaluation":return r["Id"](()=>Ze(e,t,n));case"image":return r["Id"](()=>ot(e,t,n));case"graph":return r["Id"](()=>nt(e,t,n));case"logical":return r["Id"](()=>bt(e,t,n));case"matrices":return r["Id"](()=>xt(e,t,n));case"normalization":return r["Id"](()=>kt(e,t,n));case"reduction":return r["Id"](()=>Lt(e,t,n));case"slice_join":return r["Id"](()=>Qt(e,t,n));case"spectral":return r["Id"](()=>nn(e,t,n));case"transformation":return r["Id"](()=>dn(e,t,n));case"hash_table":return at(e,t,n,a);case"custom":const o=Object(i["a"])(e.op);if(o&&o.customExecutor)return o.customExecutor(new s(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return r["Ld"].isPromise(o)?o.then(e=>[].concat(e)):[].concat(o)}class fn{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hn(e,t,n,r){const a=new Set,s=[];let i=null,c=null;const u=new Set,l=Object.keys(e).map(e=>Object(o["g"])(e)[0]);let d=[];null!=r&&(d=r.map(e=>Object(o["g"])(e.name)[0]));const p=[...t];while(p.length>0){const e=p.pop();(xn(e)||vn(e)||On(e))&&null==i&&(i=e,c=i.children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==n[e.name]&&(-1===l.indexOf(e.name)&&-1===d.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach(e=>{u.has(e.name)||(u.add(e.name),p.push(e))}):s.push(e.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:s,dynamicNode:i,syncInputs:c}}function mn(e,t,n){const{usedNodes:r,inputs:a}=n,s=[],i=Object.keys(a).map(e=>Object(o["g"])(e)[0]).map(t=>e.nodes[t]),c=e.initNodes;i.forEach(e=>{r.has(e.name)&&s.push(e)}),e.weights.forEach(e=>{r.has(e.name)&&s.push(e)}),null!=c&&c.forEach(e=>{r.has(e.name)&&s.push(e)});const u=new Set,l=[];while(s.length>0){const e=s.pop();u.add(e.name),t[e.name]||l.push(e),e.children.forEach(e=>{!u.has(e.name)&&r.has(e.name)&&e.inputs.every(e=>u.has(e.name))&&s.push(e)})}return l}const bn=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],gn=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],yn=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function xn(e){return bn.indexOf(e.op)>=0}function vn(e){return gn.indexOf(e.op)>=0}function On(e){return yn.indexOf(e.op)>=0}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wn{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new wn(e.functions[t],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams["shape"]?e.attrParams["shape"].value:void 0,dtype:e.attrParams["dtype"]?e.attrParams["dtype"].value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams["shape"]?e.attrParams["shape"].value:void 0,dtype:e.attrParams["dtype"]?e.attrParams["dtype"].value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){const n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=hn(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:o}=n;if(null!=a)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(r.length>0){const n=t.map(e=>e.name),a=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}return mn(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const a=n.map(e=>this.graph.nodes[Object(o["g"])(e)[0]]),s=t.map(e=>Object(o["g"])(e)[0]);let i=s.map(e=>this.graph.nodes[e]);0===i.length&&(i=this._outputs);const c=this.getCompilationKey(a,i);let u=this.compiledMap.get(c);null==u&&(u=this.compile(e,i),this.compiledMap.set(c,u));const l={},d={};return Object(r["Id"])(()=>{const n=new fn(this.weightMap,l,d,this.functionExecutorMap),a=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,r]=Object(o["g"])(t),s=[];s[r]=e[t],a[n]=s});const i=this.getFrozenTensorIds(a),c={};for(let e=0;e<u.length;e++){const t=u[e];if(!a[t.name]){const e=pn(t,a,n,this._resourceManager);if(r["Ld"].isPromise(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);a[t.name]=e,this.checkTensorForDisposal(t.name,t,a,n,i,s,c)}}return null==this.parent&&n.dispose(i),t.map(e=>Object(o["e"])(e,a,n))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,s,i){"control"!==t.category&&-1===s.indexOf(e)&&(n[e].forEach(e=>{null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)}),t.inputs.forEach(e=>{if("control"!==e.category){const t=Object(o["f"])(e.name,n,r);null!=t&&t.forEach(e=>{if(e&&!a.has(e.id)){const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}async _executeAsync(e,t,n=!1,r={},a={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));const s=new fn(this.weightMap,r,a,this.functionExecutorMap),i=await this.executeWithControlFlow(e,s,t,n),c=t.map(e=>Object(o["e"])(e,i,s)),u=c.map(e=>e.id),l=Object.keys(e).map(t=>e[t].id),d=new Set([...u,...l,...this.weightIds]);return Object.keys(i).forEach(e=>{const t=i[e];t.forEach(e=>{!e||e.isDisposed||d.has(e.id)||e.dispose()})}),null==this.parent&&s.dispose(d),c}async executeFunctionAsync(e,t,n){const r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const a=Object.keys(e),s=a.map(e=>this.graph.nodes[Object(o["g"])(e)[0]]),i=n.map(e=>Object(o["g"])(e)[0]);let c=i.map(e=>this.graph.nodes[e]);0===c.length&&(c=this._outputs);const{usedNodes:u,missingInputs:l,dynamicNode:d,syncInputs:p}=hn(e,c,this.weightMap,this._initNodes),f=[...s,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),h=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,r]=Object(o["g"])(t),a=[];a[r]=e[t],h[n]=a});const m={},b=this.getFrozenTensorIds(h),g={};while(f.length>0){const e=this.processStack(s,f,t,h,g,b,i,m,u);await Promise.all(e)}null!=d||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=c.filter(e=>!xn(e)&&!Object(o["e"])(e.name,h,t)).map(e=>e.name);if(y.length>0){let e="";throw null!=d&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${a}]. Consider providing the following inputs: [${l}]. ${e}`)}return h}processStack(e,t,n,a,s,i,c,u,l){const d=[];while(t.length>0){const e=t.pop();n.currentContext=e.contexts;let p="";if("Enter"===e.node.op&&Object(o["d"])("isConstant",e.node,a,n)&&([p]=Object(o["b"])(e.node.name,n)),null==a[e.node.name]){const f=pn(e.node,a,n,this._resourceManager);p||([p]=Object(o["b"])(e.node.name,n));const h=n.currentContext;r["Ld"].isPromise(f)?d.push(f.then(r=>(a[p]=r,n.currentContext=h,this.checkTensorForDisposal(p,e.node,a,n,i,c,u),this.processChildNodes(e.node,t,n,a,s,l),r))):(a[p]=f,this.checkTensorForDisposal(p,e.node,a,n,i,c,u),this.processChildNodes(e.node,t,n,a,s,l))}else this.processChildNodes(e.node,t,n,a,s,l)}return d}processChildNodes(e,t,n,r,a,s){e.children.forEach(e=>{const[i]=Object(o["b"])(e.name,n);!a[i]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!Object(o["e"])(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!Object(o["e"])(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const n=e[t],[a]=Object(o["g"])(t),s=this.graph.nodes[a];if(s.attrParams["shape"]&&s.attrParams["shape"].value){const e=s.attrParams["shape"].value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);r["Ld"].assert(t,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`)}s.attrParams["dtype"]&&s.attrParams["dtype"].value&&r["Ld"].assert(n.dtype===s.attrParams["dtype"].value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams["dtype"].value}, but was ${n.dtype}`)})}mapInputs(e){const t={};for(const n in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){const r=this._signature.inputs[n];t[r.name]=e[n]}else t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter(e=>{const[t]=Object(o["g"])(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){const t=this._signature.outputs[e];return t.name}return e},{})}checkOutputs(e){e.forEach(e=>{const[t]=Object(o["g"])(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)})}}class Cn{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $n="?tfjs-format=file",kn="model.json";class In{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new Cn}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=r["pd"].browserHTTPRequest(e,this.loadOptions);else{const t=r["pd"].getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(r["pd"].browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const o=r["pd"].decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new wn(a["a"].Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(o),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=a["a"].Instance.transformGraph(e.modelInitializer);this.initializer=new wn(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"===typeof e){const t=r["pd"].getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof r["Qc"])&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,n,r)=>(t[n]=e[r],t),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function jn(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}${kn}${$n}`);const n=new In(e,t);return await n.load(),n}
/** @license See the LICENSE file. */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */
var En=function(){return(En=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Tn(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))}function Nn(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!((a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function Sn(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))}function An(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var _n=function(e){return{startEndTensor:e,startPoint:Object(r["zd"])(e,[0,0],[-1,2]),endPoint:Object(r["zd"])(e,[0,2],[-1,2])}},Rn={strides:[8,16],anchors:[2,6]};function Fn(e,t){var n,a,o;if(e.topLeft instanceof r["Qc"]&&e.bottomRight instanceof r["Qc"]){var s=Object(r["Id"])((function(){return[Object(r["gd"])([Object(r["zd"])(Object(r["Dd"])(t-1,e.topLeft),0,1),Object(r["zd"])(e.topLeft,1,1)]),Object(r["gd"])([Object(r["Dd"])(t-1,Object(r["zd"])(e.bottomRight,0,1)),Object(r["zd"])(e.bottomRight,1,1)])]}));n=s[0],a=s[1],null!=e.landmarks&&(o=Object(r["Id"])((function(){var n=Object(r["Dd"])(Object(r["Gd"])([t-1,0]),e.landmarks),a=Object(r["Gd"])([1,-1]);return Object(r["sd"])(n,a)})))}else{var i=e.topLeft,c=i[0],u=i[1],l=e.bottomRight,d=l[0],p=l[1];n=[t-1-c,u],a=[t-1-d,p],null!=e.landmarks&&(o=e.landmarks.map((function(e){return[t-1-e[0],e[1]]})))}var f={topLeft:n,bottomRight:a};return null!=o&&(f.landmarks=o),null!=e.probability&&(f.probability=e.probability instanceof r["Qc"]?e.probability.clone():e.probability),f}function Dn(e,t){return Object(r["Id"])((function(){var n;return n=e.hasOwnProperty("box")?e.box:e,Object(r["Bd"])(function(e,t){var n=Object(r["sd"])(e.startPoint,t),a=Object(r["sd"])(e.endPoint,t),o=Object(r["hd"])([n,a],1);return _n(o)}(n,t).startEndTensor)}))}var Ln=function(){function e(e,t,n,a,o,s){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=a,this.anchorsData=function(e,t,n){for(var r=[],a=0;a<n.strides.length;a++)for(var o=n.strides[a],s=Math.floor((t+o-1)/o),i=Math.floor((e+o-1)/o),c=n.anchors[a],u=0;u<s;u++)for(var l=o*(u+.5),d=0;d<i;d++)for(var p=o*(d+.5),f=0;f<c;f++)r.push([p,l]);return r}(t,n,Rn),this.anchors=Object(r["Hd"])(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=Object(r["Gd"])([t,n]),this.iouThreshold=o,this.scoreThreshold=s}return e.prototype.getBoundingBoxes=function(e,t,n){return void 0===n&&(n=!0),Sn(this,void 0,void 0,(function(){var a,o,s,i,c,u,l,d,p,f,h,m,b,g,y=this;return An(this,(function(x){switch(x.label){case 0:return a=Object(r["Id"])((function(){var t=r["od"].resizeBilinear(e,[y.width,y.height]),n=Object(r["sd"])(Object(r["Dd"])(Object(r["jd"])(t,255),.5),2),a=y.blazeFaceModel.predict(n),o=Object(r["Bd"])(a),s=function(e,t,n){var a=Object(r["zd"])(e,[0,1],[-1,2]),o=Object(r["ad"])(a,t),s=Object(r["zd"])(e,[0,3],[-1,2]),i=Object(r["jd"])(s,n),c=Object(r["jd"])(o,n),u=Object(r["jd"])(i,2),l=Object(r["Dd"])(c,u),d=Object(r["ad"])(c,u),p=Object(r["sd"])(l,n),f=Object(r["sd"])(d,n);return Object(r["hd"])([p,f],1)}(o,y.anchors,y.inputSize),i=Object(r["zd"])(o,[0,0],[-1,1]);return[o,s,Object(r["Bd"])(Object(r["yd"])(i))]})),o=a[0],s=a[1],i=a[2],c=console.warn,console.warn=function(){},u=r["od"].nonMaxSuppression(s,i,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=c,[4,u.array()];case 1:return l=x.sent(),u.dispose(),d=l.map((function(e){return Object(r["zd"])(s,[e,0],[1,-1])})),t?[3,3]:[4,Promise.all(d.map((function(e){return Sn(y,void 0,void 0,(function(){var t;return An(this,(function(n){switch(n.label){case 0:return[4,e.array()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 2:d=x.sent(),x.label=3;case 3:for(p=e.shape[1],f=e.shape[2],h=t?Object(r["jd"])([f,p],this.inputSize):[f/this.inputSizeData[0],p/this.inputSizeData[1]],m=[],b=function(e){var a=d[e],s=Object(r["Id"])((function(){var s=_n(a instanceof r["Qc"]?a:Object(r["Hd"])(a));if(!n)return s;var c,u=l[e];return c=t?Object(r["zd"])(y.anchors,[u,0],[1,2]):y.anchorsData[u],{box:s,landmarks:Object(r["vd"])(Object(r["Bd"])(Object(r["zd"])(o,[u,5],[1,-1])),[6,-1]),probability:Object(r["zd"])(i,[u],[1]),anchor:c}}));m.push(s)},g=0;g<d.length;g++)b(g);return s.dispose(),i.dispose(),o.dispose(),[2,{boxes:m,scaleFactor:h}]}}))}))},e.prototype.estimateFaces=function(e,t,n,a){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===a&&(a=!0),Sn(this,void 0,void 0,(function(){var o,s,i,c,u,l,d=this;return An(this,(function(p){switch(p.label){case 0:return o=function(e){return e instanceof r["Qc"]?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),s=o[1],i=Object(r["Id"])((function(){return e instanceof r["Qc"]||(e=r["cd"].fromPixels(e)),Object(r["md"])(Object(r["ed"])(e,"float32"),0)})),[4,this.getBoundingBoxes(i,t,a)];case 1:return c=p.sent(),u=c.boxes,l=c.scaleFactor,i.dispose(),t?[2,u.map((function(e){var t=Dn(e,l),o={topLeft:Object(r["zd"])(t,[0],[2]),bottomRight:Object(r["zd"])(t,[2],[2])};if(a){var i=e,c=i.landmarks,u=i.probability,d=i.anchor,p=Object(r["sd"])(Object(r["ad"])(c,d),l);o.landmarks=p,o.probability=u}return n&&(o=Fn(o,s)),o}))]:[2,Promise.all(u.map((function(e){return Sn(d,void 0,void 0,(function(){var t,r,o,i,c,u,d,p,f,h,m,b=this;return An(this,(function(g){switch(g.label){case 0:return t=Dn(e,l),a?[3,2]:[4,t.array()];case 1:return c=g.sent(),r={topLeft:c.slice(0,2),bottomRight:c.slice(2)},[3,4];case 2:return[4,Promise.all([e.landmarks,t,e.probability].map((function(e){return Sn(b,void 0,void 0,(function(){return An(this,(function(t){return[2,e.array()]}))}))})))];case 3:o=g.sent(),i=o[0],c=o[1],u=o[2],d=e.anchor,f=(p=l)[0],h=p[1],m=i.map((function(e){return[(e[0]+d[0])*f,(e[1]+d[1])*h]})),r={topLeft:c.slice(0,2),bottomRight:c.slice(2),landmarks:m,probability:u},function(e){e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()}(e.box),e.landmarks.dispose(),e.probability.dispose(),g.label=4;case 4:return t.dispose(),n&&(r=Fn(r,s)),[2,r]}}))}))})))]}}))}))},e}();function Pn(e){var t=void 0===e?{}:e,n=t.maxFaces,r=void 0===n?10:n,a=t.inputWidth,o=void 0===a?128:a,s=t.inputHeight,i=void 0===s?128:s,c=t.iouThreshold,u=void 0===c?.3:c,l=t.scoreThreshold,d=void 0===l?.75:l,p=t.modelUrl;return Sn(this,void 0,void 0,(function(){var e;return An(this,(function(t){switch(t.label){case 0:return null==p?[3,2]:[4,jn(p)];case 1:return e=t.sent(),[3,4];case 2:return[4,jn("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:e=t.sent(),t.label=4;case 4:return[2,new Ln(e,o,i,r,u,d)]}}))}))}var Mn={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function Bn(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function Vn(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function zn(e,t){void 0===t&&(t=1.5);var n=Vn(e),r=Bn(e),a=[t*r[0]/2,t*r[1]/2];return{startPoint:[n[0]-a[0],n[1]-a[1]],endPoint:[n[0]+a[0],n[1]+a[1]],landmarks:e.landmarks}}function Un(e){var t=Vn(e),n=Bn(e),r=Math.max.apply(Math,n)/2;return{startPoint:[t[0]-r,t[1]-r],endPoint:[t[0]+r,t[1]+r],landmarks:e.landmarks}}var Wn=[[1,0,0],[0,1,0],[0,0,1]];function Gn(e,t){var n,r=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]);return(n=r)-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}function Hn(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function Kn(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function qn(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);return n}function Xn(e,t){for(var n=[],r=e.length,a=0;a<r;a++){n.push([]);for(var o=0;o<r;o++)n[a].push(Kn(e[a],qn(t,o)))}return n}function Yn(e,t){var n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],o=Xn(Hn(t[0],t[1]),a);return Xn(o,Hn(-t[0],-t[1]))}var Qn=[13,Mn.midwayBetweenEyes[0]],Jn=[3,2],Zn=Mn.leftEyeLower0,er=[Zn[0],Zn[Zn.length-1]],tr=Mn.rightEyeLower0,nr=[tr[0],tr[tr.length-1]],rr=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function ar(e,t,n,r){for(var a=0;a<rr.length;a++){var o=rr[a],s=o.key,i=o.indices,c=Mn[""+n+s];if(null==r||r.includes(s))for(var u=0;u<i.length;u++){var l=i[u];e[c[u]]=[t[l][0],t[l][1],(t[l][2]+e[c[u]][2])/2]}}}var or=function(){function e(e,t,n,r,a,o,s){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=e,this.meshDetector=t,this.irisModel=s,this.meshWidth=n,this.meshHeight=r,this.maxContinuousChecks=a,this.maxFaces=o}return e.prototype.transformRawCoords=function(e,t,n,r){var a,o,s,i,c=this,u=Bn({startPoint:t.startPoint,endPoint:t.endPoint}),l=[u[0]/this.meshWidth,u[1]/this.meshHeight],d=e.map((function(e){return[l[0]*(e[0]-c.meshWidth/2),l[1]*(e[1]-c.meshHeight/2),e[2]]})),p=Yn(n,[0,0]),f=d.map((function(e){return function(e,t){return[Kn(e,t[0]),Kn(e,t[1])]}(e,p).concat([e[2]])})),h=(o=[[(a=r)[0][0],a[1][0]],[a[0][1],a[1][1]]],s=[a[0][2],a[1][2]],i=[-Kn(o[0],s),-Kn(o[1],s)],[o[0].concat(i[0]),o[1].concat(i[1]),[0,0,1]]),m=Vn({startPoint:t.startPoint,endPoint:t.endPoint}).concat([1]),b=[Kn(m,h[0]),Kn(m,h[1])];return f.map((function(e){return[e[0]+b[0],e[1]+b[1],e[2]]}))},e.prototype.getLeftToRightEyeDepthDifference=function(e){return e[er[0]][2]-e[nr[0]][2]},e.prototype.getEyeBox=function(e,t,n,a,o){void 0===o&&(o=!1);var s=Un(zn(this.calculateLandmarksBoundingBox([e[n],e[a]]),2.3)),i=Bn(s),c=r["od"].cropAndResize(t,[[s.startPoint[1]/this.meshHeight,s.startPoint[0]/this.meshWidth,s.endPoint[1]/this.meshHeight,s.endPoint[0]/this.meshWidth]],[0],[64,64]);return o&&(c=r["od"].flipLeftRight(c)),{box:s,boxSize:i,crop:c}},e.prototype.getEyeCoords=function(e,t,n,r){void 0===r&&(r=!1);for(var a=[],o=0;o<76;o++){var s=e[3*o],i=e[3*o+1],c=e[3*o+2];a.push([(r?1-s/64:s/64)*n[0]+t.startPoint[0],i/64*n[1]+t.startPoint[1],c])}return{rawCoords:a,iris:a.slice(71)}},e.prototype.getAdjustedIrisCoords=function(e,t,n){var r=e[Mn[n+"EyeUpper0"][3]][2],a=e[Mn[n+"EyeLower0"][4]][2],o=(r+a)/2;return t.map((function(e,t){var n=o;return 2===t?n=r:4===t&&(n=a),[e[0],e[1],n]}))},e.prototype.predict=function(e,t){return Tn(this,void 0,void 0,(function(){var n,a,o,s,i=this;return Nn(this,(function(c){switch(c.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(e,!1,!0)]:[3,2];case 1:return n=c.sent(),a=n.boxes,o=n.scaleFactor,0===a.length?(this.regionsOfInterest=[],[2,null]):(s=a.map((function(e){var t,n,a={startPoint:Object(r["Bd"])(e.box.startPoint).arraySync(),endPoint:Object(r["Bd"])(e.box.endPoint).arraySync()},s=Un(zn((n=o,{startPoint:[(t=a).startPoint[0]*n[0],t.startPoint[1]*n[1]],endPoint:[t.endPoint[0]*n[0],t.endPoint[1]*n[1]]})));return En({},s,{landmarks:e.landmarks.arraySync()})})),a.forEach((function(e){null!=e&&null!=e.startPoint&&(e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose())})),this.updateRegionsOfInterest(s),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,c.label=3;case 3:return[2,Object(r["Id"])((function(){return i.regionsOfInterest.map((function(n,a){var o,s=n.landmarks.length>=468,c=Qn[0],u=Qn[1];!1===s&&(c=Jn[0],u=Jn[1]),o=Gn(n.landmarks[c],n.landmarks[u]);var l=Vn({startPoint:n.startPoint,endPoint:n.endPoint}),d=[l[0]/e.shape[2],l[1]/e.shape[1]],p=e,f=Wn;0!==o&&(p=r["od"].rotateWithOffset(e,o,0,d),f=Yn(-o,l));var h={startPoint:n.startPoint,endPoint:n.endPoint},m=Object(r["jd"])(function(e,t,n){var a=t.shape[1],o=t.shape[2],s=[[e.startPoint[1]/a,e.startPoint[0]/o,e.endPoint[1]/a,e.endPoint[0]/o]];return r["od"].cropAndResize(t,s,[0],n,"bilinear",0)}(h,p,[i.meshHeight,i.meshWidth]),255),b=i.meshDetector.predict(m),g=b[1],y=b[2],x=Object(r["vd"])(y,[-1,3]).arraySync();if(t){var v=i.getEyeBox(x,m,er[0],er[1],!0),O=v.box,w=v.boxSize,C=v.crop,$=i.getEyeBox(x,m,nr[0],nr[1]),k=$.box,I=$.boxSize,j=$.crop,E=i.irisModel.predict(Object(r["gd"])([C,j])).dataSync(),T=E.slice(0,228),N=i.getEyeCoords(T,O,w,!0),S=N.rawCoords,A=N.iris,_=E.slice(228),R=i.getEyeCoords(_,k,I),F=R.rawCoords,D=R.iris,L=i.getLeftToRightEyeDepthDifference(x);Math.abs(L)<30?(ar(x,S,"left"),ar(x,F,"right")):L<1?ar(x,S,"left",["EyeUpper0","EyeLower0"]):ar(x,F,"right",["EyeUpper0","EyeLower0"]);var P=i.getAdjustedIrisCoords(x,A,"left"),M=i.getAdjustedIrisCoords(x,D,"right");x=x.concat(P).concat(M)}var B=i.transformRawCoords(x,n,o,f),V=Object(r["Hd"])(B),z=zn(i.calculateLandmarksBoundingBox(B)),U=Un(z);return i.regionsOfInterest[a]=En({},U,{landmarks:V.arraySync()}),{coords:Object(r["Hd"])(x,[x.length,3]),scaledCoords:V,box:z,flag:Object(r["Bd"])(g)}}))}))]}}))}))},e.prototype.updateRegionsOfInterest=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.regionsOfInterest[t],a=0;if(r&&r.startPoint){var o=n.startPoint,s=o[0],i=o[1],c=n.endPoint,u=c[0],l=c[1],d=r.startPoint,p=d[0],f=d[1],h=r.endPoint,m=h[0],b=h[1],g=Math.max(s,p),y=Math.max(i,f),x=(Math.min(u,m)-g)*(Math.min(l,b)-y);a=x/((u-s)*(l-i)+(m-p)*(b-i)-x)}a<.25&&(this.regionsOfInterest[t]=n)}this.regionsOfInterest=this.regionsOfInterest.slice(0,e.length)},e.prototype.clearRegionOfInterest=function(e){null!=this.regionsOfInterest[e]&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,e).concat(this.regionsOfInterest.slice(e+1)))},e.prototype.shouldUpdateRegionsOfInterest=function(){var e=this.regionsOfInterest.length,t=0===e;return 1===this.maxFaces||t?t:e!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},e.prototype.calculateLandmarksBoundingBox=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{startPoint:[Math.min.apply(Math,t),Math.min.apply(Math,n)],endPoint:[Math.max.apply(Math,t),Math.max.apply(Math,n)]}},e}(),sr=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function ir(e){return Tn(this,void 0,void 0,(function(){var t,n,r,a,o,s,i,c,u,l,d,p,f,h,m,b;return Nn(this,(function(g){switch(g.label){case 0:return t=e.maxContinuousChecks,n=void 0===t?5:t,r=e.detectionConfidence,a=void 0===r?.9:r,o=e.maxFaces,s=void 0===o?10:o,i=e.iouThreshold,c=void 0===i?.3:i,u=e.scoreThreshold,l=void 0===u?.75:u,d=e.shouldLoadIrisModel,p=void 0===d||d,f=e.modelUrl,h=e.detectorModelUrl,m=e.irisModelUrl,p?[4,Promise.all([cr(h,s,c,l),ur(f),lr(m)])]:[3,2];case 1:return b=g.sent(),[3,4];case 2:return[4,Promise.all([cr(h,s,c,l),ur(f)])];case 3:b=g.sent(),g.label=4;case 4:return[2,new fr(b[0],b[1],n,a,s,p?b[2]:null)]}}))}))}function cr(e,t,n,r){return Tn(this,void 0,void 0,(function(){return Nn(this,(function(a){return[2,Pn({modelUrl:e,maxFaces:t,iouThreshold:n,scoreThreshold:r})]}))}))}function ur(e){return Tn(this,void 0,void 0,(function(){return Nn(this,(function(t){return null!=e?[2,jn(e)]:[2,jn("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]}))}))}function lr(e){return Tn(this,void 0,void 0,(function(){return Nn(this,(function(t){return null!=e?[2,jn(e)]:[2,jn("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]}))}))}function dr(e,t){if(e.mesh instanceof r["Qc"]){var n=Object(r["Id"])((function(){var n=Object(r["Gd"])([t-1,0,0]),a=Object(r["Gd"])([1,-1,1]);return Object(r["Id"])((function(){return[Object(r["gd"])([Object(r["Dd"])(t-1,Object(r["zd"])(e.boundingBox.topLeft,0,1)),Object(r["zd"])(e.boundingBox.topLeft,1,1)]),Object(r["gd"])([Object(r["Dd"])(t-1,Object(r["zd"])(e.boundingBox.bottomRight,0,1)),Object(r["zd"])(e.boundingBox.bottomRight,1,1)]),Object(r["sd"])(Object(r["Dd"])(n,e.mesh),a),Object(r["sd"])(Object(r["Dd"])(n,e.scaledMesh),a)]}))})),a=n[0],o=n[1],s=n[2],i=n[3];return Object.assign({},e,{boundingBox:{topLeft:a,bottomRight:o},mesh:s,scaledMesh:i})}return Object.assign({},e,{boundingBox:{topLeft:[t-1-e.boundingBox.topLeft[0],e.boundingBox.topLeft[1]],bottomRight:[t-1-e.boundingBox.bottomRight[0],e.boundingBox.bottomRight[1]]},mesh:e.mesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n})),scaledMesh:e.scaledMesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n}))})}var pr,fr=function(){function e(e,t,n,r,a,o){this.kind="MediaPipeFaceMesh",this.pipeline=new or(e,t,192,192,n,a,o),this.detectionConfidence=r}return e.getAnnotations=function(){return Mn},e.getUVCoords=function(){return sr},e.prototype.estimateFaces=function(e){return Tn(this,void 0,void 0,(function(){var t,n,a,o,s,i,c,u,l,d,p,f,h=this;return Nn(this,(function(m){switch(m.label){case 0:if(t=e.returnTensors,n=void 0!==t&&t,a=e.flipHorizontal,o=void 0!==a&&a,s=e.predictIrises,i=void 0===s||s,c=e.input,i&&null==this.pipeline.irisModel)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return u=function(e){return e instanceof r["Qc"]?[e.shape[0],e.shape[1]]:[e.height,e.width]}(c),l=u[1],d=Object(r["Id"])((function(){return c instanceof r["Qc"]||(c=r["cd"].fromPixels(c)),Object(r["md"])(Object(r["ed"])(c,"float32"),0)})),"webgl"!==Object(r["nd"])()?[3,2]:(f=Object(r["ld"])().get("WEBGL_PACK_DEPTHWISECONV"),Object(r["ld"])().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(d,i)]);case 1:return p=m.sent(),Object(r["ld"])().set("WEBGL_PACK_DEPTHWISECONV",f),[3,4];case 2:return[4,this.pipeline.predict(d,i)];case 3:p=m.sent(),m.label=4;case 4:return d.dispose(),null!=p&&p.length>0?[2,Promise.all(p.map((function(e,t){return Tn(h,void 0,void 0,(function(){var a,s,c,u,d,p,f,h,m,b,g,y,x,v,O=this;return Nn(this,(function(w){switch(w.label){case 0:return a=e.coords,s=e.scaledCoords,c=e.box,u=e.flag,d=[u],n||(d=d.concat([a,s])),[4,Promise.all(d.map((function(e){return Tn(O,void 0,void 0,(function(){return Nn(this,(function(t){return[2,e.array()]}))}))})))];case 1:if(p=w.sent(),f=p[0],u.dispose(),f<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(t),n)return h={kind:"MediaPipePredictionTensors",faceInViewConfidence:f,mesh:a,scaledMesh:s,boundingBox:{topLeft:Object(r["Gd"])(c.startPoint),bottomRight:Object(r["Gd"])(c.endPoint)}},o?[2,dr(h,l)]:[2,h];for(v in m=p.slice(1),b=m[0],g=m[1],s.dispose(),a.dispose(),y={kind:"MediaPipePredictionValues",faceInViewConfidence:f,boundingBox:{topLeft:c.startPoint,bottomRight:c.endPoint},mesh:b,scaledMesh:g},o&&(y=dr(y,l)),x={},Mn)(i||!1===v.includes("Iris"))&&(x[v]=Mn[v].map((function(e){return y.scaledMesh[e]})));return y.annotations=x,[2,y]}}))}))})))]:[2,[]]}}))}))},e}();function hr(e,t){return void 0===e&&(e=pr.mediapipeFacemesh),void 0===t&&(t={}),Tn(this,void 0,void 0,(function(){return Nn(this,(function(n){if(e===pr.mediapipeFacemesh)return[2,ir(t)];throw new Error(e+" is not a valid package name.")}))}))}!function(e){e.mediapipeFacemesh="mediapipe-facemesh"}(pr||(pr={}))},a49d:function(e,t,n){var r;(function(a,o){var s,i=this,c=256,u=6,l=52,d="random",p=o.pow(c,u),f=o.pow(2,l),h=2*f,m=c-1;function b(e,t,n){var r=[];t=1==t?{entropy:!0}:t||{};var s=v(x(t.entropy?[e,w(a)]:null==e?O():e,3),r),i=new g(r),l=function(){var e=i.g(u),t=p,n=0;while(e<f)e=(e+n)*c,t*=c,n=i.g(1);while(e>=h)e/=2,t/=2,n>>>=1;return(e+n)/t};return l.int32=function(){return 0|i.g(4)},l.quick=function(){return i.g(4)/4294967296},l.double=l,v(w(i.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&y(r,i),e.state=function(){return y(i,{})}),n?(o[d]=e,t):e})(l,s,"global"in t?t.global:this==o,t.state)}function g(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,s=r.S=[];n||(e=[n++]);while(a<c)s[a]=a++;for(a=0;a<c;a++)s[a]=s[o=m&o+e[a%n]+(t=s[a])],s[o]=t;(r.g=function(e){var t,n=0,a=r.i,o=r.j,s=r.S;while(e--)t=s[a=m&a+1],n=n*c+s[m&(s[a]=s[o=m&o+t])+(s[o]=t)];return r.i=a,r.j=o,n})(c)}function y(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function x(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(x(e[n],t-1))}catch(o){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){var n,r=e+"",a=0;while(a<r.length)t[m&a]=m&(n^=19*t[m&a])+r.charCodeAt(a++);return w(t)}function O(){try{var e;return s&&(e=s.randomBytes)?e=e(c):(e=new Uint8Array(c),(i.crypto||i.msCrypto).getRandomValues(e)),w(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,w(a)]}}function w(e){return String.fromCharCode.apply(0,e)}if(o["seed"+d]=b,v(o.random(),a),e.exports){e.exports=b;try{s=n(3)}catch(C){}}else r=function(){return b}.call(t,n,t,e),void 0===r||(e.exports=r)})([],Math)},a49e:function(e,t,n){(function(e){var r;(function(e,a,o){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=c:n("07d6")&&n("3c35")?(r=function(){return c}.call(t,n,t,a),void 0===r||(a.exports=r)):this.xorwow=c})(0,e,n("07d6"))}).call(this,n("62e4")(e))},a4b4:function(e,t,n){var r=n("342f");e.exports=/web0s(?!.*chrome)/i.test(r)},a5aa:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=Object(s["a"])(e,"a","mul"),i=Object(s["a"])(t,"b","mul");[n,i]=Object(o["b"])(n,i);const c={a:n,b:i};return r["a"].runKernel(a["Qb"],c)}const u=Object(i["a"])({mul_:c})},a691:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},a780:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("0280"),a=n("a3f7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function o(e){const t=Object(a["a"])(e,"condition","whereAsync","bool"),n=await t.data(),o=Object(r["a"])(t.shape,n);return e!==t&&t.dispose(),o}const s=o},a79d:function(e,t,n){"use strict";var r=n("23e7"),a=n("c430"),o=n("fea9"),s=n("d039"),i=n("d066"),c=n("4840"),u=n("cdf9"),l=n("6eeb"),d=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(e){var t=c(this,i("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),a||"function"!=typeof o||o.prototype["finally"]||l(o.prototype,"finally",i("Promise").prototype["finally"])},a80f:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},ae6d:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=null,n=!1){const s=Object(o["a"])(e,"x","min"),i={x:s},c={axis:t,keepDims:n};return r["a"].runKernel(a["Lb"],i,c)}const c=Object(s["a"])({min_:i})},ae93:function(e,t,n){"use strict";var r,a,o,s=n("d039"),i=n("e163"),c=n("9112"),u=n("5135"),l=n("b622"),d=n("c430"),p=l("iterator"),f=!1,h=function(){return this};[].keys&&(o=[].keys(),"next"in o?(a=i(i(o)),a!==Object.prototype&&(r=a)):f=!0);var m=void 0==r||s((function(){var e={};return r[p].call(e)!==e}));m&&(r={}),d&&!m||u(r,p)||c(r,p,h),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},aeab:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},b21c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","lessEqual"),c=Object(s["a"])(t,"b","lessEqual");[n,c]=Object(o["b"])(n,c),Object(i["a"])(n.shape,c.shape);const u={a:n,b:c};return r["a"].runKernel(a["wb"],u)}const l=Object(c["a"])({lessEqual_:u})},b333:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n("6ad5");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a="tfjsflags";class o{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Object(r["x"])(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=s(this.global.location.search);if(a in e){const t=e[a].split(",");t.forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=c(t,n)})}}}function s(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>(i(t,n[0],n[1]),n.join("="))),t}function i(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function c(e,t){if(t=t.toLowerCase(),"true"===t||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function u(){return l}let l=null;function d(e){l=e}},b39e:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","selu"),n={x:t};return r["a"].runKernel(a["uc"],n)}const c=Object(s["a"])({selu_:i})},b500:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","reciprocal"),n={x:t};return r["a"].runKernel(a["gc"],n)}const c=Object(s["a"])({reciprocal_:i})},b575:function(e,t,n){var r,a,o,s,i,c,u,l,d=n("da84"),p=n("06cf").f,f=n("2cf4").set,h=n("1cdc"),m=n("a4b4"),b=n("605d"),g=d.MutationObserver||d.WebKitMutationObserver,y=d.document,x=d.process,v=d.Promise,O=p(d,"queueMicrotask"),w=O&&O.value;w||(r=function(){var e,t;b&&(e=x.domain)&&e.exit();while(a){t=a.fn,a=a.next;try{t()}catch(n){throw a?s():o=void 0,n}}o=void 0,e&&e.enter()},h||b||m||!g||!y?v&&v.resolve?(u=v.resolve(void 0),l=u.then,s=function(){l.call(u,r)}):s=b?function(){x.nextTick(r)}:function(){f.call(d,r)}:(i=!0,c=y.createTextNode(""),new g(r).observe(c,{characterData:!0}),s=function(){c.data=i=!i})),e.exports=w||function(e){var t={fn:e,next:void 0};o&&(o.next=t),a||(a=t,s()),o=t}},b61d:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("6ad5"),a=n("0777"),o=n("649e"),s=n("24b0"),i=n("54ef"),c=n("d7b0"),u=n("35c9"),l=n("6d3c"),d=n("45bb"),p=n("5a2c"),f=n("a09b"),h=n("1ab7");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function m(e,t){Object(r["b"])("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got "+e.dtype);let n=e.shape[e.shape.length-1];const i=e.size/n;let m;if(null!=t&&t<n){const r=e.shape.map(e=>0),a=e.shape.map(e=>e);a[e.shape.length-1]=t,m=Object(l["a"])(e,r,a),n=t}else if(null!=t&&t>n){const r=e.shape.map(e=>e);r[e.shape.length-1]=t-n,m=Object(o["a"])([e,Object(p["a"])(r)],e.shape.length-1),n=t}else m=e;const b=Object(f["a"])(m),g=Object(u["a"])(Object(a["a"])(m,b),[i,n]),y=Object(h["a"])(g),x=Math.floor(n/2)+1,v=Object(c["a"])(y),O=Object(s["a"])(y),w=Object(d["a"])(v,[x,n-x],v.shape.length-1),C=Object(d["a"])(O,[x,n-x],O.shape.length-1),$=m.shape.slice();return $[m.shape.length-1]=x,Object(u["a"])(Object(a["a"])(w[0],C[0]),$)}const b=Object(i["a"])({rfft_:m})},b622:function(e,t,n){var r=n("da84"),a=n("5692"),o=n("5135"),s=n("90e3"),i=n("4930"),c=n("fdbf"),u=a("wks"),l=r.Symbol,d=c?l:l&&l.withoutSetter||s;e.exports=function(e){return o(u,e)&&(i||"string"==typeof u[e])||(i&&o(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),a=n("9152"),o=n("e3db");function s(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=u.prototype):(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?b(e,t,n,r):"string"===typeof t?h(e,t,n):g(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t,n,r){return d(t),t<=0?c(e,t):void 0!==n?"string"===typeof r?c(e,t).fill(n,r):c(e,t).fill(n):c(e,t)}function f(e,t){if(d(t),e=c(e,t<0?0:0|y(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=c(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function m(e,t){var n=t.length<0?0:0|y(t.length);e=c(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function b(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=u.prototype):e=m(e,t),e}function g(e,t){if(u.isBuffer(t)){var n=0|y(t.length);return e=c(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?c(e,0):m(e,t);if("Buffer"===t.type&&o(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function x(e){return+e!=e&&(e=0),u.alloc(+e)}function v(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function O(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return F(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function C(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:$(e,t,n,r,a);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):$(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function $(e,t,n,r,a){var o,s=1,i=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,i/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){var l=-1;for(o=n;o<i;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>i&&(n=i-c),o=n;o>=0;o--){for(var d=!0,p=0;p<c;p++)if(u(e,o+p)!==u(t,p)){d=!1;break}if(d)return o}return-1}function k(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var i=parseInt(t.substr(2*s,2),16);if(isNaN(i))return s;e[n+s]=i}return s}function I(e,t,n,r){return ee(Y(t,e.length-n),e,n,r)}function j(e,t,n,r){return ee(Q(t),e,n,r)}function E(e,t,n,r){return j(e,t,n,r)}function T(e,t,n,r){return ee(Z(t),e,n,r)}function N(e,t,n,r){return ee(J(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);var r=[],a=t;while(a<n){var o,s,i,c,u=e[a],l=null,d=u>239?4:u>223?3:u>191?2:1;if(a+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:o=e[a+1],128===(192&o)&&(c=(31&u)<<6|63&o,c>127&&(l=c));break;case 3:o=e[a+1],s=e[a+2],128===(192&o)&&128===(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:o=e[a+1],s=e[a+2],i=e[a+3],128===(192&o)&&128===(192&s)&&128===(192&i)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&i,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=d}return R(r)}t.Buffer=u,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:s(),t.kMaxLength=i(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return p(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,a),a+=s.length}return r},u.byteLength=v,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):O.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,a){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var o=a-r,s=n-t,i=Math.min(o,s),c=this.slice(r,a),l=e.slice(t,n),d=0;d<i;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":return j(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function R(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}function F(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=X(e[o]);return a}function P(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function M(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,r,a,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function V(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function z(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function U(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(e,t,n,r,o){return o||U(e,t,n,4,34028234663852886e22,-34028234663852886e22),a.write(e,t,n,r,23,4),n+4}function G(e,t,n,r,o){return o||U(e,t,n,8,17976931348623157e292,-17976931348623157e292),a.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=u.prototype;else{var a=t-e;n=new u(a,void 0);for(var o=0;o<a;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);var r=this[e],a=1,o=0;while(++o<t&&(a*=256))r+=this[e+o]*a;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);var r=this[e+--t],a=1;while(t>0&&(a*=256))r+=this[e+--t]*a;return r},u.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);var r=this[e],a=1,o=0;while(++o<t&&(a*=256))r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);var r=t,a=1,o=this[e+--r];while(r>0&&(a*=256))o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;B(this,e,t,n,a,0)}var o=1,s=0;this[t]=255&e;while(++s<n&&(o*=256))this[t+s]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;B(this,e,t,n,a,0)}var o=n-1,s=1;this[t+o]=255&e;while(--o>=0&&(s*=256))this[t+o]=e/s&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):z(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);B(this,e,t,n,a-1,-a)}var o=0,s=1,i=0;this[t]=255&e;while(++o<n&&(s*=256))e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);B(this,e,t,n,a-1,-a)}var o=n-1,s=1,i=0;this[t+o]=255&e;while(--o>=0&&(s*=256))e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):z(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return W(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return W(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return G(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return G(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,o=r-n;if(this===e&&n<t&&t<r)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:Y(new u(e,r).toString()),i=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%i]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function K(e){if(e=q(e).replace(H,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){var n;t=t||1/0;for(var r=e.length,a=null,o=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,r,a,o=[],s=0;s<e.length;++s){if((t-=2)<0)break;n=e.charCodeAt(s),r=n>>8,a=n%256,o.push(a),o.push(r)}return o}function Z(e){return r.toByteArray(K(e))}function ee(e,t,n,r){for(var a=0;a<r;++a){if(a+n>=t.length||a>=e.length)break;t[a+n]=e[a]}return a}function te(e){return e!==e}}).call(this,n("c8ba"))},b818:function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(e,t,n,r,a="NHWC",o){const i=e[3],c=[...t,i],u=x(a);return s(e,c,n,o,r,null,null,u)}function a(e,t,n,r,a,o,i="channelsLast"){const[c,u]=d(t);let l;if("channelsLast"===i)l=[c,u,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);l=[c,u,e[1],e[1]]}return s(e,l,n,r,a,o,!1,i)}function o(e,t,n,r,a,o,s="NDHWC"){const[c,u,l]=p(t);let d,f;if("NDHWC"===s)f="channelsLast",d=[c,u,l,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat "+s);f="channelsFirst",d=[c,u,l,e[1],e[1]]}return i(e,d,n,r,a,!1,f,o)}function s(e,t,n,r,a,o,s=!1,i="channelsLast"){let[c,u,l,p]=[-1,-1,-1,-1];if("channelsLast"===i)[c,u,l,p]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);[c,p,u,l]=e}const[m,b,,g]=t,[y,x]=d(n),[v,O]=d(r),w=f(m,v),C=f(b,O),{padInfo:$,outHeight:k,outWidth:I}=h(a,u,l,y,x,w,C,o,i),j=s?g*p:g;let E;return"channelsFirst"===i?E=[c,j,k,I]:"channelsLast"===i&&(E=[c,k,I,j]),{batchSize:c,dataFormat:i,inHeight:u,inWidth:l,inChannels:p,outHeight:k,outWidth:I,outChannels:j,padInfo:$,strideHeight:y,strideWidth:x,filterHeight:m,filterWidth:b,effectiveFilterHeight:w,effectiveFilterWidth:C,dilationHeight:v,dilationWidth:O,inShape:e,outShape:E,filterShape:t}}function i(e,t,n,r,a,o=!1,s="channelsLast",i){let[c,u,l,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[c,u,l,d,h]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);[c,h,u,l,d]=e}const[b,g,y,,x]=t,[v,O,w]=p(n),[C,$,k]=p(r),I=f(b,C),j=f(g,$),E=f(y,k),{padInfo:T,outDepth:N,outHeight:S,outWidth:A}=m(a,u,l,d,v,O,w,I,j,E,i),_=o?x*h:x;let R;return"channelsFirst"===s?R=[c,_,N,S,A]:"channelsLast"===s&&(R=[c,N,S,A,_]),{batchSize:c,dataFormat:s,inDepth:u,inHeight:l,inWidth:d,inChannels:h,outDepth:N,outHeight:S,outWidth:A,outChannels:_,padInfo:T,strideDepth:v,strideHeight:O,strideWidth:w,filterDepth:b,filterHeight:g,filterWidth:y,effectiveFilterDepth:I,effectiveFilterHeight:j,effectiveFilterWidth:E,dilationDepth:C,dilationHeight:$,dilationWidth:k,inShape:e,outShape:R,filterShape:t}}function c(e,t,n,r,a){null==r&&(r=l(e,t,n));const o=e[0],s=e[1],i=b((o-t+2*r)/n+1,a),c=b((s-t+2*r)/n+1,a);return[i,c]}function u(e,t,n,r,a,o){null==a&&(a=l(e,t,r));const s=e[0],i=e[1],c=e[2],u=b((s-t+2*a)/r+1,o),d=b((i-t+2*a)/r+1,o),p=b((c-t+2*a)/r+1,o);return[u,d,p,n]}function l(e,t,n,r=1){const a=f(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function d(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function p(e){return"number"===typeof e?[e,e,e]:e}function f(e,t){return t<=1?e:e+(e-1)*(t-1)}function h(e,t,n,r,a,o,s,i,u){let l,d,p;if("number"===typeof e){const a=0===e?"VALID":"NUMBER";l={top:e,bottom:e,left:e,right:e,type:a};const s=c([t,n],o,r,e,i);d=s[0],p=s[1]}else if("same"===e){d=Math.ceil(t/r),p=Math.ceil(n/a);const e=Math.max(0,(d-1)*r+o-t),i=Math.max(0,(p-1)*a+s-n),c=Math.floor(e/2),u=e-c,f=Math.floor(i/2),h=i-f;l={top:c,bottom:u,left:f,right:h,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-o+1)/r),p=Math.ceil((n-s+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: "+e);{const c="channelsLast"===u?e[1][0]:e[2][0],f="channelsLast"===u?e[1][1]:e[2][1],h="channelsLast"===u?e[2][0]:e[3][0],m="channelsLast"===u?e[2][1]:e[3][1],g=0===c&&0===f&&0===h&&0===m?"VALID":"EXPLICIT";l={top:c,bottom:f,left:h,right:m,type:g},d=b((t-o+c+f)/r+1,i),p=b((n-s+h+m)/a+1,i)}}return{padInfo:l,outHeight:d,outWidth:p}}function m(e,t,n,r,a,o,s,i,c,l,d){let p,f,h,m;if("number"===typeof e){const o=0===e?"VALID":"NUMBER";p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:o};const s=u([t,n,r,1],i,1,a,e,d);f=s[0],h=s[1],m=s[2]}else if("same"===e){f=Math.ceil(t/a),h=Math.ceil(n/o),m=Math.ceil(r/s);const e=(f-1)*a+i-t,u=(h-1)*o+c-n,d=(m-1)*s+l-r,b=Math.floor(e/2),g=e-b,y=Math.floor(u/2),x=u-y,v=Math.floor(d/2),O=d-v;p={top:y,bottom:x,left:v,right:O,front:b,back:g,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-i+1)/a),h=Math.ceil((n-c+1)/o),m=Math.ceil((r-l+1)/s)}return{padInfo:p,outDepth:f,outHeight:h,outWidth:m}}function b(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function g(e){const[t,n,r]=d(e);return 1===t&&1===n&&1===r}function y(e,t){return g(e)||g(t)}function x(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return y})),n.d(t,"g",(function(){return x}))},b838:function(e,t,n){(function(e){var r;(function(e,a,o){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=c:n("07d6")&&n("3c35")?(r=function(){return c}.call(t,n,t,a),void 0===r||(a.exports=r)):this.xor128=c})(0,e,n("07d6"))}).call(this,n("62e4")(e))},b9b9:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","equal"),c=Object(s["a"])(t,"b","equal");[n,c]=Object(o["b"])(n,c),Object(i["a"])(n.shape,c.shape);const u={a:n,b:c};return r["a"].runKernel(a["U"],u)}const l=Object(c["a"])({equal_:u})},ba40:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t){const n=Object(o["a"])(t,"indices","gatherND","int32"),s=Object(o["a"])(e,"x","gatherND"),i={params:s,indices:n};return r["a"].runKernel(a["ib"],i)}const c=Object(s["a"])({gatherND_:i})},ba53:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("deb3"),c=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t,n,c,l,d="NDHWC"){const p=Object(o["a"])(e,"x","avgPool3d","float32");let f=p,h=!1;4===p.rank&&(h=!0,f=Object(u["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),s["b"](5===f.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${f.rank}.`),s["b"]("NDHWC"===d,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+d),null!=l&&s["b"](s["v"](c),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${l} but got pad ${c}.`);const m={x:f},b={filterSize:t,strides:n,pad:c,dimRoundingMode:l,dataFormat:d};let g=r["a"].runKernel(a["p"],m,b);return g=Object(i["a"])(g,f.dtype),h?Object(u["a"])(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const d=Object(c["a"])({avgPool3d_:l})},bb2d:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","greaterEqual"),c=Object(s["a"])(t,"b","greaterEqual");[n,c]=Object(o["b"])(n,c),Object(i["a"])(n.shape,c.shape);const u={a:n,b:c};return r["a"].runKernel(a["lb"],u)}const l=Object(c["a"])({greaterEqual_:u})},bc62:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b");function o(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);const s=t.size;if(0!==t.rank&&(1!==t.rank||s!==a))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n,i=0){const c=Object(s["a"])(e,"sparseIndices","sparseToDense","int32"),u=Object(s["a"])(t,"sparseValues","sparseToDense"),l=Object(s["a"])(i,"defaultValue","sparseToDense",u.dtype);o(c,u,n,l);const d={sparseIndices:c,sparseValues:u,defaultValue:l},p={outputShape:n};return r["a"].runKernel(a["Dc"],d,p)}const u=Object(i["a"])({sparseToDense_:c})},c021:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=null,n=!1){const s=Object(o["a"])(e,"x","max"),i={x:s},c={reductionIndices:t,keepDims:n};return r["a"].runKernel(a["Db"],i,c)}const c=Object(s["a"])({max_:i})},c04e:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return h}));var r=n("6ae2"),a=n("b333"),o=n("34d7"),s=n("76c2");function i(e){Object(a["b"])().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function c(){return r["a"]}function u(e,t){return r["a"].tidy(e,t)}function l(e){const t=Object(s["a"])(e);t.forEach(e=>e.dispose())}function d(e){return r["a"].keep(e)}function p(e){return r["a"].setBackend(e)}function f(){return r["a"].backendName}function h(e,t,n=1){return r["a"].registerBackend(e,t,n)}Object(o["d"])(i)},c04ea:function(e,t,n){var r=n("861d");e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},c05b:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return f})),n.d(t,"l",(function(){return h})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"o",(function(){return g})),n.d(t,"r",(function(){return y})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return v})),n.d(t,"s",(function(){return O})),n.d(t,"t",(function(){return w})),n.d(t,"u",(function(){return C})),n.d(t,"v",(function(){return $})),n.d(t,"w",(function(){return k})),n.d(t,"x",(function(){return I})),n.d(t,"y",(function(){return j})),n.d(t,"z",(function(){return E})),n.d(t,"A",(function(){return T})),n.d(t,"B",(function(){return N})),n.d(t,"C",(function(){return S})),n.d(t,"D",(function(){return A})),n.d(t,"E",(function(){return _})),n.d(t,"F",(function(){return R})),n.d(t,"G",(function(){return F})),n.d(t,"H",(function(){return D})),n.d(t,"I",(function(){return L})),n.d(t,"K",(function(){return P})),n.d(t,"J",(function(){return M})),n.d(t,"L",(function(){return B})),n.d(t,"M",(function(){return V})),n.d(t,"N",(function(){return z})),n.d(t,"O",(function(){return U})),n.d(t,"P",(function(){return W})),n.d(t,"Q",(function(){return G})),n.d(t,"R",(function(){return H})),n.d(t,"fc",(function(){return K})),n.d(t,"S",(function(){return q})),n.d(t,"T",(function(){return X})),n.d(t,"V",(function(){return Y})),n.d(t,"U",(function(){return Q})),n.d(t,"W",(function(){return J})),n.d(t,"X",(function(){return Z})),n.d(t,"Y",(function(){return ee})),n.d(t,"Z",(function(){return te})),n.d(t,"ab",(function(){return ne})),n.d(t,"bb",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"db",(function(){return oe})),n.d(t,"fb",(function(){return se})),n.d(t,"jb",(function(){return ie})),n.d(t,"ib",(function(){return ce})),n.d(t,"kb",(function(){return ue})),n.d(t,"lb",(function(){return le})),n.d(t,"nb",(function(){return de})),n.d(t,"mb",(function(){return pe})),n.d(t,"ob",(function(){return fe})),n.d(t,"pb",(function(){return he})),n.d(t,"qb",(function(){return me})),n.d(t,"rb",(function(){return be})),n.d(t,"ub",(function(){return ge})),n.d(t,"vb",(function(){return ye})),n.d(t,"wb",(function(){return xe})),n.d(t,"xb",(function(){return ve})),n.d(t,"yb",(function(){return Oe})),n.d(t,"zb",(function(){return we})),n.d(t,"Ab",(function(){return Ce})),n.d(t,"Bb",(function(){return $e})),n.d(t,"Cb",(function(){return ke})),n.d(t,"sb",(function(){return Ie})),n.d(t,"tb",(function(){return je})),n.d(t,"Db",(function(){return Ee})),n.d(t,"Jb",(function(){return Te})),n.d(t,"Eb",(function(){return Ne})),n.d(t,"Hb",(function(){return Se})),n.d(t,"Fb",(function(){return Ae})),n.d(t,"Gb",(function(){return _e})),n.d(t,"Ib",(function(){return Re})),n.d(t,"Kb",(function(){return Fe})),n.d(t,"Lb",(function(){return De})),n.d(t,"Mb",(function(){return Le})),n.d(t,"Nb",(function(){return Pe})),n.d(t,"Ob",(function(){return Me})),n.d(t,"Pb",(function(){return Be})),n.d(t,"Qb",(function(){return Ve})),n.d(t,"Rb",(function(){return ze})),n.d(t,"Vb",(function(){return Ue})),n.d(t,"Sb",(function(){return We})),n.d(t,"Tb",(function(){return Ge})),n.d(t,"Ub",(function(){return He})),n.d(t,"Xb",(function(){return Ke})),n.d(t,"Wb",(function(){return qe})),n.d(t,"Yb",(function(){return Xe})),n.d(t,"Zb",(function(){return Ye})),n.d(t,"ac",(function(){return Qe})),n.d(t,"bc",(function(){return Je})),n.d(t,"cc",(function(){return Ze})),n.d(t,"dc",(function(){return et})),n.d(t,"ec",(function(){return tt})),n.d(t,"gc",(function(){return nt})),n.d(t,"hc",(function(){return rt})),n.d(t,"jc",(function(){return at})),n.d(t,"mc",(function(){return ot})),n.d(t,"nc",(function(){return st})),n.d(t,"kc",(function(){return it})),n.d(t,"lc",(function(){return ct})),n.d(t,"ic",(function(){return ut})),n.d(t,"oc",(function(){return lt})),n.d(t,"qc",(function(){return dt})),n.d(t,"rc",(function(){return pt})),n.d(t,"sc",(function(){return ft})),n.d(t,"tc",(function(){return ht})),n.d(t,"uc",(function(){return mt})),n.d(t,"zc",(function(){return bt})),n.d(t,"xc",(function(){return gt})),n.d(t,"yc",(function(){return yt})),n.d(t,"wc",(function(){return xt})),n.d(t,"vc",(function(){return vt})),n.d(t,"Bc",(function(){return Ot})),n.d(t,"Fc",(function(){return wt})),n.d(t,"Lc",(function(){return Ct})),n.d(t,"Cc",(function(){return $t})),n.d(t,"Ec",(function(){return kt})),n.d(t,"Ac",(function(){return It})),n.d(t,"Hc",(function(){return jt})),n.d(t,"Gc",(function(){return Et})),n.d(t,"Kc",(function(){return Tt})),n.d(t,"Dc",(function(){return Nt})),n.d(t,"Jc",(function(){return St})),n.d(t,"Mc",(function(){return At})),n.d(t,"Nc",(function(){return _t})),n.d(t,"Oc",(function(){return Rt})),n.d(t,"Pc",(function(){return Ft})),n.d(t,"Qc",(function(){return Dt})),n.d(t,"Rc",(function(){return Lt})),n.d(t,"Sc",(function(){return Pt})),n.d(t,"Tc",(function(){return Mt})),n.d(t,"Uc",(function(){return Bt})),n.d(t,"Ic",(function(){return Vt})),n.d(t,"eb",(function(){return zt})),n.d(t,"pc",(function(){return Ut})),n.d(t,"Vc",(function(){return Wt})),n.d(t,"gb",(function(){return Gt})),n.d(t,"hb",(function(){return Ht}));const r="Abs",a="Acos",o="Acosh",s="Add",i="AddN",c="All",u="Any",l="ArgMax",d="ArgMin",p="Asin",f="Asinh",h="Atan",m="Atanh",b="Atan2",g="AvgPool",y="AvgPoolGrad",x="AvgPool3D",v="AvgPool3DGrad",O="BatchMatMul",w="BatchToSpaceND",C="Bincount",$="Cast",k="Ceil",I="ClipByValue",j="Complex",E="ComplexAbs",T="Concat",N="Conv2D",S="Conv2DBackpropFilter",A="Conv2DBackpropInput",_="Conv3D",R="Conv3DBackpropFilterV2",F="Conv3DBackpropInputV2",D="Cos",L="Cosh",P="Cumsum",M="CropAndResize",B="DenseBincount",V="DepthToSpace",z="DepthwiseConv2dNative",U="DepthwiseConv2dNativeBackpropFilter",W="DepthwiseConv2dNativeBackpropInput",G="Diag",H="Dilation2D",K="RealDiv",q="Elu",X="EluGrad",Y="Erf",Q="Equal",J="Exp",Z="ExpandDims",ee="Expm1",te="FFT",ne="Fill",re="FlipLeftRight",ae="Floor",oe="FloorDiv",se="FusedBatchNorm",ie="GatherV2",ce="GatherNd",ue="Greater",le="GreaterEqual",de="Identity",pe="IFFT",fe="Imag",he="IsFinite",me="IsInf",be="IsNan",ge="LeakyRelu",ye="Less",xe="LessEqual",ve="LinSpace",Oe="Log",we="Log1p",Ce="LogicalAnd",$e="LogicalNot",ke="LogicalOr",Ie="LRN",je="LRNGrad",Ee="Max",Te="Maximum",Ne="MaxPool",Se="MaxPoolGrad",Ae="MaxPool3D",_e="MaxPool3DGrad",Re="MaxPoolWithArgmax",Fe="Mean",De="Min",Le="Minimum",Pe="MirrorPad",Me="Mod",Be="Multinomial",Ve="Multiply",ze="Neg",Ue="NotEqual",We="NonMaxSuppressionV3",Ge="NonMaxSuppressionV4",He="NonMaxSuppressionV5",Ke="OnesLike",qe="OneHot",Xe="Pack",Ye="PadV2",Qe="Pow",Je="Prelu",Ze="Prod",et="Range",tt="Real",nt="Reciprocal",rt="Relu",at="Reshape",ot="ResizeNearestNeighbor",st="ResizeNearestNeighborGrad",it="ResizeBilinear",ct="ResizeBilinearGrad",ut="Relu6",lt="Reverse",dt="Round",pt="Rsqrt",ft="ScatterNd",ht="Select",mt="Selu",bt="Slice",gt="Sin",yt="Sinh",xt="Sign",vt="Sigmoid",Ot="Softplus",wt="Sqrt",Ct="Sum",$t="SpaceToBatchND",kt="SplitV",It="Softmax",jt="SquaredDifference",Et="Square",Tt="Sub",Nt="SparseToDense",St="StridedSlice",At="Tan",_t="Tanh",Rt="Tile",Ft="TopK",Dt="Transpose",Lt="Unique",Pt="Unpack",Mt="UnsortedSegmentSum",Bt="ZerosLike",Vt="Step",zt="FromPixels",Ut="RotateWithOffset",Wt="_FusedMatMul",Gt="FusedConv2D",Ht="FusedDepthwiseConv2D"},c08f:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t,n){const i=Object(o["a"])(e,"x","clipByValue");s["b"](t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`);const c={x:i},u={clipValueMin:t,clipValueMax:n};return r["a"].runKernel(a["x"],c,u)}const u=Object(i["a"])({clipByValue_:c})},c170:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t,n,i,u=[1,1],l="NHWC"){const d=Object(o["a"])(e,"x","dilation2d"),p=Object(o["a"])(t,"filter","dilation2d");s["b"](3===d.rank||4===d.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+d.rank+"."),s["b"](3===p.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+p.rank+"."),s["b"]("NHWC"===l,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+l);let f=d,h=!1;3===d.rank&&(f=Object(c["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2]]),h=!0);const m={x:f,filter:p},b={strides:n,pad:i,dilations:u},g=r["a"].runKernel(a["R"],m,b);return h?Object(c["a"])(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const l=Object(i["a"])({dilation2d_:u})},c1a2:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","cosh"),n={x:t};return r["a"].runKernel(a["I"],n)}const c=Object(s["a"])({cosh_:i})},c22a:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("6ae2"),a=n("6ad5"),o=n("0777"),s=n("5a2c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t="float32"){if("complex64"===t){const t=i(e,"float32"),n=Object(s["a"])(e,"float32");return Object(o["a"])(t,n)}const n=Object(a["D"])(Object(a["O"])(e),t);return r["a"].makeTensor(n,e,t)}},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var r=n("da84"),a=n("ce4e"),o="__core-js_shared__",s=r[o]||a(o,{});e.exports=s},c77c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("508f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","div"),c=Object(s["a"])(t,"b","div");if([n,c]=Object(o["b"])(n,c),"int32"===n.dtype&&"int32"===c.dtype)return Object(i["a"])(n,c);const u={a:n,b:c},l={};return r["a"].runKernel(a["fc"],u,l)}const l=Object(c["a"])({div_:u})},c8ad:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c912:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){const n=Object(o["a"])(e,"x","transpose");if(null==t&&(t=n.shape.map((e,t)=>t).reverse()),s["b"](n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(e=>{s["b"](e>=0&&e<n.rank,()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t)}),n.rank<=1)return n.clone();const i={x:n},c={perm:t};return r["a"].runKernel(a["Qc"],i,c)}const u=Object(i["a"])({transpose_:c})},c9f1:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){let n=Object(s["a"])(e,"base","pow"),i=Object(s["a"])(t,"exp","pow");[n,i]=Object(o["b"])(n,i);const c={a:n,b:i};return r["a"].runKernel(a["ac"],c)}const u=Object(i["a"])({pow_:c})},ca84:function(e,t,n){var r=n("5135"),a=n("fc6a"),o=n("4d64").indexOf,s=n("d012");e.exports=function(e,t){var n,i=a(e),c=0,u=[];for(n in i)!r(s,n)&&r(i,n)&&u.push(n);while(t.length>c)r(i,n=t[c++])&&(~o(u,n)||u.push(n));return u}},cae0:function(e,t,n){(function(e){var r;(function(e,a,o){function s(e){var t=this;function n(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;while(r.length<8)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],e^=e>>>7,n=e^e<<24,e=r[a+1&7],n^=e^e>>>10,e=r[a+3&7],n^=e^e>>>3,e=r[a+4&7],n^=e^e<<7,e=r[a+7&7],e^=e<<13,n^=e^e<<9,r[a]=n,t.i=a+1&7,n},n(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=c:n("07d6")&&n("3c35")?(r=function(){return c}.call(t,n,t,a),void 0===r||(a.exports=r)):this.xorshift7=c})(0,e,n("07d6"))}).call(this,n("62e4")(e))},cc12:function(e,t,n){var r=n("da84"),a=n("861d"),o=r.document,s=a(o)&&a(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},cca6:function(e,t,n){var r=n("23e7"),a=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},cd1f:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("a3f7"),a=n("73d3"),o=n("54ef");function s(e,t,n,o,s,i){const c=Object(r["a"])(e,"x","conv2dTranspose"),u=Object(r["a"])(t,"filter","conv2dTranspose");return Object(a["a"])(n,c,u,o,s,"NHWC",i)}const i=Object(o["a"])({conv2dTranspose_:s})},cdf9:function(e,t,n){var r=n("825a"),a=n("861d"),o=n("f069");e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},ce4e:function(e,t,n){var r=n("da84"),a=n("9112");e.exports=function(e,t){try{a(r,e,t)}catch(n){r[e]=t}return t}},cef0:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","greater"),c=Object(s["a"])(t,"b","greater");[n,c]=Object(o["b"])(n,c),Object(i["a"])(n.shape,c.shape);const u={a:n,b:c};return r["a"].runKernel(a["kb"],u)}const l=Object(c["a"])({greater_:u})},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("428f"),a=n("da84"),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(a[e]):r[e]&&r[e][t]||a[e]&&a[e][t]}},d08e:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t){const n=Object(o["a"])(e,"x","reverse"),s={x:n},i={dims:t};return r["a"].runKernel(a["oc"],s,i)}const c=Object(s["a"])({reverse_:i})},d1a8:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","atanh"),n={x:t};return r["a"].runKernel(a["n"],n)}const c=Object(s["a"])({atanh_:i})},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!r.call({1:2},1);t.f=o?function(e){var t=a(this,e);return!!t&&t.enumerable}:r},d1f4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("a3f7"),a=n("6ad5"),o=n("54ef"),s=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t){const n=Object(r["a"])(e,"x","squeeze");return Object(s["a"])(n,Object(a["Q"])(n.shape,t).newShape)}const c=Object(o["a"])({squeeze_:i})},d2bb:function(e,t,n){var r=n("825a"),a=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return r(n),a(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},d303:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={};function a(e){return r[e]}},d30a:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","tan"),n={x:t};return r["a"].runKernel(a["Mc"],n)}const c=Object(s["a"])({tan_:i})},d369:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","floor"),n={x:t};return r["a"].runKernel(a["cb"],n)}const c=Object(s["a"])({floor_:i})},d44e:function(e,t,n){var r=n("9bf2").f,a=n("5135"),o=n("b622"),s=o("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},d4de:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","notEqual"),c=Object(s["a"])(t,"b","notEqual");[n,c]=Object(o["b"])(n,c),Object(i["a"])(n.shape,c.shape);const u={a:n,b:c};return r["a"].runKernel(a["Vb"],u)}const l=Object(c["a"])({notEqual_:u})},d4e4:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n("6125");n("d565");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class a{constructor(e,t,n,a,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=o||Math.random();this.random=r["alea"](s.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;while(!n){let r,a,o;do{r=2*this.random()-1,a=2*this.random()-1,o=r*r+a*a}while(o>=1||0===o);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class o{constructor(e=0,t=1,n,a){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==a&&(a=Math.random()),"number"===typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=r["alea"](a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}},d54d:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t=0){const n=Object(o["b"])(e,"tensors","stack","string_or_numeric");s["b"](n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&s["b"](t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const i=n,c={axis:t};return r["a"].runKernel(a["Yb"],i,c)}const u=Object(i["a"])({stack_:c})},d556:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},d565:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var r=n("6ae2");n("a3f7"),n("6ad5"),n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const a=.001,o=.1;function s(){return 32===r["a"].backend.floatPrecision()?a:o}function i(e,t,n){if(null==n&&(n=s()),!c(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function c(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}},d7b0:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"input","real"),n={input:t};return r["a"].runKernel(a["ec"],n)}const c=Object(s["a"])({real_:i})},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dae8:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t=0){const n=Object(o["a"])(e,"x","expandDims","string_or_numeric");s["b"](t<=n.rank,()=>"Axis must be <= rank of the tensor");const i={input:n},c={dim:t};return r["a"].runKernel(a["X"],i,c)}const u=Object(i["a"])({expandDims_:c})},db49:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=0){const n=Object(o["a"])(e,"x","argMin"),s={x:n},i={axis:t};return r["a"].runKernel(a["i"],s,i)}const c=Object(s["a"])({argMin_:i})},dbf3:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},dc59:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","asinh"),n={x:t};return r["a"].runKernel(a["k"],n)}const c=Object(s["a"])({asinh_:i})},dd7e:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("b818"),c=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t,n,c,l="NHWC",d=[1,1],p){const f=Object(o["a"])(e,"x","conv2d"),h=Object(o["a"])(t,"filter","conv2d");let m=f,b=!1;3===f.rank&&(b=!0,m=Object(u["a"])(f,[1,f.shape[0],f.shape[1],f.shape[2]])),s["b"](4===m.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${m.rank}.`),s["b"](4===h.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+h.rank+"."),null!=p&&s["b"](s["v"](c),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${p} but got pad ${c}.`);const g="NHWC"===l?m.shape[3]:m.shape[1];s["b"](g===h.shape[2],()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${h.shape[2]}.`),s["b"](i["h"](n,d),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`);const y={x:m,filter:h},x={strides:n,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p},v=r["a"].runKernel(a["B"],y,x);return b?Object(u["a"])(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const d=Object(c["a"])({conv2d_:l})},de1a:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t,n,s,i=0,c=0,u=0,l=0,d=0){const p=Object(o["a"])(e,"x","stridedSlice"),f={x:p},h={begin:t,end:n,strides:s,beginMask:i,endMask:c,ellipsisMask:u,newAxisMask:l,shrinkAxisMask:d};return r["a"].runKernel(a["Jc"],f,h)}const c=Object(s["a"])({stridedSlice_:i})},deb3:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){const n=Object(o["a"])(e,"x","cast");if(!s["B"](t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const i={x:n},c={dtype:t};return r["a"].runKernel(a["v"],i,c)}const u=Object(i["a"])({cast_:c})},df75:function(e,t,n){var r=n("ca84"),a=n("7839");e.exports=Object.keys||function(e){return r(e,a)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return t=n(a(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===o(e,-1);return e=n(a(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),o=r(n.split("/")),s=Math.min(a.length,o.length),i=s,c=0;c<s;c++)if(a[c]!==o[c]){i=c;break}var u=[];for(c=i;c<a.length;c++)u.push("..");return u=u.concat(o.slice(i)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!a){r=o;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var i=e.charCodeAt(s);if(47!==i)-1===r&&(a=!1,r=s+1),46===i?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!a){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},df81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=null,n=!1){const s=Object(o["a"])(e,"x","all","bool"),i={x:s},c={axis:t,keepDims:n};return r["a"].runKernel(a["f"],i,c)}const c=Object(s["a"])({all_:i})},e053:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("deb3"),i=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t=null,n=!1){let i=Object(o["a"])(e,"x","sum");"bool"===i.dtype&&(i=Object(s["a"])(i,"int32"));const c={x:i},u={axis:t,keepDims:n};return r["a"].runKernel(a["Lc"],c,u)}const u=Object(i["a"])({sum_:c})},e101:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("6ad5"),i=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t=5,n=1,i=1,u=.5){const l=Object(o["a"])(e,"x","localResponseNormalization");s["b"](4===l.rank||3===l.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`),s["b"](s["v"](t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let d=l,p=!1;3===l.rank&&(p=!0,d=Object(c["a"])(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const f={x:d},h={depthRadius:t,bias:n,alpha:i,beta:u},m=r["a"].runKernel(a["sb"],f,h);return p?Object(c["a"])(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const l=Object(i["a"])({localResponseNormalization_:u})},e163:function(e,t,n){var r=n("5135"),a=n("7b0b"),o=n("f772"),s=n("e177"),i=o("IE_PROTO"),c=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=a(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e1fd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(e,t){let n=Object(s["a"])(e,"a","less"),c=Object(s["a"])(t,"b","less");[n,c]=Object(o["b"])(n,c),Object(i["a"])(n.shape,c.shape);const u={a:n,b:c};return r["a"].runKernel(a["vb"],u)}const l=Object(c["a"])({less_:u})},e22c:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t,n=1,s=0){if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);const i=Object(o["a"])(e,"indices","oneHot","int32"),c={indices:i},u={depth:t,onValue:n,offValue:s};return r["a"].runKernel(a["Wb"],c,u)}const c=Object(s["a"])({oneHot_:i})},e260:function(e,t,n){"use strict";var r=n("fc6a"),a=n("44d2"),o=n("3f8c"),s=n("69f3"),i=n("7dd0"),c="Array Iterator",u=s.set,l=s.getterFor(c);e.exports=i(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},e333:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("526f"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){const n=Object(o["a"])(e,"a","logicalAnd","bool"),i=Object(o["a"])(t,"b","logicalAnd","bool");Object(s["a"])(n.shape,i.shape);const c={a:n,b:i};return r["a"].runKernel(a["Ab"],c)}const u=Object(i["a"])({logicalAnd_:c})},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e6cf:function(e,t,n){"use strict";var r,a,o,s,i=n("23e7"),c=n("c430"),u=n("da84"),l=n("d066"),d=n("fea9"),p=n("6eeb"),f=n("e2cc"),h=n("d44e"),m=n("2626"),b=n("861d"),g=n("1c0b"),y=n("19aa"),x=n("8925"),v=n("2266"),O=n("1c7e"),w=n("4840"),C=n("2cf4").set,$=n("b575"),k=n("cdf9"),I=n("44de"),j=n("f069"),E=n("e667"),T=n("69f3"),N=n("94ca"),S=n("b622"),A=n("605d"),_=n("2d00"),R=S("species"),F="Promise",D=T.get,L=T.set,P=T.getterFor(F),M=d,B=u.TypeError,V=u.document,z=u.process,U=l("fetch"),W=j.f,G=W,H=!!(V&&V.createEvent&&u.dispatchEvent),K="function"==typeof PromiseRejectionEvent,q="unhandledrejection",X="rejectionhandled",Y=0,Q=1,J=2,Z=1,ee=2,te=N(F,(function(){var e=x(M)!==String(M);if(!e){if(66===_)return!0;if(!A&&!K)return!0}if(c&&!M.prototype["finally"])return!0;if(_>=51&&/native code/.test(M))return!1;var t=M.resolve(1),n=function(e){e((function(){}),(function(){}))},r=t.constructor={};return r[R]=n,!(t.then((function(){}))instanceof n)})),ne=te||!O((function(e){M.all(e)["catch"]((function(){}))})),re=function(e){var t;return!(!b(e)||"function"!=typeof(t=e.then))&&t},ae=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;$((function(){var r=e.value,a=e.state==Q,o=0;while(n.length>o){var s,i,c,u=n[o++],l=a?u.ok:u.fail,d=u.resolve,p=u.reject,f=u.domain;try{l?(a||(e.rejection===ee&&ce(e),e.rejection=Z),!0===l?s=r:(f&&f.enter(),s=l(r),f&&(f.exit(),c=!0)),s===u.promise?p(B("Promise-chain cycle")):(i=re(s))?i.call(s,d,p):d(s)):p(r)}catch(h){f&&!c&&f.exit(),p(h)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&se(e)}))}},oe=function(e,t,n){var r,a;H?(r=V.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!K&&(a=u["on"+e])?a(r):e===q&&I("Unhandled promise rejection",n)},se=function(e){C.call(u,(function(){var t,n=e.facade,r=e.value,a=ie(e);if(a&&(t=E((function(){A?z.emit("unhandledRejection",r,n):oe(q,n,r)})),e.rejection=A||ie(e)?ee:Z,t.error))throw t.value}))},ie=function(e){return e.rejection!==Z&&!e.parent},ce=function(e){C.call(u,(function(){var t=e.facade;A?z.emit("rejectionHandled",t):oe(X,t,e.value)}))},ue=function(e,t,n){return function(r){e(t,r,n)}},le=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=J,ae(e,!0))},de=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw B("Promise can't be resolved itself");var r=re(t);r?$((function(){var n={done:!1};try{r.call(t,ue(de,n,e),ue(le,n,e))}catch(a){le(n,a,e)}})):(e.value=t,e.state=Q,ae(e,!1))}catch(a){le({done:!1},a,e)}}};te&&(M=function(e){y(this,M,F),g(e),r.call(this);var t=D(this);try{e(ue(de,t),ue(le,t))}catch(n){le(t,n)}},r=function(e){L(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Y,value:void 0})},r.prototype=f(M.prototype,{then:function(e,t){var n=P(this),r=W(w(this,M));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=A?z.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=Y&&ae(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r,t=D(e);this.promise=e,this.resolve=ue(de,t),this.reject=ue(le,t)},j.f=W=function(e){return e===M||e===o?new a(e):G(e)},c||"function"!=typeof d||(s=d.prototype.then,p(d.prototype,"then",(function(e,t){var n=this;return new M((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof U&&i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return k(M,U.apply(u,arguments))}}))),i({global:!0,wrap:!0,forced:te},{Promise:M}),h(M,F,!1,!0),m(F),o=l(F),i({target:F,stat:!0,forced:te},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),i({target:F,stat:!0,forced:c||te},{resolve:function(e){return k(c&&this===o?M:this,e)}}),i({target:F,stat:!0,forced:ne},{all:function(e){var t=this,n=W(t),r=n.resolve,a=n.reject,o=E((function(){var n=g(t.resolve),o=[],s=0,i=1;v(e,(function(e){var c=s++,u=!1;o.push(void 0),i++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--i||r(o))}),a)})),--i||r(o)}));return o.error&&a(o.value),n.promise},race:function(e){var t=this,n=W(t),r=n.reject,a=E((function(){var a=g(t.resolve);v(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}})},e893:function(e,t,n){var r=n("5135"),a=n("56ef"),o=n("06cf"),s=n("9bf2");e.exports=function(e,t){for(var n=a(t),i=s.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||i(e,l,c(t,l))}}},e89f:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e,t=0){const n=Object(o["a"])(e,"x","argMax"),s={x:n},i={axis:t};return r["a"].runKernel(a["h"],s,i)}const c=Object(s["a"])({argMax_:i})},e95a:function(e,t,n){var r=n("b622"),a=n("3f8c"),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||s[o]===e)}},eb7e:function(e,t,n){"use strict";n.r(t),n.d(t,"createScalarValue",(function(){return o})),n.d(t,"toTypedArray",(function(){return i})),n.d(t,"now",(function(){return c})),n.d(t,"fetch",(function(){return u})),n.d(t,"encodeString",(function(){return l})),n.d(t,"decodeString",(function(){return d}));var r=n("b333"),a=n("6ad5");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(e,t){return"string"===t?l(e):i([e],t)}function s(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}function i(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a["m"](e)),Object(r["b"])().getBool("DEBUG")&&a["h"](e,t),s(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type "+t)}function c(){return Object(r["b"])().platform.now()}function u(e,t){return Object(r["b"])().platform.fetch(e,t)}function l(e,t="utf-8"){return t=t||"utf-8",Object(r["b"])().platform.encode(e,t)}function d(e,t="utf-8"){return t=t||"utf-8",Object(r["b"])().platform.decode(e,t)}n.d(t,"shuffle",(function(){return a["M"]})),n.d(t,"shuffleCombo",(function(){return a["N"]})),n.d(t,"clamp",(function(){return a["i"]})),n.d(t,"nearestLargerEven",(function(){return a["H"]})),n.d(t,"sum",(function(){return a["R"]})),n.d(t,"randUniform",(function(){return a["J"]})),n.d(t,"distSquared",(function(){return a["l"]})),n.d(t,"assert",(function(){return a["b"]})),n.d(t,"assertShapesMatch",(function(){return a["e"]})),n.d(t,"assertNonNull",(function(){return a["d"]})),n.d(t,"flatten",(function(){return a["m"]})),n.d(t,"sizeFromShape",(function(){return a["O"]})),n.d(t,"isScalarShape",(function(){return a["y"]})),n.d(t,"arraysEqual",(function(){return a["a"]})),n.d(t,"isInt",(function(){return a["v"]})),n.d(t,"tanh",(function(){return a["S"]})),n.d(t,"sizeToSquarishShape",(function(){return a["P"]})),n.d(t,"createShuffledIndices",(function(){return a["k"]})),n.d(t,"rightPad",(function(){return a["L"]})),n.d(t,"repeatedTry",(function(){return a["K"]})),n.d(t,"inferFromImplicitShape",(function(){return a["s"]})),n.d(t,"parseAxisParam",(function(){return a["I"]})),n.d(t,"squeezeShape",(function(){return a["Q"]})),n.d(t,"getTypedArrayFromDType",(function(){return a["o"]})),n.d(t,"getArrayFromDType",(function(){return a["n"]})),n.d(t,"checkConversionForErrors",(function(){return a["h"]})),n.d(t,"isValidDtype",(function(){return a["B"]})),n.d(t,"hasEncodingLoss",(function(){return a["p"]})),n.d(t,"isTypedArray",(function(){return a["A"]})),n.d(t,"bytesPerElement",(function(){return a["g"]})),n.d(t,"bytesFromStringArray",(function(){return a["f"]})),n.d(t,"isString",(function(){return a["z"]})),n.d(t,"isBoolean",(function(){return a["t"]})),n.d(t,"isNumber",(function(){return a["w"]})),n.d(t,"inferDtype",(function(){return a["r"]})),n.d(t,"isFunction",(function(){return a["u"]})),n.d(t,"nearestDivisor",(function(){return a["G"]})),n.d(t,"computeStrides",(function(){return a["j"]})),n.d(t,"toNestedArray",(function(){return a["T"]})),n.d(t,"makeOnesTypedArray",(function(){return a["D"]})),n.d(t,"makeZerosTypedArray",(function(){return a["F"]})),n.d(t,"makeZerosNestedTypedArray",(function(){return a["E"]})),n.d(t,"assertNonNegativeIntegerDimensions",(function(){return a["c"]})),n.d(t,"locToIndex",(function(){return a["C"]})),n.d(t,"indexToLoc",(function(){return a["q"]})),n.d(t,"isPromise",(function(){return a["x"]}))},ee7d:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"simpleAbsImpl",(function(){return Ht})),n.d(r,"addImpl",(function(){return nn})),n.d(r,"bincountImpl",(function(){return on})),n.d(r,"bincountReduceImpl",(function(){return sn})),n.d(r,"ceilImpl",(function(){return ln})),n.d(r,"concatImpl",(function(){return pn})),n.d(r,"expImpl",(function(){return fn})),n.d(r,"expm1Impl",(function(){return mn})),n.d(r,"floorImpl",(function(){return gn})),n.d(r,"gatherV2Impl",(function(){return xn})),n.d(r,"greaterImpl",(function(){return vn})),n.d(r,"lessImpl",(function(){return wn})),n.d(r,"linSpaceImpl",(function(){return $n})),n.d(r,"logImpl",(function(){return kn})),n.d(r,"maxImpl",(function(){return jn})),n.d(r,"maximumImpl",(function(){return En})),n.d(r,"minimumImpl",(function(){return Nn})),n.d(r,"multiplyImpl",(function(){return An})),n.d(r,"negImpl",(function(){return Fn})),n.d(r,"notEqualImpl",(function(){return Ln})),n.d(r,"prodImpl",(function(){return Vn})),n.d(r,"rangeImpl",(function(){return Un})),n.d(r,"rsqrtImpl",(function(){return Wn})),n.d(r,"sliceImpl",(function(){return Hn})),n.d(r,"squaredDifferenceImpl",(function(){return qn})),n.d(r,"stridedSliceImpl",(function(){return Yn})),n.d(r,"subImpl",(function(){return Qn})),n.d(r,"tileImpl",(function(){return er})),n.d(r,"topKImpl",(function(){return tr})),n.d(r,"transposeImpl",(function(){return Mn})),n.d(r,"uniqueImpl",(function(){return nr}));var a=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o={},s={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function i(e,t){o[e]=t}function c(e){if(!(e in o)){const t=l(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;o[e]=t}const t=o[e];return t.isContextLost()?(delete o[e],c(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),o[e])}function u(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function l(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=u(e);return t.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete o[e]},!1),1===e?t.getContext("webgl",s)||t.getContext("experimental-webgl",s):t.getContext("webgl2",s)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var d,p,f;function h(e,t){return[t,e]}function m(e,t){return e*t}function b(e){const t=a["Ld"].sizeFromShape(e),n=Math.ceil(t/4);return a["Ld"].sizeToSquarishShape(n)}function g(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function y(e,t){const[n,r]=g(e,t);return n*r*4}function x(e,t){const n=e;let r,o,s,i,c,u,l,d,p,f;return 2===Object(a["ld"])().getNumber("WEBGL_VERSION")?(r=n.R32F,o=n.R16F,s=n.RGBA16F,i=n.RGBA32F,c=n.RED,l=4,d=1,p=n.HALF_FLOAT,f=n.FLOAT):(r=e.RGBA,o=e.RGBA,s=e.RGBA,i=n.RGBA,c=e.RGBA,l=4,d=4,p=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT),u=e.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:c,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:d,textureTypeHalfFloat:p,textureTypeFloat:f}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v(e,t){const n=t();return Object(a["ld"])().getBool("DEBUG")&&O(e),n}function O(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+k(e,t))}(function(e){e[e["DENSE"]=0]="DENSE",e[e["SHARED_BATCH"]=1]="SHARED_BATCH"})(d||(d={})),function(e){e[e["RENDER"]=0]="RENDER",e[e["UPLOAD"]=1]="UPLOAD",e[e["PIXELS"]=2]="PIXELS",e[e["DOWNLOAD"]=3]="DOWNLOAD"}(p||(p={})),function(e){e[e["UNPACKED_FLOAT16"]=0]="UNPACKED_FLOAT16",e[e["UNPACKED_FLOAT32"]=1]="UNPACKED_FLOAT32",e[e["PACKED_4X1_UNSIGNED_BYTE"]=2]="PACKED_4X1_UNSIGNED_BYTE",e[e["PACKED_2X2_FLOAT32"]=3]="PACKED_2X2_FLOAT32",e[e["PACKED_2X2_FLOAT16"]=4]="PACKED_2X2_FLOAT16"}(f||(f={}));const w=5.96e-8,C=65504;function $(e){return!!(Object(a["ld"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||w<Math.abs(e)&&Math.abs(e)<C)}function k(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function I(e,t){return q(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function j(e,t){const n=q(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(v(e,()=>e.shaderSource(n,t)),v(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function E(e,t){const n=q(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(v(e,()=>e.shaderSource(n,t)),v(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw N(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const T=/ERROR: [0-9]+:([0-9]+):/g;function N(e,t){const n=T.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);const r=+n[1],o=e.split("\n"),s=o.length.toString().length+2,i=o.map((e,t)=>a["Ld"].rightPad((t+1).toString(),s)+e);let c=0;for(let a=0;a<i.length;a++)c=Math.max(i[a].length,c);const u=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+a["Ld"].rightPad(l[0],c),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function S(e){return q(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function A(e,t){if(v(e,()=>e.linkProgram(t)),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function _(e,t){if(v(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function R(e,t){const n=q(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return v(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),v(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function F(e,t){const n=q(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return v(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),v(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function D(e){return q(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function L(e,t){const n=Object(a["ld"])().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n=`[${e}x${t}]`;throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r=`[${e}x${t}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function P(e){return q(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function M(e,t,n,r,a,o,s){const i=e.getAttribLocation(t,n);return-1!==i&&(v(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),v(e,()=>e.vertexAttribPointer(i,a,e.FLOAT,!1,o,s)),v(e,()=>e.enableVertexAttribArray(i)),!0)}function B(e,t,n){X(e,n),v(e,()=>e.activeTexture(e.TEXTURE0+n)),v(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function V(e,t,n){return q(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function z(e,t,n){return e.getUniformLocation(t,n)}function U(e,t,n,r){v(e,()=>B(e,t,r)),v(e,()=>e.uniform1i(n,r))}function W(e,t,n){v(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),v(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function G(e,t){v(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),v(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function H(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+K(e,t))}function K(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function q(e,t,n){const r=v(e,()=>t());if(null==r)throw new Error(n);return r}function X(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${e}.`)}}function Y(e,t=2){return a["Ld"].sizeFromShape(e.slice(0,e.length-t))}function Q(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function J(e){let t=[1,1,1];const n=0===e.length||1===e.length&&1===e[0];return n||(t=[Y(e),...Q(e)]),t}function Z(e,t=!1){let n=Object(a["ld"])().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map((t,n)=>n>=e.length-2?a["Ld"].nearestLargerEven(e[n]):e[n]),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=a["Ld"].squeezeShape(e);e=t.newShape}let r=a["Ld"].sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=Y(e);let n=2,o=2;return e.length&&([n,o]=Q(e)),r=t*(n/2)*(o/2),a["Ld"].sizeToSquarishShape(r).map(e=>2*e)}return a["Ld"].sizeToSquarishShape(r)}function ee(e){return e%2===0}function te(e,t){if(e=e.slice(-2),t=t.slice(-2),a["Ld"].arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(ee(n)&&ee(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&ee(e[0])&&ee(t[0])}let ne,re;function ae(e){if(null==ne){const t=c(e);ne=t.getParameter(t.MAX_TEXTURE_SIZE)}return ne}function oe(e){if(null==re){const t=c(e);re=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,re)}function se(e){if(0===e)return 0;let t;const n=c(e);return t=ie(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:ie(n,"EXT_disjoint_timer_query")?1:0,t}function ie(e,t){const n=e.getExtension(t);return null!=n}function ce(e){try{const t=c(e);if(null!=t)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function ue(e){if(0===e)return!1;const t=c(e);if(1===e){if(!ie(t,"OES_texture_float"))return!1}else if(!ie(t,"EXT_color_buffer_float"))return!1;const n=de(t);return n}function le(e){if(0===e)return!1;const t=c(e);if(1!==e){if(ie(t,"EXT_color_buffer_float"))return de(t);const e="EXT_color_buffer_half_float";if(ie(t,e)){const n=t.getExtension(e);return pe(t,n)}return!1}if(!ie(t,"OES_texture_float"))return!1;if(!ie(t,"WEBGL_color_buffer_float"))return!1;const n=de(t);return n}function de(e){const t=x(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const r=1,a=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,r,a,0,t.textureFormatFloat,t.textureTypeFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),s}function pe(e,t){const n=x(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),i}function fe(e){if(2!==e)return!1;const t=c(e),n=null!=t.fenceSync;return n}function he(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&a["Ld"].assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the WebGL backend.")})}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const me=Object(a["ld"])();
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function be(){let e,t,n,r,o,s,i,c,u,l;return 2===Object(a["ld"])().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",s="outputColor",i="out vec4 outputColor;",c="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",s="gl_FragColor",i="",c="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:c,defineSpecialInf:u,defineRound:l}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ge(e,t,n="index"){const r=a["Ld"].computeStrides(t);return r.map((t,a)=>{const o=`int ${e[a]} = ${n} / ${t}`,s=a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${t}`:`index -= ${e[a]} * ${t}`;return`${o}; ${s};`}).join("")}function ye(e){const t=a["Ld"].computeStrides(e).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}me.registerFlag("HAS_WEBGL",()=>me.getNumber("WEBGL_VERSION")>0),me.registerFlag("WEBGL_VERSION",()=>ce(2)?2:ce(1)?1:0),me.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),me.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===me.get("WEBGL_VERSION")),me.registerFlag("WEBGL_CPU_FORWARD",()=>!0),me.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),me.registerFlag("WEBGL_PACK",()=>me.getBool("HAS_WEBGL")),me.registerFlag("WEBGL_PACK_NORMALIZATION",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_PACK_CLIP",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),me.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_PACK_REDUCE",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_LAZILY_UNPACK",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_CONV_IM2COL",()=>me.getBool("WEBGL_PACK")),me.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>ae(me.getNumber("WEBGL_VERSION"))),me.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>oe(me.getNumber("WEBGL_VERSION"))),me.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=me.getNumber("WEBGL_VERSION");return 0===e?0:se(e)}),me.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>me.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!a["id"].isMobile()),me.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>ue(me.getNumber("WEBGL_VERSION"))),me.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!me.getBool("WEBGL_FORCE_F16_TEXTURES")&&me.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),me.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>le(me.getNumber("WEBGL_VERSION"))),me.registerFlag("WEBGL_FENCE_API_ENABLED",()=>fe(me.getNumber("WEBGL_VERSION"))),me.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{const e=me.getBool("WEBGL_RENDER_FLOAT32_ENABLED");return e?4:0}),me.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)}),me.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});const xe="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ve{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=d.DENSE;const t=b(e),n=be();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${ge(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=d.DENSE;const t=b(e),n=be();this.outputShape=e,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${ge(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${t[0]}, ${t[1]}));\n        int index = 4 * (resTexRC.x * ${t[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class we{constructor(e){this.variableNames=["A"],this.outTexUsage=p.DOWNLOAD;const t=be();this.outputShape=e,this.userCode=`\n      ${xe}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ce{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=p.DOWNLOAD;const t=be();this.outputShape=e,this.userCode=`\n      ${xe}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $e{constructor(e,t,n=!1){this.variableNames=["A"];const r=be(),[a,o]=t;this.outputShape=e;let s="result";n&&(s="floor(result * 255. + 0.5)"),this.userCode=`\n      ${ye(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${o};\n        int c = imod(flatIndex, ${o});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${o}.0, ${a}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${s}, 0., 0., 0.);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ke{constructor(e,t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=be(),[a,o]=t;this.outputShape=e;let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let c=0;c<=1;c++)for(let t=0;t<=1;t++){const n=2*c+t;s+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${e[2]}) {\n            localCoords[2] += ${t};\n            if(localCoords[1] + ${c} < ${e[1]}) {\n              localCoords[1] += ${c};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${o};\n              c = imod(flatIndex, ${o});\n              uv = (vec2(c, r) + halfCR) / vec2(${o}.0, ${a}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${ye(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${s}\n\n        ${r.output} = ${i};\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ie(e){const t=be(),n=`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return j(e,n)}function je(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return R(e,t)}function Ee(e){const t=new Uint16Array([0,1,2,2,1,3]);return F(e,t)}function Te(e,t,n,r,a,o){L(t,n);const s=D(e),i=e.TEXTURE_2D;return v(e,()=>e.bindTexture(i,s)),v(e,()=>e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),v(e,()=>e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),v(e,()=>e.texParameteri(i,e.TEXTURE_MIN_FILTER,e.NEAREST)),v(e,()=>e.texParameteri(i,e.TEXTURE_MAG_FILTER,e.NEAREST)),v(e,()=>e.texImage2D(i,0,r,t,n,0,a,o,null)),v(e,()=>e.bindTexture(e.TEXTURE_2D,null)),s}function Ne(e){return e.internalFormatFloat}function Se(e,t,n,r){const[a,o]=h(t,n);return Te(e,a,o,Ne(r),r.textureFormatFloat,e.FLOAT)}function Ae(e){return e.internalFormatHalfFloat}function _e(e,t,n,r){const[a,o]=h(t,n);return Te(e,a,o,Ae(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Re(e){return e.downloadTextureFormat}function Fe(e,t,n,r){const[a,o]=h(t,n);return Te(e,a,o,Re(r),e.RGBA,e.UNSIGNED_BYTE)}function De(e){return e.internalFormatPackedFloat}function Le(e,t,n,r){const[a,o]=g(t,n);return Te(e,a,o,De(r),e.RGBA,e.FLOAT)}function Pe(e){return e.internalFormatPackedHalfFloat}function Me(e,t,n,r){const[a,o]=g(t,n);return Te(e,a,o,Pe(r),e.RGBA,r.textureTypeHalfFloat)}function Be(e,t,n){const r=0,a=12,o=20;v(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n));const s=M(e,t,"clipSpacePos",n,3,o,r);return s&&M(e,t,"uv",n,2,o,a)}function Ve(e,t,n,r,a,o){let s,i,c;v(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(s=new Uint8Array(n*r*4),i=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(n*r*4),i=e.FLOAT,c=o.internalFormatPackedFloat),s.set(a),v(e,()=>e.texImage2D(e.TEXTURE_2D,0,c,n,r,0,e.RGBA,i,s)),v(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function ze(e,t,n){v(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?v(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):v(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),v(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Ue(e,t,n,r){const a=e.createBuffer();v(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));const o=4,s=4,i=o*s*t*n;return v(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),v(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),v(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}function We(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Ge(e,t,n,r){const[a,o]=h(t,n),s=4,i=new Uint8Array(m(t*n,s));return v(e,()=>e.readPixels(0,0,a,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}function He(e,t,n,r,a,o,s,i){const c=e,u=new Float32Array(y(o,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,u),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),u}function Ke(e,t,n){const r=new Float32Array(t*n*4);return v(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qe{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=Object(a["ld"])().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,i(t,e)):this.gl=c(t);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(1===Object(a["ld"])().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=I(this.gl,e),ie(this.gl,t))this.textureHalfFloatExtension=I(this.gl,t);else if(Object(a["ld"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),ie(this.gl,r))this.colorBufferHalfFloatExtension=I(this.gl,r);else if(Object(a["ld"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",ie(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!ie(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=je(this.gl),this.indexBuffer=Ee(this.gl),this.framebuffer=P(this.gl),this.textureConfig=x(this.gl,this.textureHalfFloatExtension)}get debug(){return Object(a["ld"])().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;v(e,()=>e.finish()),v(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),v(e,()=>e.deleteFramebuffer(this.framebuffer)),v(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),v(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),v(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),Se(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),_e(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),Fe(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),ze(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),Ve(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),Me(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),Le(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(G(this.gl,this.framebuffer),this.outputTexture=null),v(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>Ge(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,o){return He(this.gl,e,t,n,r,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return We(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=Ue(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Object(a["ld"])().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>Ke(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl,n=E(t,e),r=Ie(t),a=S(t);return v(t,()=>t.attachShader(a,r)),v(t,()=>t.attachShader(a,n)),A(t,a),this.debug&&_(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=Be(t,this.program,this.vertexBuffer)),a}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&v(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&_(this.gl,this.program),v(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?V(this.gl,e,t):z(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),v(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),U(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=g(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&_(this.gl,this.program),H(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),v(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),v(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=I(this.gl,2===Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await a["Ld"].repeatedTry(()=>this.disposed||this.isQueryAvailable(e,Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl,n=t.getQueryParameter(e,t.QUERY_RESULT);return n/1e6}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT);return n/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=Xe(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||a["Ld"].repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),W(this.gl,e,this.framebuffer),this.debug&&H(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(W(this.gl,this.outputTexture,this.framebuffer),this.debug&&H(this.gl)):G(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;W(r,e,this.framebuffer),this.debug&&H(r),this.outputTexture=e,v(r,()=>r.viewport(0,0,t,n)),v(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),v(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function Xe(e){let t=0;for(;t<e.length;++t){const n=e[t]();if(!n)break}return t-1}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Ye}=a["bd"];function Qe(e,t,n,r){const o=[];e.forEach(e=>{const t=a["Ld"].sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?o.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(o.push(`uniform sampler2D ${e.name};`),o.push(`uniform int offset${e.name};`))});const s=o.join("\n"),i=e.map(e=>et(e,t,r)).join("\n"),c=t.texShape,u=be(),l=rt(u);let d,p,f=st(u);t.isPacked?(d=tt(t.logicalShape,c),p=ot(u)):(d=nt(t.logicalShape,c),p=at(u)),r&&(f+=lt);const h=[f,l,p,s,d,i,n].join("\n");return h}function Je(e){const t=e.shapeInfo.logicalShape;switch(t.length){case 0:return $t(e);case 1:return It(e);case 2:return Et(e);case 3:return Nt(e);case 4:return At(e);case 5:return _t(e);case 6:return Rt(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Ze(e){const t=e.shapeInfo.logicalShape;switch(t.length){case 0:return Ct(e);case 1:return kt(e);case 2:return jt(e);case 3:return Tt(e);default:return St(e)}}function et(e,t,n=!1){let r="";r+=n?Ze(e):Je(e);const a=e.shapeInfo.logicalShape,o=t.logicalShape;return a.length<=o.length&&(r+=n?Dt(e,t):Lt(e,t)),r}function tt(e,t){switch(e.length){case 0:return dt();case 1:return pt(e,t);case 2:return vt(e,t);case 3:return ht(e,t);default:return bt(e,t)}}function nt(e,t){switch(e.length){case 0:return dt();case 1:return ft(e,t);case 2:return Ot(e,t);case 3:return mt(e,t);case 4:return gt(e,t);case 5:return yt(e,t);case 6:return xt(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}}function rt(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}function at(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}function ot(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}function st(e){const t=`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${it}\n    ${ct}\n    ${ut}\n  `;return t}const it="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ct="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ut="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",lt="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function dt(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function pt(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}function ft(e,t){return 1===t[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}function ht(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function mt(e,t){const n=ge(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}function bt(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2);let o=a,s="",i="b, r, c";for(let c=2;c<e.length-1;c++)o*=e[e.length-c-1],s=`\n      int b${c} = index / ${o};\n      index -= b${c} * ${o};\n    `+s,i=`b${c}, `+i;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${e.length}(${i});\n    }\n  `}function gt(e,t){const n=ge(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}function yt(e,t){const n=ge(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function xt(e,t){const n=ge(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function vt(e,t){const n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(a["Ld"].arraysEqual(e,t))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const r=Math.ceil(e[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function Ot(e,t){return a["Ld"].arraysEqual(e,t)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}function wt(e){return"offset"+e}function Ct(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=be();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}function $t(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${n}() {return ${t};}`;const[r,a]=e.shapeInfo.texShape;if(1===r&&1===a)return`\n      float ${n}() {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const[o,s]=e.shapeInfo.texShape,i=wt(t);return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${o}, ${s}, ${i});\n      return sampleTexture(${t}, uv);\n    }\n  `}function kt(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=be();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${o.texture2D}(${t}, uv);\n    }\n  `}function It(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${Ft(e)}\n      }\n    `;const r=e.shapeInfo.texShape,a=r[0],o=r[1];if(1===o&&1===a)return`\n      float ${n}(int index) {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;const s=wt(t);return 1===o?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:1===a?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${o}, index + ${s});\n      return sampleTexture(${t}, uv);\n    }\n  `}function jt(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,s=o[0],i=o[1],c=be();if(null!=o&&a["Ld"].arraysEqual(t,o))return`\n      vec4 ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${s}.0);\n\n        return ${c.texture2D}(${n}, uv);\n      }\n    `;const u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(t[1]/2);return`\n    vec4 ${r}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${l}, ${u[0]}, ${u[1]}, row, col);\n      return ${c.texture2D}(${n}, uv);\n    }\n  `}function Et(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape;if(null!=o&&a["Ld"].arraysEqual(t,o)){const e=o[0],t=o[1];return`\n    float ${r}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${t}.0, ${e}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `}const{newShape:s,keptDims:i}=a["Ld"].squeezeShape(t),c=s;if(c.length<t.length){const t=Mt(e,c),n=["row","col"];return`\n      ${Je(t)}\n      float ${r}(int row, int col) {\n        return ${r}(${Bt(n,i)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));\n        ${Ft(e)}\n      }\n    `;const u=o[0],l=o[1],d=wt(n);return 1===l?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:1===u?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${l}.0, 0.5);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n  float ${r}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${t[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${u}, ${l}, index);\n    return sampleTexture(${n}, uv);\n  }\n`}function Tt(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){const n=t.slice(1),a=[1,2],o=Mt(e,n),s=["b","row","col"];return`\n        ${Ze(o)}\n        vec4 ${r}(int b, int row, int col) {\n          return ${r}(${Bt(s,a)});\n        }\n      `}const s=o[0],i=o[1],c=Math.ceil(t[2]/2),u=c*Math.ceil(t[1]/2),l=be();return`\n    vec4 ${r}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${s}, ${i}, ${u}, ${c}, b, row, col);\n      return ${l.texture2D}(${n}, uv);\n    }\n  `}function Nt(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[1]*t[2],s=t[2],{newShape:i,keptDims:c}=a["Ld"].squeezeShape(t),u=i;if(u.length<t.length){const t=Mt(e,u),n=["row","col","depth"];return`\n        ${Je(t)}\n        float ${r}(int row, int col, int depth) {\n          return ${r}(${Bt(n,c)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${s}, 1)));\n        ${Ft(e)}\n      }\n    `;const l=e.shapeInfo.texShape,d=l[0],p=l[1],f=e.shapeInfo.flatOffset;if(p===o&&null==f)return`\n        float ${r}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${s}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${p}.0, ${d}.0);\n          return sampleTexture(${n}, uv);\n        }\n      `;if(p===s&&null==f)return`\n    float ${r}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `;const h=wt(n);return`\n      float ${r}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${s} + depth + ${h};\n        vec2 uv = uvFromFlat(${d}, ${p}, index);\n        return sampleTexture(${n}, uv);\n      }\n  `}function St(e){const t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],i=s[0],c=s[1],u=Math.ceil(t[n-1]/2);let l=u*Math.ceil(t[n-2]/2),d="int b, int row, int col",p=`b * ${l} + (row / 2) * ${u} + (col / 2)`;for(let h=2;h<n-1;h++)d=`int b${h}, `+d,l*=t[n-h-1],p=`b${h} * ${l} + `+p;const f=be();return`\n    vec4 ${a}(${d}) {\n      int index = ${p};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${i});\n      return ${f.texture2D}(${r}, uv);\n    }\n  `}function At(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[3],s=t[2]*o,i=t[1]*s,{newShape:c,keptDims:u}=a["Ld"].squeezeShape(t);if(c.length<t.length){const t=Mt(e,c),n=["row","col","depth","depth2"];return`\n      ${Je(t)}\n      float ${r}(int row, int col, int depth, int depth2) {\n        return ${r}(${Bt(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${i}, ${s}, ${o}, 1)));\n        ${Ft(e)}\n      }\n    `;const l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===i&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${s}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===o&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${t[1]*t[2]}, ${t[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const h=wt(n);return`\n    float ${r}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${i} + col * ${s} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${p}, ${f}, index + ${h});\n      return sampleTexture(${n}, uv);\n    }\n  `}function _t(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],s=t[3]*o,i=t[2]*s,c=t[1]*i,{newShape:u,keptDims:l}=a["Ld"].squeezeShape(t);if(u.length<t.length){const t=Mt(e,u),n=["row","col","depth","depth2","depth3"];return`\n      ${Je(t)}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${Bt(n,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${i}, ${s}, ${o})) +\n          depth3;\n        ${Ft(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],h=p[1];if(h===c&&null==d)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${s}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===o&&null==d)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=wt(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${i} + depth * ${s} +\n          depth2 * ${o} + depth3 + ${m};\n      vec2 uv = uvFromFlat(${f}, ${h}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function Rt(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:s}=a["Ld"].squeezeShape(t);if(o.length<t.length){const t=Mt(e,o),n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${Je(t)}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${Bt(n,s)});\n      }\n    `}const i=t[5],c=t[4]*i,u=t[3]*c,l=t[2]*u,d=t[1]*l;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${d}, ${l}, ${u}, ${c})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${Ft(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1];if(m===d&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${l}, ${u}, ${c}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(m===i&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const b=wt(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${d} + col * ${l} + depth * ${u} +\n          depth2 * ${c} + depth3 * ${i} + depth4 + ${b};\n      vec2 uv = uvFromFlat(${h}, ${m}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function Ft(e){const t=e.name,n=a["Ld"].sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function Dt(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,c=Ye(e.shapeInfo.logicalShape,t.logicalShape),u=Pt(i),l=i-s;let d;const p=["x","y","z","w","u","v"];d=0===s?"":i<2&&c.length>=1?"coords = 0;":c.map(e=>`coords.${p[e+l]} = 0;`).join("\n");let f="";f=i<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+p[t+l]).join(", ");let h="return outputValue;";const m=a["Ld"].sizeFromShape(e.shapeInfo.logicalShape),b=1===m,g=a["Ld"].sizeFromShape(t.logicalShape),y=1===g;if(1!==s||b||y){if(b&&!y)h=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){const e=s-2,t=s-1;c.indexOf(e)>-1&&c.indexOf(t)>-1?h="return vec4(outputValue.x);":c.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${o}() {\n      ${u} coords = getOutputCoords();\n      ${d}\n      vec4 outputValue = get${r}(${f});\n      ${h}\n    }\n  `}function Lt(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=t.texShape,i=e.shapeInfo.texShape,c=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&c===u&&null==e.shapeInfo.flatOffset&&a["Ld"].arraysEqual(i,s))return`\n      float ${o}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const l=Pt(u),d=Ye(e.shapeInfo.logicalShape,t.logicalShape),p=u-c;let f;const h=["x","y","z","w","u","v"];f=0===c?"":u<2&&d.length>=1?"coords = 0;":d.map(e=>`coords.${h[e+p]} = 0;`).join("\n");let m="";return m=u<2&&c>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+h[t+p]).join(", "),`\n    float ${o}() {\n      ${l} coords = getOutputCoords();\n      ${f}\n      return get${r}(${m});\n    }\n  `}function Pt(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Mt(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Bt(e,t){return t.map(t=>e[t]).join(", ")}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vt(e,t,n,r){const o=t.userCode,s=n.map((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=s.map(e=>e.shapeInfo),c={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Qe(s,c,o,t.packedInputs),l=e.createProgram(u);let d=null;const p=e.getUniformLocation(l,"NAN",!1);1===Object(a["ld"])().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(l,"INFINITY",!1));const f={};for(let a=0;a<t.variableNames.length;a++){const n=t.variableNames[a],r=!1;f[n]=e.getUniformLocation(l,n,r),f["offset"+n]=e.getUniformLocation(l,"offset"+n,r)}return{program:t,source:u,webGLProgram:l,uniformLocations:f,inShapeInfos:i,outShapeInfo:c,infLoc:d,nanLoc:p}}function zt(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((e,n)=>{const r=e.logicalShape,o=t[n],s=o.shape;if(!a["Ld"].arraysEqual(r,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${s} must match`);if(e.isUniform&&o.isUniform)return;const i=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!a["Ld"].arraysEqual(i,c))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${c} must match`)})}function Ut(e,t,n,r,o){zt(t.inShapeInfos,n),zt([t.outShapeInfo],[r]);const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s,i[0],i[1]):e.setOutputMatrixTexture(s,i[0],i[1]),e.setProgram(t.webGLProgram),1===Object(a["ld"])().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((n,r)=>{const o=t.program.variableNames[r],s=t.uniformLocations[o],i=t.uniformLocations["offset"+o];if(null!=s)if(n.isUniform)if(a["Ld"].sizeFromShape(n.shape)<2)e.gl.uniform1f(s,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,s,r)}),null!=o&&o(e,t.webGLProgram),e.executeProgram()}function Wt(e,t,n){let r="";t.concat(n).forEach(e=>{const t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=`${e.shape}_${n}_${t}`});const a=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+a,o}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gt(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&a["Ld"].assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the CPU backend.")})}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ht(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const Kt=e=>{const{x:t}=e.inputs,n=e.backend;Gt(t,"abs");let r=new Float32Array(a["Ld"].sizeFromShape(t.shape));const o=n.data.get(t.dataId).values;return r=Ht(o),n.makeOutput(r,t.shape,"float32")};a["a"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qt(e){return(t,n,r,o,s)=>{const i=a["bd"].assertAndGetBroadcastShape(t,n),c=i.length,u=a["Ld"].computeStrides(i),l=a["Ld"].sizeFromShape(i),d=a["Ld"].getTypedArrayFromDType(s,l),p=t.length,f=n.length,h=a["Ld"].computeStrides(t),m=a["Ld"].computeStrides(n),b=a["bd"].getBroadcastDims(t,i),g=a["bd"].getBroadcastDims(n,i);if(b.length+g.length===0)for(let a=0;a<d.length;++a)d[a]=e(r[a%r.length],o[a%o.length]);else for(let y=0;y<d.length;++y){const t=a["Ld"].indexToLoc(y,c,u),n=t.slice(-p);b.forEach(e=>n[e]=0);const s=a["Ld"].locToIndex(n,p,h),i=t.slice(-f);g.forEach(e=>i[e]=0);const l=a["Ld"].locToIndex(i,f,m);d[y]=e(r[s],o[l])}return[d,i]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xt(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,i=n.makeTensorInfo(r.shape,"complex64"),c=n.data.get(i.dataId);return c.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",s)},i}a["y"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(e,t,n="float32"){if("complex64"===n){const n=Yt(e,t,"float32"),r=Yt(e,t,"float32");return Xt({inputs:{real:n,imag:r},backend:e})}const r=a["Ld"].makeZerosTypedArray(a["Ld"].sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qt(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}a["ob"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jt(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}a["gc"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zt(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:s}=r;if("complex64"===s){if("complex64"===o.dtype)return Qt({inputs:{x:o},backend:n});const e=Yt(n,o.shape,o.dtype),t=Zt({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=Xt({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=Jt({inputs:{input:o},backend:n}),t=Zt({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!a["Ld"].hasEncodingLoss(o.dtype,s)){const e=Qt({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}if("int32"===s){const e=n.data.get(o.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(o.shape,"int32",t)}if("bool"===s){const e=n.data.get(o.dataId).values,t=a["Ld"].toTypedArray([0],o.dtype),[r,s]=qt((e,t)=>e!==t?1:0)(o.shape,[],e,t,"bool");return n.makeTensorInfo(s,"bool",r)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}a["v"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function en(e,t,n,r){return null==n?({inputs:n,backend:a})=>{const{a:o,b:s}=n,i=a;Gt([o,s],e);const c=i.data.get(o.dataId).values,u=i.data.get(s.dataId).values,l=r||o.dtype,[d,p]=t(o.shape,s.shape,c,u,l);return i.makeTensorInfo(p,l,d)}:({inputs:e,backend:a})=>{const{a:o,b:s}=e,i=a;if("complex64"===o.dtype||"complex64"===s.dtype){const e=Zt({inputs:{x:o},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,c=i.data.get(r.dataId).values,u=i.data.get(a.dataId).values,l=Zt({inputs:{x:s},backend:i,attrs:{dtype:"complex64"}}),d=i.data.get(l.dataId),p=d.complexTensorInfos.real,f=d.complexTensorInfos.imag,h=i.data.get(p.dataId).values,m=i.data.get(f.dataId).values,[b,g,y]=n(o.shape,s.shape,c,u,h,m),x=i.makeTensorInfo(y,"float32",b),v=i.makeTensorInfo(y,"float32",g),O=Xt({inputs:{real:x,imag:v},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(l),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(v),O}{const e=i.data.get(o.dataId).values,n=i.data.get(s.dataId).values,a=r||o.dtype,[c,u]=t(o.shape,s.shape,e,n,a);return i.makeTensorInfo(u,a,c)}}}function tn(e){return(t,n,r,o,s,i)=>{const c=a["bd"].assertAndGetBroadcastShape(t,n),u=a["Ld"].sizeFromShape(c),l=c.length,d=a["Ld"].computeStrides(c),p=a["Ld"].getTypedArrayFromDType("float32",u),f=a["Ld"].getTypedArrayFromDType("float32",u),h=a["bd"].getBroadcastDims(t,c),m=a["bd"].getBroadcastDims(n,c),b=a["bd"].mergeRealAndImagArrays(r,o),g=a["bd"].mergeRealAndImagArrays(s,i),y=t.length,x=a["Ld"].computeStrides(t),v=n.length,O=a["Ld"].computeStrides(n);if(h.length+m.length===0)for(let a=0;a<p.length;a++){const t=a%b.length,n=a%g.length,r=e(b[2*t],b[2*t+1],g[2*n],g[2*n+1]);p[a]=r.real,f[a]=r.imag}else for(let w=0;w<p.length;w++){const t=a["Ld"].indexToLoc(w,l,d),n=t.slice(-y);h.forEach(e=>n[e]=0);const r=a["Ld"].locToIndex(n,y,x),o=t.slice(-v);m.forEach(e=>o[e]=0);const s=a["Ld"].locToIndex(o,v,O),i=e(b[2*r],b[2*r+1],g[2*s],g[2*s+1]);p[w]=i.real,f[w]=i.imag}return[p,f,c]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nn=qt((e,t)=>e+t),rn=tn((e,t,n,r)=>({real:e+n,imag:t+r})),an=en(a["d"],nn,rn);a["d"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function on(e,t,n,r,o){const s=a["Ld"].sizeFromShape(r),i=a["Ld"].makeZerosTypedArray(o,n);for(let a=0;a<e.length;a++){const n=e[a];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(i[n]+=s>0?t[a]:1)}return i}function sn(e,t,n,r=!1){const o=e.shape[0],s=e.shape[1],i=Object(a["dd"])([o,n],t.dtype);for(let a=0;a<o;a++)for(let o=0;o<s;o++){const s=e.get(a,o);if(s<0)throw new Error("Input x must be non-negative!");s>=n||(r?i.set(1,a,s):t.size>0?i.set(i.get(a,s)+t.get(a,o),a,s):i.set(i.get(a,s)+1,a,s))}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cn(e){return(t,n,r)=>{const o=a["Ld"].getTypedArrayFromDType(n,t.length);for(let a=0;a<t.length;++a)o[a]=e(t[a],r);return o}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function un(e,t,n){return({inputs:r,attrs:a,backend:o})=>{const{x:s}=r;if(Gt(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const i=o,c=i.data.get(s.dataId).values,u=n||s.dtype,l=t(c,u,a);return i.makeTensorInfo(s.shape,u,l)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ln=cn(e=>Math.ceil(e)),dn=un(a["w"],ln);a["w"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pn(e,t,n,r){const o=a["Ld"].getArrayFromDType(n,a["Ld"].sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{const n=a["Ld"].sizeFromShape(e.shape);o.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const s="string"===n?a["bd"].fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const a=n*t[1]+r;for(let t=0;t<e.shape[1];++t)o[a+t]=s[i++]}r+=e.shape[1]})}return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fn=cn(e=>Math.exp(e)),hn=un(a["X"],fn),mn=(a["X"],cn(e=>Math.expm1(e))),bn=un(a["Z"],mn),gn=(a["Z"],cn(e=>Math.floor(e))),yn=un(a["db"],gn);a["db"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xn(e,t,n){const r=Object(a["dd"])(n,e.dtype);for(let a=0;a<r.size;++a){const n=r.indexToLoc(a),o=n.slice(),s=o[0],i=o[2],c=t.locToIndex([s,i]);o[2]=t.values[c];const u=e.locToIndex(o);r.values[a]=e.values[u]}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vn=qt((e,t)=>e>t?1:0),On=en(a["lb"],vn,null,"bool"),wn=(a["lb"],qt((e,t)=>e<t?1:0)),Cn=en(a["xb"],wn,null,"bool");a["xb"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $n(e,t,n){const r=(t-e)/(n-1),o=a["Ld"].makeZerosTypedArray(n,"float32");o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+r;return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kn=cn(e=>Math.log(e)),In=un(a["Ab"],kn);a["Ab"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jn(e,t,n,r){const o=a["Ld"].getTypedArrayFromDType(r,a["Ld"].sizeFromShape(n));for(let a=0;a<o.length;++a){const n=a*t;let r=e[n];for(let a=0;a<t;++a){const t=e[n+a];t>r&&(r=t)}o[a]=r}return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const En=qt((e,t)=>Math.max(e,t)),Tn=en(a["Lb"],En),Nn=(a["Lb"],qt((e,t)=>Math.min(e,t))),Sn=en(a["Ob"],Nn),An=(a["Ob"],qt((e,t)=>e*t)),_n=tn((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),Rn=en(a["Sb"],An,_n);a["Sb"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fn(e,t,n){const r=a["Ld"].createScalarValue(-1,n);return An([],t,r,e,n)}function Dn(e){const{inputs:t,backend:n}=e,{x:r}=t;Gt(r,"neg");const a=n.data.get(r.dataId).values,[o,s]=Fn(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}a["Tb"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ln=qt((e,t)=>e!==t?1:0),Pn=en(a["Xb"],Ln,null,"bool");a["Xb"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mn(e,t,n,r,o){const s=t.length,i=a["Ld"].sizeFromShape(t),c=a["Ld"].computeStrides(t),u=a["Ld"].computeStrides(o),l=a["Ld"].getTypedArrayFromDType(n,a["Ld"].sizeFromShape(o));for(let d=0;d<i;++d){const t=a["Ld"].indexToLoc(d,s,c),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];const o=a["Ld"].locToIndex(n,s,u);l[o]=e[d]}return l}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bn(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:o}=n;Gt(a,"transpose");const s=a.shape.length,i=new Array(s);for(let d=0;d<i.length;d++)i[d]=a.shape[o[d]];const c=r.data.get(a.dataId).values,u=Mn(c,a.shape,a.dtype,o,i),l=r.write(u,i,a.dtype);return{dataId:l,shape:i,dtype:a.dtype}}a["Uc"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(e,t,n,r){const[o,s]=a["bd"].computeOutAndReduceShapes(e,r),i=Object(a["Kd"])(t,"int32"),c=a["Ld"].makeZerosTypedArray(a["Ld"].sizeFromShape(o),i),u=a["Ld"].sizeFromShape(s);for(let a=0;a<c.length;++a){const e=a*u;let t=1;for(let r=0;r<u;++r)t*=n[e+r];c[a]=t}return{outVals:c,outShape:o,outDtype:i}}function zn(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s,keepDims:i}=r;Gt(o,"prod");const c=o.shape.length,u=a["Ld"].parseAxisParam(s,o.shape),l=a["bd"].getAxesPermutation(u,c);let d=u,p=o;const f=[];null!=l&&(p=Bn({inputs:{x:o},backend:n,attrs:{perm:l}}),f.push(p),d=a["bd"].getInnerMostAxes(d.length,c));const h=n.data.get(p.dataId).values,{outVals:m,outShape:b,outDtype:g}=Vn(p.shape,p.dtype,h,d);let y=b;return i&&(y=a["bd"].expandShapeToKeepDim(b,u)),f.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,g,m)}a["ec"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Un(e,t,n,r){const o=e===t,s=e<t&&n<0,i=t<e&&n>1;if(o||s||i)return a["Ld"].makeZerosTypedArray(0,r);const c=Math.abs(Math.ceil((t-e)/n)),u=a["Ld"].makeZerosTypedArray(c,r);t<e&&1===n&&(n=-1),u[0]=e;for(let a=1;a<u.length;a++)u[a]=u[a-1]+n;return u}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wn=cn(e=>1/Math.sqrt(e)),Gn=un(a["tc"],Wn);a["tc"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hn(e,t,n,r,o){const s=a["Ad"].isSliceContinous(r,t,n),i=a["Ld"].sizeFromShape(n),c=a["Ld"].computeStrides(r);if(s){const n=a["Ad"].computeFlatOffset(t,c);return"string"===o?e.slice(n,n+i):e.subarray(n,n+i)}const u="string"===o?a["bd"].fromUint8ToStringArray(e):e,l=Object(a["dd"])(r,o,u),d=Object(a["dd"])(n,o);for(let a=0;a<d.size;++a){const e=d.indexToLoc(a),n=e.map((e,n)=>e+t[n]);d.set(l.get(...n),...e)}return"string"===o?a["bd"].fromStringArrayToUint8(d.values):d.values}function Kn(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:s,size:i}=r;Gt(o,"slice");const[c,u]=a["Ad"].parseSliceParams(o,s,i);a["Ad"].assertParamsValid(o,c,u);const l=n.data.get(o.dataId).values,d=Hn(l,c,u,o.shape,o.dtype);return n.makeTensorInfo(u,o.dtype,d)}a["Bc"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qn=qt((e,t)=>{const n=e-t;return n*n}),Xn=en(a["Jc"],qn);a["Jc"];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yn(e,t,n,r){const o=Object(a["dd"])(e,t.dtype);for(let a=0;a<o.size;a++){const e=o.indexToLoc(a),s=new Array(e.length);for(let t=0;t<s.length;t++)s[t]=e[t]*n[t]+r[t];o.set(t.get(...s),...e)}return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qn=qt((e,t)=>e-t),Jn=tn((e,t,n,r)=>({real:e-n,imag:t-r})),Zn=en(a["Mc"],Qn,Jn);a["Mc"];
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function er(e,t){const n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];const r=Object(a["dd"])(n,e.dtype);for(let a=0;a<r.values.length;++a){const t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const o=e.locToIndex(n);r.values[a]=e.values[o]}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tr(e,t,n,r,o){const s=t[t.length-1],[i,c]=[e.length/s,s],u=a["Ld"].getTypedArrayFromDType(n,i*r),l=a["Ld"].getTypedArrayFromDType("int32",i*r);for(let a=0;a<i;a++){const t=a*c,n=e.subarray(t,t+c),o=[];for(let e=0;e<n.length;e++)o.push({value:n[e],index:e});o.sort((e,t)=>t.value-e.value);const s=a*r,i=u.subarray(s,s+r),d=l.subarray(s,s+r);for(let e=0;e<r;e++)i[e]=o[e].value,d[e]=o[e].index}const d=t.slice();return d[d.length-1]=r,[Object(a["dd"])(d,n,u),Object(a["dd"])(d,"int32",l)]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nr(e,t,n,r){const o=a["Ld"].parseAxisParam(t,n)[0],s=[1,n[0],1];for(let a=0;a<o;a++)s[0]*=n[a];s[1]=n[o];for(let a=o+1;a<n.length;a++)s[2]*=n[a];const i={},c=new Int32Array(n[o]),u=new a["Rc"](s,r,e),l=[],d=1===s[0]&&1===s[2];for(let a=0;a<n[o];a++){let t;if(d)t=e[a].toString();else{const e=[];for(let t=0;t<s[0];t++)for(let n=0;n<s[2];n++)e.push(u.get(t,a,n));t=e.join(",")}if(void 0!==i[t])c[a]=i[t];else{const e=Object.keys(i).length;i[t]=e,c[a]=e,l.push(a)}}const p=s.slice();p[1]=Object.keys(i).length;const f=new a["Rc"](p,r);l.forEach((e,t)=>{for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)f.set(u.get(n,e,r),n,t,r)});const h=n.slice();return h[o]=p[1],{outputValues:f.values,outputShape:h,indices:c}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:rr,bincountImpl:ar,bincountReduceImpl:or,ceilImpl:sr,concatImpl:ir,expImpl:cr,expm1Impl:ur,floorImpl:lr,gatherV2Impl:dr,greaterImpl:pr,lessImpl:fr,linSpaceImpl:hr,logImpl:mr,maxImpl:br,maximumImpl:gr,minimumImpl:yr,multiplyImpl:xr,negImpl:vr,prodImpl:Or,rangeImpl:wr,rsqrtImpl:Cr,simpleAbsImpl:$r,sliceImpl:kr,stridedSliceImpl:Ir,subImpl:jr,tileImpl:Er,topKImpl:Tr,transposeImpl:Nr,uniqueImpl:Sr}=r;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function _r(e,t){return 1===t?[e]:Ar(e,t)}function Rr(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fr{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;const t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=_r("rc",t),r=Pt(t),a=Lr(t,e,n),o=Pr(t,e[e.length-1],e[e.length-2],n),s=Mr(e,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${a}) {\n            setOutput(vec4(0));\n          } else {\n            ${o}\n\n            setOutput(vec4(${s}));\n          }\n        }\n      `}}}function Dr(e,t){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let o=`${0===r?"r":"rp1"}, ${0===a?"c":"cp1"}`;for(let n=2;n<e;n++)o=t[t.length-1-n]+","+o;n.push(o)}return n}function Lr(e,t,n){if(1===e)return"rc > "+t[0];let r="";for(let a=e-2;a<e;a++)r+=`${n[a]} >= ${t[a]}`,a<e-1&&(r+="||");return r}function Pr(e,t,n,r){if(1===e)return"";const a=r.slice(-2);return`\n    int r = ${a[0]};\n    int c = ${a[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${t};\n    bool rEdge = rp1 >= ${n};\n  `}function Mr(e,t){const n=e.length,r=Dr(n,t);return 1===n?`getA(rc),\n            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Br{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${Vr(t)}\n      ${ye(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${e[1]};\n        int cols = ${e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}function Vr(e){const t=ge(["r","c","d"],e);return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${t}\n      return ivec3(r, c, d);\n    }\n  `}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zr{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=Kr(t,n),a=qr(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=Wr(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[a].shift();return this.usedTextures[a].push(e),e}let s;return r===f.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===f.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===f.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===f.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===f.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const o=Kr(n,r),s=qr(t,o,r);s in this.freeTextures||(this.freeTextures[s]=[]);const i=Wr(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),c=Object(a["ld"])().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==c&&this._numBytesAllocated>c?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const u=this.usedTextures[s],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Ur(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format "+t)}function Wr(e,t,n,r,a){const o=Gr(t,r);let s;if(a){const[t,n]=g(e[0],e[1]);s=t*n}else{const[t,n]=h(e[0],e[1]);s=t*n}const i=Ur(n,o);return s*i}function Gr(e,t){switch(e){case f.PACKED_2X2_FLOAT32:return De(t);case f.PACKED_2X2_FLOAT16:return Pe(t);case f.UNPACKED_FLOAT32:return Ne(t);case f.UNPACKED_FLOAT16:return Ae(t);case f.PACKED_4X1_UNSIGNED_BYTE:return Re(t);default:throw new Error("Unknown physical texture type "+e)}}function Hr(e){return Object(a["ld"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?f.PACKED_2X2_FLOAT32:f.UNPACKED_FLOAT32:e?f.PACKED_2X2_FLOAT16:f.UNPACKED_FLOAT16}function Kr(e,t){if(e===p.UPLOAD)return f.PACKED_2X2_FLOAT32;if(e===p.RENDER||null==e)return Hr(t);if(e===p.DOWNLOAD||e===p.PIXELS)return f.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function qr(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xr{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const Yr="if (isnan(x)) return x;",Qr="return x;",Jr="return abs(x);";const Zr="return (x >= 0.0) ? x : (exp(x) - 1.0);",ea=Yr+"\n  return (x < 0.0) ? 0.0 : x;\n",ta=Yr+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",na="return x;",ra="return x;",aa="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",oa="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",sa="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";class ia{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ca{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;const t=e.length,n=_r("rc",t),r=Pt(t),a=Rr(t,n),o=n.slice(-2),s=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${s}));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ua=a["rd"].whereImpl,la=1e-7,da=1e-4,pa={};function fa(e){return e in pa||(pa[e]={}),pa[e]}const ha=128,ma=600;function ba(){return null==Object(a["ld"])().global.screen?1024:Object(a["ld"])().global.screen.height*Object(a["ld"])().global.screen.width*window.devicePixelRatio*ma/1024/1024}class ga extends a["tb"]{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!Object(a["ld"])().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){const e=c(Object(a["ld"])().getNumber("WEBGL_VERSION"));this.binaryCache=fa(Object(a["ld"])().getNumber("WEBGL_VERSION")),this.gpgpu=new qe(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;this.textureManager=new zr(this.gpgpu),this.numMBBeforeWarning=ba(),this.texData=new a["L"](this,Object(a["kd"])())}nextDataId(){return ga.nextDataId++}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(e,t,n){if((Object(a["ld"])().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(a["ld"])().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:p.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){const t=this.texData.get(e);return t.refCount}return 0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,n,r,o){if(Object(a["ld"])().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:p.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:o,slice:s,shape:i,isPacked:c}=t;if(null!=s){let t;t=c?new ia(i,na):new Xr(i,na);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const u=null!=this.activeTimers;let l,d;if(u&&(l=a["Ld"].now()),"complex64"===r){const e=this.readSync(o.real.dataId),t=this.readSync(o.imag.dataId);d=a["bd"].mergeRealAndImagArrays(e,t)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=a["Ld"].now()-l),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:r,slice:o,dtype:s,complexTensorInfos:i,isPacked:c}=t;if(null!=o){let t;t=c?new ia(r,na):new Xr(r,na);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:s}],s),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(!Object(a["ld"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Object(a["ld"])().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,l,d=null;if("complex64"!==s&&Object(a["ld"])().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const t=this.texData.get(u.dataId);d=this.gpgpu.createBufferFromTexture(t.texture,...b(r))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]),t=e[0],n=e[1];l=a["bd"].mergeRealAndImagArrays(t,n)}else if(null==d)l=this.getValuesFromTexture(e);else{const e=a["Ld"].sizeFromShape(r);l=this.gpgpu.downloadFloat32MatrixFromBuffer(d,e)}null!=u&&this.disposeIntermediateTensorInfo(u);const p=this.convertAndCacheOnCPU(e,l),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(e=>e(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Object(a["kd"])().removeDataId(e,this),this.pendingDeletes--),p}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map(e=>a["Ld"].decodeString(e))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(a["dd"])(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!$(n)){if(Object(a["ld"])().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),o=a["Ld"].sizeFromShape(t);if(Object(a["ld"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...b(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),a}const s=Object(a["ld"])().getBool("WEBGL_PACK")&&!0===r,i=s?J(t):t,c=s?new Ce(i):new we(i),u=this.runWebGLProgram(c,[{shape:i,dtype:n,dataId:e}],"float32"),l=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture,l.texShape[0],l.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=a["Ld"].flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),s=a["Ld"].flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);i["kernelMs"]=a["Ld"].sum(e),i["getExtraProfileInfo"]=()=>e.map((e,t)=>({name:s[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", ")}else i["kernelMs"]={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:a["Ld"].now(),endMs:null}}endTimer(e){return Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=a["Ld"].now(),e)}async getQueryTime(e){if(Object(a["ld"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:o,slice:s}=this.texData.get(e),i=s&&s.origDataId||e,c=this.dataRefCount.get(i);c>1?this.dataRefCount.set(i,c-1):(this.dataRefCount.delete(i),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return Object(a["ld"])().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Object(a["kd"])().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(e,t=ha){const n=this.getCPUBackend();return Object(a["ld"])().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=n||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=n&&e.every(e=>null==this.texData.get(e.dataId).texture&&a["Ld"].sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){a["bd"].warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return ua(e.shape,t)}packedUnaryOp(e,t,n){const r=new ia(e.shape,t),o=this.compileAndRun(r,[e],n);return Object(a["kd"])().makeTensorFromDataId(o.dataId,o.shape,o.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=$r(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Object(a["ld"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Jr,e.dtype);const t=new Xr(e.shape,Jr),n=this.compileAndRun(t,[e]);return Object(a["kd"])().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&a["Ld"].isString(n[0])){const o=n.map(e=>a["Ld"].encodeString(e));r=this.write(o,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){const{dataId:r}=this.makeTensorInfo(e,t,n);return Object(a["kd"])().makeTensorFromDataId(r,e,t,this)}unpackTensor(e){const t=new ca(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new Fr(e.shape),n=!0;return this.runWebGLProgram(t,[e],e.dtype,null,n)}packedReshape(e,t){const n=[Y(e.shape),...Q(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Y(t),...Q(t)],o=new Br(a,n),s=!0,i=this.runWebGLProgram(o,[r],e.dtype,null,s);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:r,dtype:a}=t,o=J(r);let s;s=n?new Oe(o):new ve(o);const i=!0,c=this.runWebGLProgram(s,[{shape:o,dtype:a,dataId:e}],a,null,i);return{dtype:a,shape:r,dataId:c.dataId}}runWebGLProgram(e,t,n,r,o=!1){const s=this.makeTensorInfo(e.outputShape,n),i=this.texData.get(s.dataId);if(e.packedOutput&&(i.isPacked=!0),e.outPackingScheme===d.DENSE){const t=b(e.outputShape);i.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(i.usage=e.outTexUsage),0===a["Ld"].sizeFromShape(s.shape))return i.values=a["Ld"].getTypedArrayFromDType(s.dtype,0),s;const c=[],u=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&a["Ld"].sizeFromShape(t.shape)<=Object(a["ld"])().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),c.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!te(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),c.push(t),n=this.texData.get(t.dataId),e.shape=r}return this.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);const l={shape:s.shape,texData:i,isUniform:!1},p=Wt(e,u,l),f=this.getAndSaveBinary(p,()=>Vt(this.gpgpu,e,u,l)),h=null!=this.activeTimers;let m;h&&(m=this.startTimer()),Ut(this.gpgpu,f,u,l,r),c.forEach(e=>this.disposeIntermediateTensorInfo(e)),h&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=Object(a["ld"])().get("WEBGL_FLUSH_THRESHOLD");if(g>0){const e=a["Ld"].now();e-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Object(a["ld"])().getBool("WEBGL_LAZILY_UNPACK")&&i.isPacked&&!1===o){const e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,r,a=!1){n=n||t[0].dtype;const o=this.runWebGLProgram(e,t,n,r,a);return o}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Object(a["ld"])().getBool("IS_TEST")){const e=Object.keys(this.binaryCache);e.forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(a["Id"])(()=>{if(!Object(a["ld"])().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Object(a["ld"])().getBool("DEBUG");Object(a["ld"])().set("DEBUG",!1);const t=this.abs(Object(a["wd"])(1e-8)).dataSync()[0];if(Object(a["ld"])().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?la:da}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:o,texture:s,usage:i,isPacked:c}=t;if(null!=s)return;const u=null!=this.activeTimers;let l;u&&(l=a["Ld"].now());let d=t.texShape;if(null==d&&(d=Z(n,c),t.texShape=d),null!=o){const e=J(n);let s,i=d[1],f=d[0];const h=o instanceof Uint8Array;c?([i,f]=g(d[0],d[1]),s=new ke(e,[f,i],h)):s=new $e(e,[f,i],h);const m=this.makeTensorInfo([f,i],r);this.texData.get(m.dataId).usage=h?p.PIXELS:p.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(m.dataId),i,f,o);const b=!0,y=this.runWebGLProgram(s,[m],r,null,b),x=this.texData.get(y.dataId);t.texture=x.texture,t.texShape=x.texShape,t.isPacked=x.isPacked,t.usage=x.usage,this.disposeIntermediateTensorInfo(m),this.texData.delete(y.dataId),t.values=null,u&&(this.uploadWaitMs+=a["Ld"].now()-l)}else{const e=this.acquireTexture(d,i,r,c);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=ya(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*a["Ld"].bytesPerElement(t)}}function ya(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype "+t)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ga.nextDataId=0,
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
a["id"].isBrowser()&&Object(a["td"])("webgl",()=>new ga,2);const xa="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class va{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=a["bd"].assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oa="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";class wa{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a["bd"].assertAndGetBroadcastShape(t,n);const o=this.outputShape.length;let s="";if(r)if(0===o||1===a["Ld"].sizeFromShape(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=Pt(o);if(s=`\n          ${e} coords = getOutputCoords();\n        `,1===o)s+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=_r("coords",o);s+=`\n            bool nextRowOutOfBounds =\n              (${e[o-2]} + 1) >= ${this.outputShape[o-2]};\n            bool nextColOutOfBounds =\n              (${e[o-1]} + 1) >= ${this.outputShape[o-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${s}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ca(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const $a={kernelName:a["ob"],backendName:"webgl",kernelFunc:Ca};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ka(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,o=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(o.dataId),i=Ca({inputs:{x:r},backend:n}),c=Ca({inputs:{x:a},backend:n});return s.complexTensorInfos={real:i,imag:c},o}const Ia={kernelName:a["y"],backendName:"webgl",kernelFunc:ka},ja="return (a < 0.) ? b * a : a;",Ea="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:s}=r,i=n.makeTensorInfo([],"float32",a["Ld"].createScalarValue(s,"float32")),c=Object(a["ld"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wa(Ea,o.shape,i.shape):new va(ja,o.shape,i.shape),u=n.runWebGLProgram(c,[o,i],o.dtype);return n.disposeIntermediateTensorInfo(i),u}const Na={kernelName:a["wb"],backendName:"webgl",kernelFunc:Ta},Sa="return (a < 0.) ? b * a : a;",Aa="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _a(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t,s=Object(a["ld"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wa(Aa,r.shape,o.shape):new va(Sa,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],r.dtype)}const Ra={kernelName:a["dc"],backendName:"webgl",kernelFunc:_a},Fa="if (isnan(x)) return x;",Da="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",La="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pa({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:s})=>{const{x:i}=o,c=s,u=r||i.dtype;if(c.shouldExecuteOnCPU([i])&&null!=n){const e=c.texData.get(i.dataId),t=n(e.values,u);return c.makeTensorInfo(i.shape,u,t)}const l=Object(a["ld"])().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t;let d;return d=l?new ia(i.shape,t):new Xr(i.shape,e),c.runWebGLProgram(d,[i],u)}}function Ma({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:s}){return({inputs:i,backend:c})=>{const{a:u,b:l}=i,d=c;if(r&&"complex64"===u.dtype){const t=d.texData.get(u.dataId),n=d.texData.get(l.dataId),[r,o]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(t=>{const[n,r]=t,o={dataId:n.dataId,dtype:n.dtype,shape:u.shape},s={dataId:r.dataId,dtype:r.dtype,shape:l.shape},i=new va(e,u.shape,l.shape);return d.runWebGLProgram(i,[o,s],Object(a["Kd"])(n.dtype,r.dtype))}),s=ka({inputs:{real:r,imag:o},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(o),s}const p=s||Object(a["Kd"])(u.dtype,l.dtype);if(d.shouldExecuteOnCPU([u,l])&&null!=o){const e=d.texData.get(u.dataId),t=d.texData.get(l.dataId),[n,r]=o(u.shape,l.shape,e.values,t.values,p),a=d.makeTensorInfo(r,p),s=d.texData.get(a.dataId);return s.values=n,a}const f=Object(a["ld"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t;let h;return h=f?new wa(t,u.shape,l.shape,n):new va(e,u.shape,l.shape),d.runWebGLProgram(h,[u,l],p)}}function Ba(e,t=!1){if("linear"===e)return t?ra:Qr;if("relu"===e)return t?oa:ea;if("elu"===e)return t?aa:Zr;if("relu6"===e)return t?sa:ta;if("prelu"===e)return t?Aa:Sa;if("leakyrelu"===e)return t?Ea:ja;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Va{constructor(e,t,n,r=!1,a=!1,o=!1,s=null,i=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;const u=r?e[1]:e[2],l=Math.ceil(u/2),d=r?"i * 2, rc.y":"rc.y, i * 2",p=a?"rc.z, i * 2":"i * 2, rc.z",f=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",b="";s&&(m=i?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${s}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${s}\n        }`:`vec4 activation(vec4 x) {\n          ${s}\n        }`,b="result = activation(result);");const g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let y="rc.x",x="rc.x";e[0]<t[0]?y=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(x=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${m}\n\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${l}; i++) {\n          int batchA = ${y};\n          int batchB = ${x};\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${p});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${f[0]} * ${h[0]});\n          result += (${f[1]} * ${h[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${b}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const za={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Ua{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a["bd"].assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wa="return a * b;";function Ga(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,s=a["bd"].upcastType(r.dtype,o.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),a=new Ua(za.REAL,r.shape,o.shape),s=new Ua(za.IMAG,r.shape,o.shape),i=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],c=n.runWebGLProgram(a,i,"float32"),u=n.runWebGLProgram(s,i,"float32"),l=ka({inputs:{real:c,imag:u},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),l}if(n.shouldExecuteOnCPU([r,o])){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),[a,i]=xr(r.shape,o.shape,e.values,t.values,s),c=n.makeTensorInfo(i,s),u=n.texData.get(c.dataId);return u.values=a,c}let i;return i=Object(a["ld"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wa(Wa,r.shape,o.shape):new va(Wa,r.shape,o.shape),n.runWebGLProgram(i,[r,o],s)}const Ha={kernelName:a["Sb"],backendName:"webgl",kernelFunc:Ga};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ka(e,t,n){const r=[Y(e.shape),...Q(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[Y(t),...Q(t)],s=new Br(o,r),i=!0,c=n.runWebGLProgram(s,[a],e.dtype,null,i);return{dataId:c.dataId,shape:t,dtype:c.dtype}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qa(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:s}=r,i=n,c=a["Ld"].sizeFromShape(o.shape),u=a["Ld"].inferFromImplicitShape(s,c),l=a["Ld"].sizeFromShape(u);a["Ld"].assert(c===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${o.shape}) has ${c} elements. The new shape and old shape must have the same number of elements.`);const d=i.texData.get(o.dataId);return!d.isPacked||te(o.shape,u)||null!==d.texture&&te(d.shape,u)?(i.incRef(o.dataId),{dataId:o.dataId,shape:u,dtype:o.dtype}):Ka(o,u,i)}const Xa={kernelName:a["lc"],backendName:"webgl",kernelFunc:qa};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ya{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:s}=e;this.outputShape=[r,s];const i=4*Math.floor(n/4),c=n%4;let u="sumValue += dot(values, ones);";if(null!=t){const e=1/t;u=`sumValue += dot(values * ${a["Ld"].isInt(e)?e.toPrecision(2):e}, ones);`}let l="";o%n>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===c}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${u}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${u}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qa{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:o}=e;this.outputShape=[r,o];let s="0.0",i="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",i="min"):"max"===t&&(s="-1.0 / 1e-20",i="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const u=4*Math.floor(n/4),l=n%4;let d=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${i}(values, minMaxValue);\n      }\n    `,p="vec4";"all"===t?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");let f="";a%n>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${f}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${s});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${2===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${d}\n        } else if (${3===l}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${d}\n        }\n        setOutput(${c});\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ja(e){const t=[];while(0===t.length||1!==t[t.length-1].outSize){const n=t.length?t[t.length-1].outSize:e[1],r=a["bd"].computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function Za(e,t,n,r){const a=Ja(e.shape);let o=e;for(let s=0;s<a.length;s++){const{inSize:i,windowSize:c,outSize:u}=a[s];let l,d;l="mean"===n?0===s?new Ya({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:u},i):new Ya({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:u}):new Qa({windowSize:c,inSize:i,batchSize:e.shape[0],outSize:u},n),d=o,o=r.runWebGLProgram(l,[o],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return o}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eo{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const r=Pt(this.rank),a=to(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}function to(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class no{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=Pt(this.rank),a=Ar("rc",this.rank),o=new Array(this.rank);for(let u=0;u<t.length;u++)o[t[u]]=a[u];const s=`vec2(${o.slice(-2).join()})`,i=`++${a[this.rank-1]} < ${n[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${i}) {\n        result[1] = ${c};\n      }\n      --${a[this.rank-1]};\n      if(++${a[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${c};\n        if(${i}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ro(e,t,n){const r=Object(a["ld"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new no(e.shape,t):new eo(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ao(e,t,n,r){const o=t,s=e.shape.length,i=a["Ld"].parseAxisParam(o,e.shape);let c=i;const u=a["bd"].getAxesPermutation(c,s),l=null!=u;let d=e;l&&(d=ro(e,u,r),c=a["bd"].getInnerMostAxes(c.length,s)),a["bd"].assertAxesAreInnerMostDims("sum",c,s);const[p,f]=a["bd"].computeOutAndReduceShapes(d.shape,c);let h=p;n&&(h=a["bd"].expandShapeToKeepDim(p,i));const m=a["Ld"].sizeFromShape(f),b=a["Ld"].sizeFromShape(e.shape),g=b/m,y=qa({inputs:{x:d},attrs:{shape:[g,m]},backend:r}),x=Object(a["Ed"])(e.dtype),v=Za(y,x,"sum",r),O=qa({inputs:{x:v},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(v),l&&r.disposeIntermediateTensorInfo(d),O}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oo(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:s}=r;return ao(a,o,s,n)}const so={kernelName:a["Nc"],backendName:"webgl",kernelFunc:oo};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function io(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:o}=r,s=n,i=a.shape.length,c=new Array(i);for(let l=0;l<c.length;l++)c[l]=a.shape[o[l]];let u;if(s.shouldExecuteOnCPU([a])){const e=s.texData.get(a.dataId),t=e.values,n=Nr(t,a.shape,a.dtype,o,c);u=s.makeTensorInfo(c,a.dtype);const r=s.texData.get(u.dataId);r.values=n}else u=ro(a,o,s);return u}const co={kernelName:a["Uc"],backendName:"webgl",kernelFunc:io},uo=1e3;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lo({a:e,b:t,transposeA:n,transposeB:r,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:c=0,activation:u=null}){const l=e.shape.length,d=t.shape.length,p=n?e.shape[l-2]:e.shape[l-1],f=r?t.shape[d-1]:t.shape[d-2],h=n?e.shape[l-1]:e.shape[l-2],m=r?t.shape[d-2]:t.shape[d-1],b=e.shape.slice(0,-2),g=t.shape.slice(0,-2),y=a["Ld"].sizeFromShape(b),x=a["Ld"].sizeFromShape(g),v=y===x||1===y||1===x;a["Ld"].assert(l>=2&&d>=2&&v,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${b}) and (${g}).`);const O=y>x?e.shape.slice(0,-2):t.shape.slice(0,-2),w=O.concat([h,m]);a["Ld"].assert(p===f,()=>`Error in matMul: inner shapes (${p}) and (${f}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=n?[y,p,h]:[y,h,p],$=r?[x,m,f]:[x,f,m],k=qa({inputs:{x:e},backend:o,attrs:{shape:C}}),I=qa({inputs:{x:t},backend:o,attrs:{shape:$}}),j=[k,I],E=Math.max(y,x),T=n?k.shape[1]:k.shape[2],N=null!=s,S=null!=i,A="leakyrelu"===u,_=null!=u?Ba(u,!0):null,R=N||S||A||null!=_;let F;if((1===h||1===m)&&T>uo&&!1===R){let e=k,t=I;n&&(e=io({inputs:{x:k},backend:o,attrs:{perm:[0,2,1]}}),j.push(e)),r&&(t=io({inputs:{x:I},backend:o,attrs:{perm:[0,2,1]}}),j.push(t));const a=1!==m,s=1===m;let i=e;a&&(i=qa({inputs:{x:e},backend:o,attrs:{shape:[E,T,1]}}),j.push(i));const c=1===m?2:1;let u=t;s&&(u=qa({inputs:{x:t},backend:o,attrs:{shape:[E,1,T]}}),j.push(u));const l=Ga({inputs:{a:i,b:u},backend:o});F=oo({inputs:{x:l},backend:o,attrs:{axis:c,keepDims:!0}}),j.push(l)}else{const u=Object(a["Kd"])(e.dtype,t.dtype),l=new Va(C,$,[E,h,m],n,r,N,_,S,A),d=[k,I];if(null!=s&&d.push(s),S&&d.push(i),A){const e=o.makeTensorInfo([],"float32",a["Ld"].createScalarValue(c,"float32"));d.push(e),j.push(e)}F=o.runWebGLProgram(l,d,u)}const D=qa({inputs:{x:F},backend:o,attrs:{shape:w}});j.push(F);for(const a of j)o.disposeIntermediateTensorInfo(a);return D}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function po(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:o,bias:s,preluActivationWeights:i}=t,{transposeA:c,transposeB:u,activation:l,leakyreluAlpha:d}=r;return lo({a:a,b:o,transposeA:c,transposeB:u,backend:n,bias:s,preluActivationWeights:i,leakyreluAlpha:d,activation:l})}const fo={kernelName:a["Zc"],backendName:"webgl",kernelFunc:po},ho="return abs(x);";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mo(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=$r(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let o;return o=Object(a["ld"])().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new ia(r.shape,ho):new Xr(r.shape,ho),n.runWebGLProgram(o,[r],r.dtype)}const bo={kernelName:a["a"],backendName:"webgl",kernelFunc:mo},go=Yr+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",yo=Pa({opSnippet:go}),xo={kernelName:a["b"],backendName:"webgl",kernelFunc:yo},vo=Yr+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",Oo=Pa({opSnippet:vo}),wo={kernelName:a["c"],backendName:"webgl",kernelFunc:Oo},Co="return a + b;",$o=Ma({opSnippet:Co,packedOpSnippet:Co,supportsComplex:!0,cpuKernelImpl:rr}),ko={kernelName:a["d"],backendName:"webgl",kernelFunc:$o};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Io{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);const n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});const r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jo{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);const n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});const r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(e){const{inputs:t,backend:n}=e,r=t;if(1===r.length)return Ca({inputs:{x:r[0]},backend:n});if(r.length>Object(a["ld"])().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(r.length/2),t=Eo({inputs:r.slice(0,e),backend:n}),a=Eo({inputs:r.slice(e),backend:n});return Eo({inputs:[t,a],backend:n})}const o=r.map(e=>e.dtype).reduce((e,t)=>Object(a["Kd"])(e,t)),s=r.map(e=>e.shape),i=Object(a["ld"])().getBool("WEBGL_PACK"),c=i?new jo(r[0].shape,s):new Io(r[0].shape,s);return n.runWebGLProgram(c,r,o)}const To={kernelName:a["e"],backendName:"webgl",kernelFunc:Eo};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function No(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s,keepDims:i}=r,c=o.shape.length,u=a["Ld"].parseAxisParam(s,o.shape);let l=u;const d=a["bd"].getAxesPermutation(l,c);let p=o;null!=d&&(p=io({inputs:{x:o},backend:n,attrs:{perm:d}}),l=a["bd"].getInnerMostAxes(l.length,c)),a["bd"].assertAxesAreInnerMostDims("all",l,c);const[f,h]=a["bd"].computeOutAndReduceShapes(p.shape,l),m=a["Ld"].sizeFromShape(h),b=qa({inputs:{x:p},backend:n,attrs:{shape:[-1,m]}}),g=Za(b,b.dtype,"all",n);let y;if(i){const e=a["bd"].expandShapeToKeepDim(f,u);y=qa({inputs:{x:g},backend:n,attrs:{shape:e}})}else y=qa({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),null!=d&&n.disposeIntermediateTensorInfo(p),y}const So={kernelName:a["f"],backendName:"webgl",kernelFunc:No};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ao(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s,keepDims:i}=r,c=o.shape.length,u=a["Ld"].parseAxisParam(s,o.shape);let l=u;const d=a["bd"].getAxesPermutation(l,c);let p=o;null!=d&&(p=io({inputs:{x:o},backend:n,attrs:{perm:d}}),l=a["bd"].getInnerMostAxes(l.length,c)),a["bd"].assertAxesAreInnerMostDims("any",l,c);const[f,h]=a["bd"].computeOutAndReduceShapes(p.shape,l),m=a["Ld"].sizeFromShape(h),b=qa({inputs:{x:p},backend:n,attrs:{shape:[-1,m]}}),g=Za(b,b.dtype,"any",n);let y;if(i){const e=a["bd"].expandShapeToKeepDim(f,u);y=qa({inputs:{x:g},backend:n,attrs:{shape:e}})}else y=qa({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),null!=d&&n.disposeIntermediateTensorInfo(p),y}const _o={kernelName:a["g"],backendName:"webgl",kernelFunc:Ao};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ro{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const s="max"===t?">":"<",i=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${i};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${s} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fo{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,a["Ld"].assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const o=e[e.length-1],s=Math.ceil(o/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,c=i.length,u=Pt(c),l=_r("coords",c);let d,p;if(1===s){p=c+1;const e=Pt(p);d=`\n        ${e} sourceLocR = ${e}(${l.join()}, 0);\n        ++${l[c-1]};\n        ${e} sourceLocG = ${e}(${l.join()}, 0);\n        ++${l[c-2]};\n        ${e} sourceLocA = ${e}(${l.join()}, 0);\n        --${l[c-1]};\n        ${e} sourceLocB = ${e}(${l.join()}, 0);\n        --${l[c-2]};`}else p=c,d=`\n        ${u} sourceLocR = coords;\n        ++${l[c-1]};\n        ${u} sourceLocG = coords;\n        ++${l[c-2]};\n        ${u} sourceLocA = coords;\n        --${l[c-1]};\n        ${u} sourceLocB = coords;\n        --${l[c-2]};`;const f=["x","y","z","w","u","v"].slice(0,p),h="."+f[p-1],m=f.map(e=>"int "+e),b=_r("sourceLocR",p-1).concat("inIdx.r"),g=_r("sourceLocG",p-1).concat("inIdx.g"),y=_r("sourceLocB",p-1).concat("inIdx.b"),x=_r("sourceLocA",p-1).concat("inIdx.a"),v="max"===n?"greaterThan":"lessThan",O=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${x.join()})));`,w=`vec4(\n            getAChannel(${b.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,C=r?"":`\n      float getBestIndicesAChannel(${m.join()}) {\n        return getChannel(getBestIndicesA(${f.join()}),\n                                          vec2(${f.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${m.join()}) {\n        return getChannel(getA(${f.join()}),\n                               vec2(${f.slice(-2).join()}));\n      }\n      ${C}\n      void main() {\n        ${u} coords = getOutputCoords();\n        bool hasNextCol = ${l[c-1]} < ${i[c-1]-1};\n        bool hasNextRow = ${l[c-2]} < ${i[c-2]-1};\n        ${d}\n        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},\n          sourceLocB${h}, sourceLocA${h}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${O}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${v}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Do(e,t,n,r=null){let o=t.shape[0],s=t.shape[1];null!=r&&(o=r.shape[0],s=r.shape[1]);const i=a["bd"].computeOptimalWindowSize(s),c={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},u=new Ro(c,n,null==r),l=[t];null!=r&&l.push(r);const d=e.runWebGLProgram(u,l,"int32");if(1===d.shape[1])return d;const p=Do(e,t,n,d);return e.disposeIntermediateTensorInfo(d),p}function Lo(e,t,n,r=null){const o=null!=r?r.shape:t.shape,s=o[o.length-1],i=a["bd"].computeOptimalWindowSize(s),c=new Fo(o,i,n,null==r),u=null==r?[t]:[t,r],l=e.runWebGLProgram(c,u,"int32");if(l.shape.length===t.shape.length){const r=Lo(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function Po(e,t,n,r){const o=[n];if(a["bd"].assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!Object(a["ld"])().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],[s,i]=a["bd"].computeOutAndReduceShapes(t.shape,o),c=a["Ld"].sizeFromShape(i),u=qa({inputs:{x:t},backend:e,attrs:{shape:[-1,c]}});n.push(u);const l=Do(e,u,r);n.push(l);const d=qa({inputs:{x:l},backend:e,attrs:{shape:s}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),d}return Lo(e,t,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mo(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s}=r;let i=a["Ld"].parseAxisParam(s,o.shape);const c=a["bd"].getAxesPermutation(i,o.shape.length);let u=o;const l=[];null!=c&&(u=io({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(u),i=a["bd"].getInnerMostAxes(i.length,u.shape.length)),a["bd"].assertAxesAreInnerMostDims("argMax",[i[0]],u.shape.length);const d=Po(n,u,i[0],"max");return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}const Bo={kernelName:a["h"],backendName:"webgl",kernelFunc:Mo};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vo(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s}=r;let i=a["Ld"].parseAxisParam(s,o.shape);const c=a["bd"].getAxesPermutation(i,o.shape.length);let u=o;const l=[];null!=c&&(u=io({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(u),i=a["bd"].getInnerMostAxes(i.length,u.shape.length)),a["bd"].assertAxesAreInnerMostDims("argMin",[i[0]],u.shape.length);const d=Po(n,u,i[0],"min");return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}const zo={kernelName:a["i"],backendName:"webgl",kernelFunc:Vo},Uo=Yr+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",Wo=Pa({opSnippet:Uo}),Go={kernelName:a["j"],backendName:"webgl",kernelFunc:Wo},Ho=Yr+"return log(x + sqrt(x * x + 1.0));",Ko=Pa({opSnippet:Ho}),qo={kernelName:a["k"],backendName:"webgl",kernelFunc:Ko},Xo=Yr+"\n  return atan(x);\n",Yo=Pa({opSnippet:Xo}),Qo={kernelName:a["l"],backendName:"webgl",kernelFunc:Yo},Jo=Da+"\n  return atan(a, b);\n",Zo="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+La+"\n  return result;\n",es=Ma({opSnippet:Jo,packedOpSnippet:Zo}),ts={kernelName:a["m"],backendName:"webgl",kernelFunc:es},ns=Yr+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",rs=Pa({opSnippet:ns}),as={kernelName:a["n"],backendName:"webgl",kernelFunc:rs};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class os{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,i=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;const h="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let g="0.0";if(h||(g="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${s}, ${i});\n        const ivec2 pads = ivec2(${p}, ${f});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${l};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?a?m:b:`wR * ${d} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const y="max";let x=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(x="avgValue / count");const v=4*Math.floor(o/4),O=o%4,w=`\n      if (${h}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${y}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${i});\n      const ivec2 pads = ivec2(${p}, ${f});\n      const float initializationValue = ${g};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${g});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${l};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${v}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${w}\n          }\n\n          int xC = xCCorner + ${v};\n          if (${1===O}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${2===O}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${3===O}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${w}\n          }\n        }\n        setOutput(${x});\n      }\n    `}}class ss{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=e.padInfo.front,b=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y="avg"===t;let x="0.0";if(y||(x="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${s}, ${i}, ${c});\n        const ivec3 pads = ivec3(${m}, ${b}, ${g});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${p};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${f};\n                wR += ${l}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${h};\n                  wC += ${d}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${f} * ${h} +\n                      wR * ${h} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const v="max";let O=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(O="avgValue / count");const w=4*Math.floor(o/4),C=o%4,$=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${v}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${s}, ${i}, ${c});\n      const ivec3 pads = ivec3(${m}, ${b}, ${g});\n      const float initializationValue = ${x};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${x});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${p};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${f};\n            wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${w}; wC += 4) {\n              int xC = xCCorner + wC * ${d};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${d}, ch)\n              );\n\n              ${$}\n            }\n\n            int xC = xCCorner + ${w};\n            if (${1===C}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${$}\n            } else if (${2===C}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${$}\n            } else if (${3===C}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${d}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${d}, ch),\n                initializationValue\n              );\n\n              ${$}\n            }\n          }\n          setOutput(${O});\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function is(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;he(o,"avgPool");const{filterSize:s,strides:i,pad:c,dimRoundingMode:u}=r,l=1;a["Ld"].assert(a["bd"].eitherStridesOrDilationsAreOne(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const d=a["bd"].computePool2DInfo(o.shape,s,i,l,c,u);if(1===d.filterWidth&&1===d.filterHeight&&a["Ld"].arraysEqual(d.inShape,d.outShape))return Ca({inputs:{x:o},backend:n});const p=new os(d,"avg",!1);return n.runWebGLProgram(p,[o],"float32")}const cs={kernelName:a["o"],backendName:"webgl",kernelFunc:is};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function us(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:s,strides:i,pad:c,dimRoundingMode:u,dataFormat:l}=r,d=[1,1,1],p=a["bd"].computePool3DInfo(o.shape,s,i,d,c,u,l),f=new ss(p,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const ls={kernelName:a["p"],backendName:"webgl",kernelFunc:us};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ds{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=i-1-e.padInfo.top,l=c-1-e.padInfo.left,d=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${l});\n      const float avgMultiplier = float(${d});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n            wR += ${o}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${c};\n            wC+= ${s}) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ps{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=l-1-e.padInfo.front,h=d-1-e.padInfo.top,m=p-1-e.padInfo.left,b=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${f}, ${h}, ${m});\n      const float avgMultiplier = float(${b});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n            wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${a}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${d};\n              wR += ${c}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${p};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fs(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:s}=t,i=s,{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=[1,1,1],f=a["bd"].computePool3DInfo(i.shape,c,u,p,l,d),h=new ps(f);return n.runWebGLProgram(h,[o],i.dtype)}const hs={kernelName:a["q"],backendName:"webgl",kernelFunc:fs};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ms(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:s}=t,i=s;he([o,s],"avgPoolGrad");const{filterSize:c,strides:u,pad:l}=r,d=a["bd"].computePool2DInfo(i.shape,c,u,1,l),p=new ds(d);return n.runWebGLProgram(p,[o],i.dtype)}const bs={kernelName:a["r"],backendName:"webgl",kernelFunc:ms};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gs(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:o}=t,{transposeA:s,transposeB:i}=r;return lo({a:a,b:o,transposeA:s,transposeB:i,backend:n})}const ys={kernelName:a["s"],backendName:"webgl",kernelFunc:gs};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xs{constructor(e,t,n,r,o,s){this.outputShape=[],this.variableNames=["x","mean","variance"],a["bd"].assertAndGetBroadcastShape(e,t),a["bd"].assertAndGetBroadcastShape(e,n);let i="0.0";null!=r&&(a["bd"].assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let c="1.0";null!=o&&(a["bd"].assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${i};\n        float scale = ${c};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vs{constructor(e,t,n,r,o,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],a["bd"].assertAndGetBroadcastShape(e,t),a["bd"].assertAndGetBroadcastShape(e,n);let i="vec4(0.0)";null!=r&&(a["bd"].assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let c="vec4(1.0)";null!=o&&(a["bd"].assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${i};\n        vec4 scale = ${c};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Os=({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:o,variance:s,offset:i,scale:c}=e;a["Ld"].assert(o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),a["Ld"].assert(null==i||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),a["Ld"].assert(null==c||o.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;null==u&&(u=.001);const l=[r,o,s];let d=null;null!=i&&(d=i.shape,l.push(i));let p=null;null!=c&&(p=c.shape,l.push(c));const f=Object(a["ld"])().getBool("WEBGL_PACK_NORMALIZATION")?new vs(r.shape,o.shape,s.shape,d,p,u):new xs(r.shape,o.shape,s.shape,d,p,u),h=t.runWebGLProgram(f,l,l[0].dtype);return h},ws={kernelName:a["gb"],backendName:"webgl",kernelFunc:Os};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Cs{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Pt(this.rank),n=`uniform int start[${this.rank}];`,r=ks(this.rank);let a;const o=e.map((e,t)=>`sourceLoc.${$s[t]} = start[${t}] + coords.${$s[t]};`);a=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${o.join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${a}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}const $s=["x","y","z","w","u","v"];function ks(e){if(1===e)return"sourceLoc";if(e<=6)return $s.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Is{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;const t=Pt(this.rank),n=_r("coords",this.rank),r=_r("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${a})`,s=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${o};\n        --${r[this.rank-1]};\n      }\n    `,i=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,c=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${c}\n        vec4 result = vec4(0.);\n        ${s}\n        ${i}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(e){if(e.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${e.length})`);return(t,n)=>{null==this.startLoc&&(this.startLoc=t.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||t.gl.uniform1iv(this.startLoc,e)}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function js(e,t,n,r){const o=r.texData.get(e.dataId),s=r.makeTensorInfo(n,e.dtype),i=r.texData.get(s.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let c=a["Ad"].computeFlatOffset(t,a["Ld"].computeStrides(e.shape));o.slice&&(c+=o.slice.flatOffset),i.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};const u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),s}function Es(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:s,size:i}=r,[c,u]=a["Ad"].parseSliceParams(o,s,i);if(a["Ad"].assertParamsValid(o,c,u),0===a["Ld"].sizeFromShape(u))return n.makeTensorInfo(u,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=kr(e.values,c,u,o.shape,o.dtype);return n.makeTensorInfo(u,o.dtype,t)}const{isPacked:l}=n.texData.get(o.dataId),d=a["Ad"].isSliceContinous(o.shape,c,u);if(l||!d){const e=Object(a["ld"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Is(u):new Cs(u),t=e.getCustomSetupFunc(c);return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),js(o,c,u,n)}const Ts={kernelName:a["Bc"],backendName:"webgl",kernelFunc:Es},Ns=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:s,crops:i}=r;a["Ld"].assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const c=s.reduce((e,t)=>e*t),u=a["bd"].getReshaped(o.shape,s,c),l=a["bd"].getPermuted(u.length,s.length),d=a["bd"].getReshapedPermuted(o.shape,s,c),p=a["bd"].getSliceBeginCoords(i,s.length),f=a["bd"].getSliceSize(d,i,s.length),h=[],m=qa({inputs:{x:o},backend:n,attrs:{shape:u}}),b=io({inputs:{x:m},backend:n,attrs:{perm:l}}),g=qa({inputs:{x:b},backend:n,attrs:{shape:d}}),y=Es({inputs:{x:g},backend:n,attrs:{begin:p,size:f}});return h.push(m),h.push(b),h.push(g),h.forEach(e=>n.disposeIntermediateTensorInfo(e)),y},Ss={kernelName:a["t"],backendName:"webgl",kernelFunc:Ns};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function As(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:o}=t,{size:s}=r,i=n.readSync(a.dataId),c=n.readSync(o.dataId),u=ar(i,c,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,u)}const _s={kernelName:a["u"],backendName:"webgl",kernelFunc:As},Rs="return float(a != b);",Fs=Ma({opSnippet:Rs,dtype:"bool"}),Ds={kernelName:a["Xb"],backendName:"webgl",kernelFunc:Fs};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ls(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return Ca({inputs:{x:a.complexTensorInfos.real},backend:n})}const Ps={kernelName:a["gc"],backendName:"webgl",kernelFunc:Ls},Ms="return float(int(x));";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bs(e,t){const n=new Xr(e.shape,Ms),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vs(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:s}=r;if("complex64"===s){if("complex64"===o.dtype)return Ca({inputs:{x:o},backend:n});const e=a["Md"](o.shape),t=Vs({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=ka({inputs:{real:t,imag:e},backend:n});return e.dispose(),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=Ls({inputs:{input:o},backend:n}),t=Vs({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!a["Ld"].hasEncodingLoss(o.dtype,s)){const e=Ca({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}if("int32"===s)return Bs(o,n);if("bool"===s){const e=n.makeTensorInfo([],"bool",a["Ld"].getTypedArrayFromDType("bool",1)),t={a:o,b:e},r=Fs({inputs:t,backend:n});return n.disposeIntermediateTensorInfo(e),r}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}const zs={kernelName:a["v"],backendName:"webgl",kernelFunc:Vs},Us="return ceil(x);",Ws=Pa({opSnippet:Us,packedOpSnippet:Us,cpuKernelImpl:sr}),Gs={kernelName:a["w"],backendName:"webgl",kernelFunc:Ws};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Hs{constructor(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ks{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(e,t){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,e),n.gl.uniform1f(this.maxLoc,t)}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qs(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:s,clipValueMax:i}=r;let c;c=Object(a["ld"])().getBool("WEBGL_PACK_CLIP")?new Ks(o.shape):new Hs(o.shape);const u=c.getCustomSetupFunc(s,i);return n.runWebGLProgram(c,[o],o.dtype,u)}const Xs={kernelName:a["x"],backendName:"webgl",kernelFunc:qs};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ys{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qs(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function Js(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),o=new Ys(r.shape),s=[Qs(r,a.complexTensorInfos.real),Qs(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,s,s[0].dtype)}const Zs={kernelName:a["z"],backendName:"webgl",kernelFunc:Js};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ei{constructor(e){this.outputShape=[],this.outputShape=a["bd"].computeOutShape(e,1),this.variableNames=e.map((e,t)=>"T"+t);const t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<t.length;a++){const e=t[a-1];n.push(`else if (yC < ${t[a]}) setOutput(getT${a}(yR, yC-${e}));`)}const r=t.length,o=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${o}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ti{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=a["bd"].computeOutShape(e,t);const n=this.outputShape,r=n.length,o=Pt(r),s=_r("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T"+t);const c=new Array(e.length-1);c[0]=e[0][t];for(let a=1;a<c.length;a++)c[a]=c[a-1]+e[a][t];const u=i[t],l=i.slice(-2),d=i.join();let p=`if (${u} < ${c[0]}) {\n        return getChannel(\n            getT0(${d}), vec2(${l.join()}));\n        }`;for(let a=1;a<c.length;a++){const e=c[a-1];p+=`\n        if (${u} < ${c[a]}  && ${u} >= ${c[a-1]}) {\n          return getChannel(\n            getT${a}(${ni(i,u,e)}),\n            vec2(${ni(l,u,e)}));\n        }`}const f=c.length,h=c[c.length-1];p+=`\n        return getChannel(\n          getT${f}(${ni(i,u,h)}),\n          vec2(${ni(l,u,h)}));`,this.userCode=`\n      float getValue(${i.map(e=>"int "+e)}) {\n        ${p}\n      }\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}function ni(e,t,n){const r=e.indexOf(t),a=e.map((e,t)=>t===r?`${e} - ${n}`:e);return a.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return Ca({inputs:{x:a.complexTensorInfos.imag},backend:n})}const ai={kernelName:a["pb"],backendName:"webgl",kernelFunc:ri};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oi(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map(e=>Ls({inputs:{input:e},backend:n})),a=e.map(e=>ri({inputs:{input:e},backend:n})),o=oi(r,t,n),s=oi(a,t,n),i=ka({inputs:{real:o,imag:s},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),a.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),i}if("string"===r){const{tensors2D:o,outShape:s}=si(e,t,n),i=o.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),c=1===o[0].shape[0],u=ir(i,s,r,c),l=a["bd"].computeOutShape(e.map(e=>e.shape),t),d=n.makeTensorInfo(l,r,u);return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}if(e.length>Object(a["ld"])().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const r=Math.floor(e.length/2),a=oi(e.slice(0,r),t,n),o=oi(e.slice(r),t,n),s=oi([a,o],t,n);return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),s}if(Object(a["ld"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const a=new ti(e.map(e=>e.shape),t);return n.runWebGLProgram(a,e,r)}const{tensors2D:o,outShape:s}=si(e,t,n),i=new ei(o.map(e=>e.shape)),c=n.runWebGLProgram(i,o,r);o.forEach(e=>n.disposeIntermediateTensorInfo(e));const u=qa({inputs:{x:c},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(c),u}function si(e,t,n){const r=a["bd"].computeOutShape(e.map(e=>e.shape),t),o=e.map(e=>qa({inputs:{x:e},attrs:{shape:[-1,a["Ld"].sizeFromShape(e.shape.slice(t))]},backend:n}));return{tensors2D:o,outShape:r}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ii(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,s=a["Ld"].parseAxisParam(o,t[0].shape)[0],i=a["bd"].computeOutShape(t.map(e=>e.shape),s);if(0===a["Ld"].sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);const c=t.filter(e=>a["Ld"].sizeFromShape(e.shape)>0);if(1===c.length)return Ca({inputs:{x:c[0]},backend:n});const u=c.map(e=>e.shape);return a["bd"].assertParamsConsistent(u,s),oi(c,s,n)}const ci={kernelName:a["A"],backendName:"webgl",kernelFunc:ii};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ui{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,i=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4,m="channelsLast"===e.dataFormat,b=m?1:2,g=m?2:3,y=m?3:1;let x="",v="";n&&(x=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,v="result = activation(result);");const O=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${x}\n\n      const ivec2 strides = ivec2(${i}, ${c});\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${y}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${b}], coords[${g}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${p}; wC++) {\n            int xC = xCCorner + wC * ${l};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${f}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===h}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${f}) *\n                    getW(wR, wC, ${f}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${f}, xR, xC) *\n                    getW(wR, wC, ${f}, d2);\n              }\n\n            } else if (${2===h}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${f}, d2),\n                getW(wR, wC, ${f} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${f}),\n                  getX(batch, xR, xC, ${f} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${f}, xR, xC),\n                  getX(batch, ${f} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===h}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${f}, d2),\n                getW(wR, wC, ${f} + 1, d2),\n                getW(wR, wC, ${f} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${f}),\n                  getX(batch, xR, xC, ${f} + 1),\n                  getX(batch, xR, xC, ${f} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${f}, xR, xC),\n                  getX(batch, ${f} + 1, xR, xC),\n                  getX(batch, ${f} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${O}\n        ${v}\n        setOutput(result);\n      }\n    `}}class li{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,l=e.filterDepth,d=e.filterHeight,p=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${a}, ${o}, ${s});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${l}; wF++) {\n          int xF = xFCorner + wF * ${i};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d}; wR++) {\n            int xR = xRCorner + wR * ${c};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${f}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===h}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${f}) *\n                  getW(wF, wR, wC, ${f}, d2);\n              } else if (${2===h}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${f}),\n                  getX(batch, xF, xR, xC, ${f} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${f}, d2),\n                  getW(wF, wR, wC, ${f} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===h}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${f}),\n                  getX(batch, xF, xR, xC, ${f} + 1),\n                  getX(batch, xF, xR, xC, ${f} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${f}, d2),\n                  getW(wF, wR, wC, ${f} + 1, d2),\n                  getW(wF, wR, wC, ${f} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class di{constructor(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const{filterWidth:r,inChannels:a,strideWidth:o,strideHeight:s,padInfo:i,outWidth:c,dilationWidth:u,dilationHeight:l,dataFormat:d}=n,{left:p,top:f}=i,h=a*r,m=be(),b="channelsLast"===d,g=b?0:1,y=b?1:2;let x="";for(let v=0;v<=1;v++)for(let n=0;n<=1;n++)x+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${v};\n\n          if(blockIndex < ${e[1]} && pos < ${e[0]}) {\n            offsetY = int(blockIndex / (${c})) * ${s} - ${f};\n            d0 = offsetY + ${l} * (pos / ${h});\n\n            if(d0 < ${t[g]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${c}.) * ${o}. - ${p}.);\n              d1 = offsetX + ${u} * (int(mod(float(pos), ${h}.) / ${a}.));\n\n              if(d1 < ${t[y]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${a}.));\n\n                if (${b}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*v+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*v+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${x}\n\n        ${m.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pi({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:c=null}){const u=e.shape,l=r.texData.get(e.dataId),d=n.inChannels,p=u[0]*u[1]*u[2],f=n.outChannels,h="channelsLast"===n.dataFormat,m=!1,b=!1;let g;const y=[],x=(1===p||1===f)&&d>uo,v=u[2]%2!==0&&!!l.isPacked;if(!x&&Object(a["ld"])().getBool("WEBGL_LAZILY_UNPACK")&&Object(a["ld"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&v){const d=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),p={dataId:e.dataId,shape:[1,d,n.inChannels],dtype:e.dtype},f=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,a["Ld"].assert(te(l.shape,p.shape),()=>`packed reshape ${l.shape} to ${p.shape} isn't free`);const x=qa({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(x);const v=lo({a:p,b:x,backend:r,transposeA:m,transposeB:b,bias:o,activation:c,preluActivationWeights:s,leakyreluAlpha:i}),O=r.texData.get(v.dataId);a["Ld"].assert(O.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=f,O.shape=n.outShape,g=Ca({inputs:{x:v},backend:r}),g.shape=n.outShape,y.push(v)}else{const a=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],l=qa({inputs:{x:e},backend:r,attrs:{shape:[1,a,n.inChannels]}}),d=qa({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),p=lo({a:l,b:d,transposeA:m,transposeB:b,backend:r,bias:o,activation:c,preluActivationWeights:s,leakyreluAlpha:i});g=qa({inputs:{x:p},backend:r,attrs:{shape:n.outShape}}),y.push(l),y.push(d),y.push(p)}for(const a of y)r.disposeIntermediateTensorInfo(a);return g}function fi({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:c=null}){const{filterWidth:u,filterHeight:l,inChannels:d,outWidth:p,outHeight:f,dataFormat:h}=n,m="channelsLast"===h,b=u*l*d,g=f*p,y=[b,g],x=!0,v=!1,O=[],w=qa({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),C=qa({inputs:{x:t},backend:r,attrs:{shape:[1,b,a["Ld"].sizeFromShape(t.shape)/b]}});O.push(w),O.push(C);const $=new di(y,w.shape,n),k=r.runWebGLProgram($,[w],"float32"),I=qa({inputs:{x:k},backend:r,attrs:{shape:[1,y[0],y[1]]}});O.push(k),O.push(I);const j=null!=o,E=null!=s,T="leakyrelu"===c,N=c?Ba(c,!0):null,S=new Va(I.shape,C.shape,[1,g,n.outChannels],x,v,j,N,E,T),A=[I,C];if(o&&A.push(o),E&&A.push(s),T){const e=r.makeTensorInfo([],"float32",a["Ld"].createScalarValue(i,"float32"));A.push(e),O.push(e)}const _=r.runWebGLProgram(S,A,"float32"),R=m?[1,f,p,n.outChannels]:[1,n.outChannels,f,p],F=qa({inputs:{x:_},backend:r,attrs:{shape:R}});O.push(_);for(const a of O)r.disposeIntermediateTensorInfo(a);return F}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hi(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:s}=t,{strides:i,pad:c,dataFormat:u,dilations:l,dimRoundingMode:d}=r,p=a["bd"].convertConv2DDataFormat(u),f=a["bd"].computeConv2DInfo(o.shape,s.shape,i,l,c,d,!1,p);let h;if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(Object(a["ld"])().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])h=fi({x:o,filter:s,convInfo:f,backend:n});else{const e=new ui(f);h=n.runWebGLProgram(e,[o,s],"float32")}else h=pi({x:o,filter:s,convInfo:f,backend:n});const m=qa({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),m}const mi={kernelName:a["B"],backendName:"webgl",kernelFunc:hi};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bi{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${a};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${o}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class gi{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left,c=o?1:2,u=o?2:3,l=o?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${l}];\n\n        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class yi{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${a};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${o};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${s};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class xi{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.front,c=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${i}, ${c}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${a}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:s}=t,{strides:i,pad:c,dataFormat:u,dimRoundingMode:l,filterShape:d}=r,p=a["bd"].convertConv2DDataFormat(u),f=a["bd"].computeConv2DInfo(o.shape,d,i,1,c,l,!1,p),h=new bi(f);return n.runWebGLProgram(h,[o,s],"float32")}const Oi={kernelName:a["C"],backendName:"webgl",kernelFunc:vi};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wi(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:s}=t,{inputShape:i,strides:c,pad:u,dataFormat:l,dimRoundingMode:d}=r,p=a["bd"].convertConv2DDataFormat(l),f=a["bd"].computeConv2DInfo(i,s.shape,c,1,u,d,!1,p),h=new gi(f);return n.runWebGLProgram(h,[o,s],"float32")}const Ci={kernelName:a["D"],backendName:"webgl",kernelFunc:wi};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $i(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:s}=t,{strides:i,pad:c,dilations:u}=r,l=a["bd"].computeConv3DInfo(o.shape,s.shape,i,u,c),d=new li(l);return n.runWebGLProgram(d,[o,s],"float32")}const ki={kernelName:a["E"],backendName:"webgl",kernelFunc:$i};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ii(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:s}=t,{strides:i,pad:c,filterShape:u}=r,l=a["bd"].computeConv3DInfo(o.shape,u,i,1,c),d=new yi(l);return n.runWebGLProgram(d,[o,s],"float32")}const ji={kernelName:a["F"],backendName:"webgl",kernelFunc:Ii};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ei(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:s}=t,{pad:i,strides:c,inputShape:u}=r,l=a["bd"].computeConv3DInfo(u,s.shape,c,1,i),d=new xi(l);return n.runWebGLProgram(d,[o,s],"float32")}const Ti={kernelName:a["G"],backendName:"webgl",kernelFunc:Ei},Ni=Fa+"\n  return cos(x);\n",Si=Pa({opSnippet:Ni}),Ai={kernelName:a["H"],backendName:"webgl",kernelFunc:Si},_i="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",Ri=Pa({opSnippet:_i}),Fi={kernelName:a["I"],backendName:"webgl",kernelFunc:Ri};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Di{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,i,c]=e,[u]=t,[l,d]=n;this.outputShape=[u,l,d,c];const p="bilinear"===r?1:0,[f,h]=[s-1+".0",i-1+".0"],[m,b,g]=l>1?[""+(s-1)/(l-1),"(y2-y1) * height_ratio",`y1*${f} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+f],[y,x,v]=d>1?[""+(i-1)/(d-1),"(x2-x1) * width_ratio",`x1*${h} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+h];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${b};\n        float width_scale = ${x};\n\n        float in_y = ${g};\n        if( in_y < 0.0 || in_y > ${f} ) {\n          setOutput(float(${a}));\n          return;\n        }\n        float in_x = ${v};\n        if( in_x < 0.0 || in_x > ${h} ) {\n          setOutput(float(${a}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${p} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Li=e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:o,boxInd:s}=t,{cropSize:i,method:c,extrapolationValue:u}=r,l=new Di(a.shape,o.shape,i,c,u);return n.runWebGLProgram(l,[a,o,s],"float32")},Pi={kernelName:a["J"],backendName:"webgl",kernelFunc:Li};class Mi{constructor(e,t,n){this.variableNames=["x"],this.outputShape=e;const r=e.length,a=t?"0.0":`getX(${Bi(r,"coords")})`,o=e[e.length-1];let s="",i="";t?(s=n?"end != "+(o-1):"end != 0",i=n?"end + 1":"end - 1"):(s=n?"end + pow2 < "+o:"end >= pow2",i=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${Pt(r)} coords = getOutputCoords();\n        int end = ${Vi(r,"coords")};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${s}) {\n          int idx = ${i};\n          ${Vi(r,"coords")} = idx;\n          val += getX(${Bi(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.index&&(this.index=t.getUniformLocation(n,"index")),t.gl.uniform1f(this.index,e)}}}function Bi(e,t){if(1===e)return""+t;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function Vi(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error(`Cumulative sum for rank ${e} is not yet supported`)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zi(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s,exclusive:i,reverse:c}=r,u=o.shape.length,l=a["bd"].getAxesPermutation([s],u);let d=o;null!=l&&(d=io({inputs:{x:o},backend:n,attrs:{perm:l}}));const p=a["bd"].getInnerMostAxes(1,u)[0];if(p!==u-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=`+s);const f=d.shape[p];let h=Ca({inputs:{x:d},backend:n});for(let a=0;a<=Math.ceil(Math.log2(f))-1;a++){const e=new Mi(d.shape,!1,c),t=e.getCustomSetupFunc(a),r=h;h=n.runWebGLProgram(e,[h],h.dtype,t),n.disposeIntermediateTensorInfo(r)}if(i){const e=new Mi(d.shape,i,c),t=h;h=n.runWebGLProgram(e,[h],h.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=l){const e=a["bd"].getUndoAxesPermutation(l),t=io({inputs:{x:h},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),t}return h}const Ui={kernelName:a["K"],backendName:"webgl",kernelFunc:zi};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wi(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:o}=t,{size:s,binaryOutput:i}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(o.dataId),r=ar(e,t,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(o),r=or(e,t,s,i);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+a.shape.length+".")}const Gi={kernelName:a["M"],backendName:"webgl",kernelFunc:Wi};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hi{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ki(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:s,dataFormat:i}=r;a["Ld"].assert(s>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+s);const c=o.shape[0],u="NHWC"===i?o.shape[1]:o.shape[2],l="NHWC"===i?o.shape[2]:o.shape[3],d="NHWC"===i?o.shape[3]:o.shape[1],p=u*s,f=l*s,h=d/(s*s),m="NHWC"===i?[c,p,f,h]:[c,h,p,f],b=new Hi(m,s,i);return n.runWebGLProgram(b,[o],o.dtype)}const qi={kernelName:a["N"],backendName:"webgl",kernelFunc:Ki};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xi{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.inHeight,s=e.inWidth,i=e.padInfo.top,c=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,d=e.dilationHeight,p=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,m=e.outChannels/e.inChannels;let b="",g="";n&&(b=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,g="result = activation(result);");const y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${u}, ${l});\n      const ivec2 pads = ivec2(${i}, ${c});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${m};\n        int q = d2 - d1 * ${m};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${f}; wR++) {\n          int xR = xRCorner + wR * ${d};\n\n          if (xR < 0 || xR >= ${o}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${p};\n\n            if (xC < 0 || xC >= ${s}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${y}\n        ${g}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yi{constructor(e,t=!1,n=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;const s=e.inHeight,i=e.inWidth,c=e.padInfo.top,u=e.padInfo.left,l=e.strideHeight,d=e.strideWidth,p=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,m=e.filterWidth,b=m;let g="int xR; int xC; int xCOffset;";for(let a=0;a<h;a++)for(let e=0;e<m;e++)g+=`\n          vec4 xTexelR${a}C${2*e} = vec4(0.);\n          vec4 wR${a}C${e} = vec4(0.);\n          vec4 xR${a}C${e} = vec4(0.);`;for(let O=0;O<h;O++)for(let e=0;e<b;e++){const t=2*e;if(g+=`\n          xR = xRCorner + ${O*p};\n          xC = xCCorner + ${t*f};\n        `,1===d){if(t<m&&(g+=u%2===1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${i}) {\n                  xTexelR${O}C${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${i}) {\n                    xTexelR${O}C${t}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${O}C${t} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${i}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${i}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${O}C${t} = vec4(previous.zw, xTexelR${O}C${t}.xy);\n                } else {\n                  xR${O}C${t} = vec4(0, 0, xTexelR${O}C${t}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${s} && xC >= 0 && xC < ${i}) {\n                  xTexelR${O}C${t} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${O}C${t} = vec4(0.);\n                }\n\n                xR${O}C${t} = xTexelR${O}C${t};\n              `,t+1<m)){const e=u%2===0?a["Ld"].nearestLargerEven(f):f;f%2===0&&u%2===1||f%2!==0&&u%2!==1?(g+=`\n                  xCOffset = xC + ${u%2} + ${e};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${i}) {\n                    xTexelR${O}C${t+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,f>1&&(g+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${s} &&\n                      xCOffset >= 0 && xCOffset < ${i}) {\n                      xTexelR${O}C${t} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${O}C${t} = vec4(0.);\n                    }\n                  `),g+=`\n                  xR${O}C${t+1} = vec4(\n                    xTexelR${O}C${t}.zw, xTexelR${O}C${t+2}.xy);\n                `):g+=`\n                  xCOffset = xC + ${e};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${i}) {\n                    xTexelR${O}C${t+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${O}C${t+1} = xTexelR${O}C${t+2};\n                `}}else t<m&&(g+=`\n              if(xR >= 0 && xR < ${s}) {\n            `,u%2===1?(g+=`\n                xCOffset = xC + 1 - ${d};\n                if(xCOffset >= 0 && xCOffset < ${i}) {\n                  xTexelR${O}C${t} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${O}C${t} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${i}) {\n                  xTexelR${O}C${t+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${O}C${t+2} = vec4(0.);\n                }\n\n                xR${O}C${t} = vec4(\n                  xTexelR${O}C${t}.zw, xTexelR${O}C${t+2}.zw);\n              `,t+1<m&&(g+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${d};\n                  if(xCOffset >= 0 && xCOffset < ${i}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${O}C${t+1} = vec4(xTexelR${O}C${t+2}.xy, final.xy);\n                `)):(g+=`\n                if(xC >= 0 && xC < ${i}) {\n                  xTexelR${O}C${t} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${O}C${t} = vec4(0.);\n                }\n\n                xCOffset = xC + ${d};\n                if(xCOffset >= 0 && xCOffset < ${i}) {\n                  xTexelR${O}C${t+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${O}C${t+2} = vec4(0.);\n                }\n\n                xR${O}C${t} = vec4(\n                  xTexelR${O}C${t}.xy, xTexelR${O}C${t+2}.xy);\n              `,t+1<m&&(g+=`\n                  xR${O}C${t+1} = vec4(\n                    xTexelR${O}C${t}.zw, xTexelR${O}C${t+2}.zw);\n                `)),g+="}");t<m&&(g+=`\n            vec4 wTexelR${O}C${t} = getW(${O}, ${t}, d1, q);\n            wR${O}C${t} = vec4(wTexelR${O}C${t}.xz, wTexelR${O}C${t}.xz);\n          `,t+1<m&&(g+=`\n              vec4 wTexelR${O}C${t+1} = getW(${O}, ${t+1}, d1, q);\n              wR${O}C${t+1} =\n                vec4(wTexelR${O}C${t+1}.xz, wTexelR${O}C${t+1}.xz);`))}for(let a=0;a<h;a++)for(let e=0;e<m;e++)g+=`dotProd += xR${a}C${e} * wR${a}C${e};`;let y="",x="";n&&(y=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:o?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,x="result = activation(result);");const v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${l}, ${d});\n      const ivec2 pads = ivec2(${c}, ${u});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${g}\n\n        vec4 result = dotProd;\n        ${v}\n        ${x}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qi(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:s}=t,{strides:i,pad:c,dilations:u,dimRoundingMode:l}=r;let d=u;null==d&&(d=[1,1]),a["Ld"].assert(a["bd"].eitherStridesOrDilationsAreOne(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);const p=a["bd"].computeConv2DInfo(o.shape,s.shape,i,d,c,l,!0);let f;return f=Object(a["ld"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels===1?new Yi(p):new Xi(p),n.runWebGLProgram(f,[o,s],"float32")}const Ji={kernelName:a["O"],backendName:"webgl",kernelFunc:Qi};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zi{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${o} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${a};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ec{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${i}; dm++) {\n              int d2 = d1 * ${i} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tc(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:s}=t,{strides:i,dilations:c,pad:u,dimRoundingMode:l,filterShape:d}=r,p=a["bd"].computeConv2DInfo(o.shape,d,i,c,u,l,!0),f=new Zi(p);return n.runWebGLProgram(f,[o,s],"float32")}const nc={kernelName:a["P"],backendName:"webgl",kernelFunc:tc};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rc(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:s}=t,{strides:i,dilations:c,pad:u,dimRoundingMode:l,inputShape:d}=r,p=a["bd"].computeConv2DInfo(d,s.shape,i,c,u,l,!0),f=new ec(p);return n.runWebGLProgram(f,[o,s],"float32")}const ac={kernelName:a["Q"],backendName:"webgl",kernelFunc:rc};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oc{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sc(e){const{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],s=a["Ld"].sizeFromShape(r.shape),i=qa({inputs:{x:r},backend:n,attrs:{shape:[s]}}),c=new oc(s),u=n.runWebGLProgram(c,[i],i.dtype),l=qa({inputs:{x:u},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),l}const ic={kernelName:a["R"],backendName:"webgl",kernelFunc:sc};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cc{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:o,filterHeight:s,filterWidth:i,dilationHeight:c,dilationWidth:u}=e,{top:l,left:d}=r;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${o});\n      const ivec2 pads = ivec2(${l}, ${d});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${s}; h++) {\n          int hIn = hBeg + h * ${c};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${i}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uc(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:s}=t,{strides:i,pad:c,dilations:u}=r,l=a["bd"].computeDilation2DInfo(o.shape,s.shape,i,c,"NHWC",u);let d;const p=new cc(l);d=n.runWebGLProgram(p,[o,s],"float32");const f=qa({inputs:{x:d},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(d),f}const lc={kernelName:a["S"],backendName:"webgl",kernelFunc:uc},dc="return (x >= 0.0) ? x : (exp(x) - 1.0);",pc="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",fc=Pa({opSnippet:dc,packedOpSnippet:pc}),hc={kernelName:a["T"],backendName:"webgl",kernelFunc:fc},mc="return (b >= 1.0) ? a : a * (b + 1.0);",bc="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",gc=e=>{const{inputs:t,backend:n}=e,{dy:r,y:o}=t,s=Object(a["ld"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wa(bc,r.shape,o.shape):new va(mc,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],r.dtype)},yc={kernelName:a["U"],backendName:"webgl",kernelFunc:gc},xc="\n  return vec4(equal(a, b));\n",vc="return float(a == b);",Oc=Ma({opSnippet:vc,packedOpSnippet:xc,dtype:"bool"}),wc={kernelName:a["V"],backendName:"webgl",kernelFunc:Oc},Cc=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${a["bd"].ERF_P};\n  float a1 = ${a["bd"].ERF_A1};\n  float a2 = ${a["bd"].ERF_A2};\n  float a3 = ${a["bd"].ERF_A3};\n  float a4 = ${a["bd"].ERF_A4};\n  float a5 = ${a["bd"].ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,$c=Pa({opSnippet:Cc}),kc={kernelName:a["W"],backendName:"webgl",kernelFunc:$c},Ic="return exp(x);",jc=Pa({opSnippet:Ic,packedOpSnippet:Ic,cpuKernelImpl:cr}),Ec={kernelName:a["X"],backendName:"webgl",kernelFunc:jc};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tc(e){const{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:s}=t,i=s.shape.length,c=s.shape.slice();let u=o;return o<0&&(a["Ld"].assert(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+o+1),c.splice(u,0,1),qa({inputs:{x:s},backend:r,attrs:{shape:c}})}const Nc={kernelName:a["Y"],backendName:"webgl",kernelFunc:Tc},Sc="return exp(x) - 1.0;",Ac=Pa({opSnippet:Sc,packedOpSnippet:Sc,cpuKernelImpl:ur}),_c={kernelName:a["Z"],backendName:"webgl",kernelFunc:Ac};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Rc{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";let s;if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);s="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${a};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${s}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fc(e,t,n){const r=n.texData.get(e.dataId),o=a["Ld"].sizeFromShape(e.shape),s=e.shape[e.shape.length-1],i=o/s,c=qa({inputs:{x:e},backend:n,attrs:{shape:[i,s]}}),u=c.shape,l=new Rc("real",u,t),d=new Rc("imag",u,t),p=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],f=n.runWebGLProgram(l,p,"float32"),h=n.runWebGLProgram(d,p,"float32"),m=ka({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const b=qa({inputs:{x:m},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),b}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dc(e){const{inputs:t,backend:n}=e,{input:r}=t;return Fc(r,!1,n)}const Lc={kernelName:a["ab"],backendName:"webgl",kernelFunc:Dc};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pc{constructor(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(e){return(t,n)=>{null==this.valueLoc&&(this.valueLoc=t.getUniformLocationNoThrow(n,"value")),t.gl.uniform1f(this.valueLoc,e)}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mc(e){const{backend:t,attrs:n}=e,{shape:r,value:o}=n;let{dtype:s}=n;if(s=s||a["Ld"].inferDtype(o),"string"===s){const e=a["Ld"].getArrayFromDType(s,a["Ld"].sizeFromShape(r));return e.fill(o),t.makeTensorInfo(r,s,e)}{const e=new Pc(r,o),n=e.getCustomSetupFunc(o);return t.runWebGLProgram(e,[],s,n)}}const Bc={kernelName:a["bb"],backendName:"webgl",kernelFunc:Mc};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vc{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zc={kernelName:a["cb"],backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,a=new Vc(n.shape),o=r.runWebGLProgram(a,[n],n.dtype);return o}},Uc="return floor(x);",Wc=Pa({opSnippet:Uc,packedOpSnippet:Uc,cpuKernelImpl:lr}),Gc={kernelName:a["db"],backendName:"webgl",kernelFunc:Wc},Hc="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",Kc="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",qc=Ma({opSnippet:Hc,packedOpSnippet:Kc,dtype:"int32"}),Xc={kernelName:a["eb"],backendName:"webgl",kernelFunc:qc};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Yc{constructor(e){this.variableNames=["A"];const t=be(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qc{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=be(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jc={kernelName:a["fb"],backendName:"webgl",kernelFunc:eu};let Zc;function eu(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:o}=t;const{numChannels:s}=r,i="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,c="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,u="undefined"!==typeof ImageBitmap&&o instanceof ImageBitmap,[l,d]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],f=[d,l],h=[d,l,s];(c||i||u)&&(null==Zc&&(Zc=document.createElement("canvas").getContext("2d")),Zc.canvas.width=l,Zc.canvas.height=d,Zc.drawImage(o,0,0,l,d),o=Zc.canvas);const m=n.makeTensorInfo(f,"int32");n.texData.get(m.dataId).usage=p.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),o);const b=Object(a["ld"])().getBool("WEBGL_PACK")?new Qc(h):new Yc(h),g=n.runWebGLProgram(b,[m],"int32");return n.disposeData(m.dataId),g}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tu(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:s,bias:i,preluActivationWeights:c}=t,{strides:u,pad:l,dataFormat:d,dilations:p,dimRoundingMode:f,activation:h,leakyreluAlpha:m}=r,b=a["bd"].convertConv2DDataFormat(d),g=a["bd"].computeConv2DInfo(o.shape,s.shape,u,p,l,f,!1,b);let y;const x=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Object(a["ld"])().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])y=fi({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:c,leakyreluAlpha:m});else{const e=null!=i,t=null!=c,r="leakyrelu"===h,u=h?Ba(h,!1):null,l=new ui(g,e,u,t,r),d=[o,s];if(i&&d.push(i),c&&d.push(c),r){const e=n.makeTensorInfo([],"float32",a["Ld"].createScalarValue(m,"float32"));d.push(e),x.push(e)}y=n.runWebGLProgram(l,d,"float32")}else y=pi({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:c,leakyreluAlpha:m});const v=qa({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return x.push(y),x.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}const nu={kernelName:a["hb"],backendName:"webgl",kernelFunc:tu};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ru(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:s,bias:i,preluActivationWeights:c}=t,{strides:u,pad:l,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:h}=r,m=[];let b=d;null==b&&(b=[1,1]),a["Ld"].assert(a["bd"].eitherStridesOrDilationsAreOne(u,b),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${b}'`);const g=a["bd"].computeConv2DInfo(o.shape,s.shape,u,b,l,p,!0),y=Object(a["ld"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,x=f?Ba(f,y):null,v=[o,s],O=null!=i,w=null!=c,C="leakyrelu"===f;if(O&&v.push(i),w&&v.push(c),C){const e=n.makeTensorInfo([],"float32",a["Ld"].createScalarValue(h,"float32"));v.push(e),m.push(e)}let $;$=y?new Yi(g,O,x,w,C):new Xi(g,O,x,w,C);const k=n.runWebGLProgram($,v,"float32");return m.forEach(e=>n.disposeIntermediateTensorInfo(e)),k}const au={kernelName:a["ib"],backendName:"webgl",kernelFunc:ru};class ou{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const r=Pt(t.length),a=Pt(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${a} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${o};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function su(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,s=o.shape,i=s[s.length-1],[c,u,l,d]=a["bd"].prepareAndValidate(r,o),p=qa({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),f=qa({inputs:{x:r},backend:n,attrs:{shape:[a["Ld"].sizeFromShape(r.shape)/l,l]}}),h=new ou(i,d,[u,l]),m=n.runWebGLProgram(h,[f,p],f.dtype),b=qa({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),b}const iu={kernelName:a["jb"],backendName:"webgl",kernelFunc:su};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cu{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=Pt(this.rank),r=uu(e,2);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}function uu(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push(""+n[a]);return r.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lu(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:s}=t,{axis:i,batchDims:c}=r,u=a["Ld"].parseAxisParam(i,o.shape)[0],l=a["bd"].segment_util.collectGatherOpShapeInfo(o,s,u,c),d=a["Ld"].sizeFromShape(s.shape),p=[],f=qa({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=qa({inputs:{x:s},backend:n,attrs:{shape:[l.batchSize,d/l.batchSize]}});p.push(f),p.push(h);const m=[l.batchSize,l.outerSize,d/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([o,s])||"string"===o.dtype){const e=n.bufferSync(h),t=n.bufferSync(f),r=dr(t,e,m);return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(l.outputShape,r.dtype,r.values)}const b=new cu(f.shape,m),g=n.runWebGLProgram(b,[f,h],f.dtype);p.push(g);const y=qa({inputs:{x:g},backend:n,attrs:{shape:l.outputShape}});return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}const du={kernelName:a["kb"],backendName:"webgl",kernelFunc:lu},pu="return float(a > b);",fu="\n  return vec4(greaterThan(a, b));\n",hu=Ma({opSnippet:pu,packedOpSnippet:fu,cpuKernelImpl:pr,dtype:"bool"}),mu={kernelName:a["lb"],backendName:"webgl",kernelFunc:hu},bu="return float(a >= b);",gu="\n  return vec4(greaterThanEqual(a, b));\n",yu=Ma({opSnippet:bu,packedOpSnippet:gu,dtype:"bool"}),xu={kernelName:a["mb"],backendName:"webgl",kernelFunc:yu};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vu(e){const{inputs:t,backend:n}=e,{input:r}=t;return Fc(r,!0,n)}const Ou={kernelName:a["nb"],backendName:"webgl",kernelFunc:vu},wu="return float(!isnan(x) && !isinf(x));",Cu=Pa({opSnippet:wu,dtype:"bool"}),$u={kernelName:a["qb"],backendName:"webgl",kernelFunc:Cu},ku="return float(isinf(x));",Iu=Pa({opSnippet:ku,dtype:"bool"}),ju={kernelName:a["rb"],backendName:"webgl",kernelFunc:Iu},Eu="return float(isnan(x));",Tu=Pa({opSnippet:Eu,dtype:"bool"}),Nu={kernelName:a["sb"],backendName:"webgl",kernelFunc:Tu},Su="return float(a < b);",Au="\n  return vec4(lessThan(a, b));\n",_u=Ma({opSnippet:Su,packedOpSnippet:Au,cpuKernelImpl:fr,dtype:"bool"}),Ru={kernelName:a["xb"],backendName:"webgl",kernelFunc:_u},Fu="return float(a <= b);",Du="\n  return vec4(lessThanEqual(a, b));\n",Lu=Ma({opSnippet:Fu,packedOpSnippet:Du,dtype:"bool"}),Pu={kernelName:a["yb"],backendName:"webgl",kernelFunc:Lu};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mu(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:o}=n,s=hr(r,a,o);return t.makeTensorInfo([s.length],"float32",s)}const Bu={kernelName:a["zb"],backendName:"webgl",kernelFunc:Mu},Vu="if (x < 0.0) return NAN;\n  return log(x);",zu="\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",Uu=Pa({opSnippet:Vu,packedOpSnippet:zu,cpuKernelImpl:mr}),Wu={kernelName:a["Ab"],backendName:"webgl",kernelFunc:Uu},Gu="return log(1.0 + x);",Hu=Pa({opSnippet:Gu}),Ku={kernelName:a["Bb"],backendName:"webgl",kernelFunc:Hu},qu="return float(a >= 1.0 && b >= 1.0);",Xu="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",Yu=Ma({opSnippet:qu,packedOpSnippet:Xu,dtype:"bool"}),Qu={kernelName:a["Cb"],backendName:"webgl",kernelFunc:Yu},Ju="return float(!(x >= 1.0));",Zu=Pa({opSnippet:Ju}),el={kernelName:a["Db"],backendName:"webgl",kernelFunc:Zu},tl="return float(a >= 1.0 || b >= 1.0);",nl="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",rl=Ma({opSnippet:tl,packedOpSnippet:nl,dtype:"bool"}),al={kernelName:a["Eb"],backendName:"webgl",kernelFunc:rl};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ol{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const o=t,s=e[3]-1;let i;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${c})`:1===a?`1.0/(${c})`:`exp(log(${c}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${s}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${i};\n        setOutput(val);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sl{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,s=e[3]-1;let i;this.outputShape=e;const c=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${c})`:1===a?`1.0/(${c})`:`exp(log(${c}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${i};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const il=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:s,bias:i,alpha:c,beta:u}=r,l=Object(a["ld"])().getBool("WEBGL_PACK_NORMALIZATION")?new sl(o.shape,s,i,c,u):new ol(o.shape,s,i,c,u);return n.runWebGLProgram(l,[o],o.dtype)},cl={kernelName:a["ub"],backendName:"webgl",kernelFunc:il};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ul{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${a})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${a});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ll=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:o,dy:s}=t,{depthRadius:i,bias:c,alpha:u,beta:l}=r,d=new ul(a.shape,i,c,u,l);return n.runWebGLProgram(d,[a,o,s],a.dtype)},dl={kernelName:a["vb"],backendName:"webgl",kernelFunc:ll};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pl(e,t,n,r){const o=a["Ld"].sizeFromShape(t),s=a["Ld"].sizeFromShape(e.shape),i=s/o,c=qa({inputs:{x:e},attrs:{shape:[i,o]},backend:r}),u=Za(c,e.dtype,"max",r),l=qa({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(c),r.disposeIntermediateTensorInfo(u),l}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fl(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:s,keepDims:i}=r,c=o.shape.length,u=a["Ld"].parseAxisParam(s,o.shape);let l=u;const d=a["bd"].getAxesPermutation(l,c),p=null!=d,f=n.shouldExecuteOnCPU([o]);let h=o;if(p){if(f){const e=n.texData.get(h.dataId),t=e.values,r=new Array(c);for(let n=0;n<r.length;n++)r[n]=o.shape[d[n]];const a=Nr(t,o.shape,o.dtype,d,r);h=n.makeTensorInfo(r,o.dtype);const s=n.texData.get(h.dataId);s.values=a}else h=ro(o,d,n);l=a["bd"].getInnerMostAxes(l.length,c)}a["bd"].assertAxesAreInnerMostDims("max",l,c);const[m,b]=a["bd"].computeOutAndReduceShapes(h.shape,l);let g,y=m;if(i&&(y=a["bd"].expandShapeToKeepDim(m,u)),f){const e=n.texData.get(h.dataId),t=e.values,r=br(t,a["Ld"].sizeFromShape(b),y,o.dtype);g=n.makeTensorInfo(y,o.dtype);const s=n.texData.get(g.dataId);s.values=r}else g=pl(h,b,y,n);return p&&n.disposeIntermediateTensorInfo(h),g}const hl={kernelName:a["Fb"],backendName:"webgl",kernelFunc:fl},ml=xa+"\n  return max(a, b);\n",bl="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Oa+"\n  return result;\n",gl=Ma({opSnippet:ml,packedOpSnippet:bl,cpuKernelImpl:gr}),yl={kernelName:a["Lb"],backendName:"webgl",kernelFunc:gl};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xl(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;he(o,"maxPool");const{filterSize:s,strides:i,pad:c,dimRoundingMode:u}=r,l=1;a["Ld"].assert(a["bd"].eitherStridesOrDilationsAreOne(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const d=a["bd"].computePool2DInfo(o.shape,s,i,l,c,u);if(1===d.filterWidth&&1===d.filterHeight&&a["Ld"].arraysEqual(d.inShape,d.outShape))return Ca({inputs:{x:o},backend:n});const p=new os(d,"max",!1);return n.runWebGLProgram(p,[o],o.dtype)}const vl={kernelName:a["Gb"],backendName:"webgl",kernelFunc:xl};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ol(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:s,strides:i,pad:c,dataFormat:u,dimRoundingMode:l}=r,d=[1,1,1],p=a["bd"].computePool3DInfo(o.shape,s,i,d,c,l,u),f=new ss(p,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const wl={kernelName:a["Hb"],backendName:"webgl",kernelFunc:Ol};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cl{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=a-1-e.padInfo.top,i=o-1-e.padInfo.left,c=a*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class $l{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=i-1-e.padInfo.front,d=c-1-e.padInfo.top,p=u-1-e.padInfo.left,f=i*c*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${l}, ${d}, ${p});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${i};\n           wD += ${a}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${o}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${s}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${f} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${c} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kl(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:s}=t,i=s,{filterSize:c,strides:u,pad:l,dimRoundingMode:d}=r,p=[1,1,1],f=a["bd"].computePool3DInfo(i.shape,c,u,p,l,d),h=new ss(f,"max",!0),m=n.runWebGLProgram(h,[i],i.dtype),b=new $l(f),g=n.runWebGLProgram(b,[o,m],i.dtype);return n.disposeIntermediateTensorInfo(m),g}const Il={kernelName:a["Ib"],backendName:"webgl",kernelFunc:kl};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jl(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:s,output:i}=t,c=s;he([s,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:d,dimRoundingMode:p}=r,f=a["bd"].computePool2DInfo(c.shape,u,l,1,d,p),h=!0,m=new os(f,"max",h),b=n.runWebGLProgram(m,[c],c.dtype),g=new Cl(f),y=n.runWebGLProgram(g,[o,b],c.dtype);return n.disposeIntermediateTensorInfo(b),y}const El={kernelName:a["Jb"],backendName:"webgl",kernelFunc:jl};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tl(e,t,n,r){let a=new os(n,"max",!1);const o=r.runWebGLProgram(a,[e],"float32");a=new os(n,"max",!0,!0,t);const s=r.runWebGLProgram(a,[e],"float32");return[o,s]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nl={kernelName:a["Kb"],backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:o,strides:s,pad:i,includeBatchInIndex:c}=t,u=n;a["Ld"].assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];a["Ld"].assert(a["bd"].eitherStridesOrDilationsAreOne(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const d=a["bd"].computePool2DInfo(r.shape,o,s,l,i),[p,f]=Tl(r,c,d,u);return[p,f]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sl(e,t,n,r){const o=a["Ld"].sizeFromShape(t),s=a["Ld"].sizeFromShape(e.shape),i=s/o,c=qa({inputs:{x:e},attrs:{shape:[i,o]},backend:r}),u=Za(c,"float32","mean",r),l=qa({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(c),r.disposeIntermediateTensorInfo(u),l}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Al={kernelName:a["Mb"],backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:o,axis:s}=t,i=n,c=r.shape.length,u=a["Ld"].parseAxisParam(s,r.shape);let l=u;const d=a["bd"].getAxesPermutation(l,c),p=null!=d,f=i.shouldExecuteOnCPU([r]),h=[];let m=r;if(p){if(f){const e=i.texData.get(m.dataId),t=e.values,n=new Array(c);for(let s=0;s<n.length;s++)n[s]=r.shape[d[s]];const a=Nr(t,r.shape,r.dtype,d,n);m=i.makeTensorInfo(n,r.dtype);const o=i.texData.get(m.dataId);o.values=a}else m=ro(r,d,i);h.push(m),l=a["bd"].getInnerMostAxes(l.length,c)}a["bd"].assertAxesAreInnerMostDims("sum",l,c);const[b,g]=a["bd"].computeOutAndReduceShapes(m.shape,l);let y=b;o&&(y=a["bd"].expandShapeToKeepDim(b,u));const x=Sl(m,g,y,i);for(const a of h)i.disposeIntermediateTensorInfo(a);return x}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _l(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s,keepDims:i}=r,c=o.shape.length,u=a["Ld"].parseAxisParam(s,o.shape);let l=u;const d=a["bd"].getAxesPermutation(l,c);let p=o;null!=d&&(p=io({inputs:{x:o},backend:n,attrs:{perm:d}}),l=a["bd"].getInnerMostAxes(l.length,o.shape.length)),a["bd"].assertAxesAreInnerMostDims("min",l,c);const[f,h]=a["bd"].computeOutAndReduceShapes(p.shape,l),m=a["Ld"].sizeFromShape(h),b=qa({inputs:{x:p},backend:n,attrs:{shape:[-1,m]}}),g=Za(b,b.dtype,"min",n);let y;if(i){const e=a["bd"].expandShapeToKeepDim(f,u);y=qa({inputs:{x:g},backend:n,attrs:{shape:e}})}else y=qa({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),null!=d&&n.disposeIntermediateTensorInfo(p),y}const Rl={kernelName:a["Nb"],backendName:"webgl",kernelFunc:_l},Fl=xa+"\n  return min(a, b);\n",Dl="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Oa+"\n  return result;\n",Ll=Ma({opSnippet:Fl,packedOpSnippet:Dl,cpuKernelImpl:yr}),Pl={kernelName:a["Ob"],backendName:"webgl",kernelFunc:Ll};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ml{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=Pt(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c="reflect"===n?0:1;this.userCode=1!==r?`\n      ${a} start = ${a}(${o});\n      ${a} end = ${a}(${s});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${a} coords = outC - start;\n        setOutput(getX(${i}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bl{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=Pt(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),i=_r("rc",r),c=_r("source",r),u=`${i[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d="reflect"===n?0:1;let p="";if(1===r){const e=`\n        ${a} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${d};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${d};\n        }\n        source -= start;\n      `;p=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${i[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n      `}else{const e=`\n        ${a} source = rc;\n        ${a} lt = ${a}(lessThan(source, start));\n        ${a} gte = ${a}(greaterThanEqual(source, end));\n        ${a} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${d}) +\n                gte * ((end - 1) * 2 - source + ${d});\n        source -= start;\n      `;p=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${c.join()}), ${l});\n        ${i[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${c.join()}), ${l});\n        }\n        rc = outputLoc;\n        ${i[r-2]} += 1;\n        if(${i[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${c.join()}), ${l});\n          ${i[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${c.join()}), ${l});\n          }\n        }\n      `}this.userCode=`\n      const ${a} start = ${a}(${o});\n      const ${a} end = ${a}(${s});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vl=({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:o,mode:s}=n,i=Object(a["ld"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bl(r.shape,o,s):new Ml(r.shape,o,s),c=t.runWebGLProgram(i,[r],r.dtype);return c},zl={kernelName:a["Pb"],backendName:"webgl",kernelFunc:Vl},Ul="if (b == 0.0) return NAN;\n  return mod(a, b);",Wl="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+Oa+"\n  return result;\n",Gl=Ma({opSnippet:Ul,packedOpSnippet:Wl}),Hl={kernelName:a["Qb"],backendName:"webgl",kernelFunc:Gl};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Kl{constructor(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}getCustomSetupFunc(e){return(t,n)=>{null==this.seedLoc&&(this.seedLoc=t.getUniformLocation(n,"seed")),t.gl.uniform1f(this.seedLoc,e)}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ql="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",Xl="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",Yl=Ma({opSnippet:ql,packedOpSnippet:Xl,checkOutOfBounds:!0}),Ql={kernelName:a["hc"],backendName:"webgl",kernelFunc:Yl},Jl="return a - b;",Zl=Ma({opSnippet:Jl,packedOpSnippet:Jl,supportsComplex:!0,cpuKernelImpl:jr}),ed={kernelName:a["Mc"],backendName:"webgl",kernelFunc:Zl};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function td(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:s}=r,i=a["Ld"].parseAxisParam([s],o.shape),c=fl({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),u=a["bd"].expandShapeToKeepDim(c.shape,i),l=qa({inputs:{x:c},backend:n,attrs:{shape:u}}),d=Zl({inputs:{a:o,b:l},backend:n}),p=jc({inputs:{x:d},backend:n}),f=oo({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:!1}}),h=qa({inputs:{x:f},backend:n,attrs:{shape:u}}),m=Yl({inputs:{a:p,b:h},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),m}const nd={kernelName:a["Cc"],backendName:"webgl",kernelFunc:td};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rd(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:o,seed:s,normalized:i}=r,c=i?a:td({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=c.shape[0],l=c.shape[1],d=new Kl(u,l,o),p=d.getCustomSetupFunc(s),f=n.runWebGLProgram(d,[c],"int32",p);return i||n.disposeIntermediateTensorInfo(c),f}const ad={kernelName:a["Rb"],backendName:"webgl",kernelFunc:rd},od="return -x;";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sd(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=vr(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let o;return o=Object(a["ld"])().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new ia(r.shape,od):new Xr(r.shape,od),n.runWebGLProgram(o,[r],r.dtype)}const id={kernelName:a["Tb"],backendName:"webgl",kernelFunc:sd},cd=a["rd"].nonMaxSuppressionV3Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ud(e){a["bd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:c,scoreThreshold:u}=r,l=n.readSync(o.dataId),d=n.readSync(s.dataId),{selectedIndices:p}=cd(l,d,i,c,u);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}const ld={kernelName:a["Ub"],backendName:"webgl",kernelFunc:ud},dd=a["rd"].nonMaxSuppressionV4Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pd(e){a["bd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:c,scoreThreshold:u,padToMaxOutputSize:l}=r,d=n.readSync(o.dataId),p=n.readSync(s.dataId),{selectedIndices:f,validOutputs:h}=dd(d,p,i,c,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const fd={kernelName:a["Vb"],backendName:"webgl",kernelFunc:pd},hd=a["rd"].nonMaxSuppressionV5Impl;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function md(e){a["bd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:s}=t,{maxOutputSize:i,iouThreshold:c,scoreThreshold:u,softNmsSigma:l}=r,d=n.readSync(o.dataId),p=n.readSync(s.dataId),f=i,h=c,m=u,b=l,{selectedIndices:g,selectedScores:y}=hd(d,p,f,h,m,b);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const bd={kernelName:a["Wb"],backendName:"webgl",kernelFunc:md};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gd{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yd=e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{depth:s,onValue:i,offValue:c}=r,u=a["Ld"].sizeFromShape(o.shape),l=new gd(u,s,i,c),d=qa({inputs:{x:o},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(l,[d],o.dtype);n.disposeIntermediateTensorInfo(d);const f=[...o.shape,s],h=qa({inputs:{x:p},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),h},xd={kernelName:a["Yb"],backendName:"webgl",kernelFunc:yd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vd(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=Ls({inputs:{input:r},backend:n}),t=vd({inputs:{x:e},backend:n}),a=ri({inputs:{input:r},backend:n}),o=vd({inputs:{x:a},backend:n}),s=ka({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),s}return Mc({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Od={kernelName:a["Yc"],backendName:"webgl",kernelFunc:vd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wd(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const e=Ls({inputs:{input:r},backend:n}),t=wd({inputs:{x:e},backend:n}),a=ri({inputs:{input:r},backend:n}),o=vd({inputs:{x:a},backend:n}),s=ka({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),s}return Mc({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const Cd={kernelName:a["Zb"],backendName:"webgl",kernelFunc:wd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $d(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return Tc({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const s=t[0].shape,i=t[0].dtype;t.forEach(e=>{a["Ld"].assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),a["Ld"].assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const c=[],u=t.map(e=>{const t=Tc({inputs:{input:e},backend:n,attrs:{dim:o}});return c.push(t),t}),l=ii({inputs:u,backend:n,attrs:{axis:o}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}const kd={kernelName:a["ac"],backendName:"webgl",kernelFunc:$d};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Id{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=Pt(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${a} start = ${a}(${o});\n      ${a} end = ${a}(${s});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${n}));\n        } else {\n          ${a} coords = outC - start;\n          setOutput(getX(${i}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${n}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jd{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=Pt(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),i=_r("rc",r),c=_r("source",r),u=`${i[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${c.slice(-2).join()})`,d=[a+" rc = outputLoc;",`${i[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${i[r-2]} += 1;\n       if(${i[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${i[r-1]} += 1;\n         if(${u}) {`],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let f="";for(let h=0,m=1===r?2:4;h<m;h++)f+=`\n        ${d[h]}\n        if (${p}) {\n          result[${h}] = float(${n});\n        } else {\n          ${a} source = rc - start;\n          result[${h}] = getChannel(getX(${c.join()}), ${l});\n        }\n      `;f+=1===r?"} ":"}}",this.userCode=`\n      const ${a} start = ${a}(${o});\n      const ${a} end = ${a}(${s});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${f}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ed=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:s,constantValue:i}=r,c=Object(a["ld"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jd(o.shape,s,i):new Id(o.shape,s,i);return n.runWebGLProgram(c,[o],o.dtype)},Td={kernelName:a["bc"],backendName:"webgl",kernelFunc:Ed},Nd="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",Sd="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+Oa+"\n  return result;\n",Ad=Ma({opSnippet:Nd,packedOpSnippet:Sd}),_d={kernelName:a["cc"],backendName:"webgl",kernelFunc:Ad};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rd(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:s,keepDims:i}=r,c=o.shape.length,u=[],l=a["Ld"].parseAxisParam(s,o.shape);let d=l;const p=a["bd"].getAxesPermutation(d,c);let f,h=o;if(null!=p&&(h=io({inputs:{x:o},backend:n,attrs:{perm:p}}),d=a["bd"].getInnerMostAxes(d.length,c),u.push(h)),a["bd"].assertAxesAreInnerMostDims("prod",d,c),n.shouldExecuteOnCPU([h])){const e=n.texData.get(h.dataId).values,{outVals:t,outShape:r,outDtype:a}=Or(h.shape,h.dtype,e,d);f=n.makeTensorInfo(r,a,t)}else{const[e,t]=a["bd"].computeOutAndReduceShapes(h.shape,d),r=a["Ld"].sizeFromShape(t),s=qa({inputs:{x:h},backend:n,attrs:{shape:[-1,r]}}),i=Object(a["Ed"])(o.dtype),c=Za(s,i,"prod",n);f=qa({inputs:{x:c},backend:n,attrs:{shape:e}}),u.push(s),u.push(c)}if(i){u.push(f);const e=a["bd"].expandShapeToKeepDim(f.shape,l);f=qa({inputs:{x:f},backend:n,attrs:{shape:e}})}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}const Fd={kernelName:a["ec"],backendName:"webgl",kernelFunc:Rd},Dd=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:o,dtype:s}=n,i=wr(r,a,o,s);return t.makeTensorInfo([i.length],s,i)},Ld={kernelName:a["fc"],backendName:"webgl",kernelFunc:Dd},Pd="return 1.0 / x;",Md=Pa({opSnippet:Pd}),Bd={kernelName:a["ic"],backendName:"webgl",kernelFunc:Md},Vd=Yr+"\n  return (x < 0.0) ? 0.0 : x;\n",zd="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ud=Pa({opSnippet:Vd,packedOpSnippet:zd}),Wd={kernelName:a["jc"],backendName:"webgl",kernelFunc:Ud},Gd=Yr+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Hd="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Kd=Pa({opSnippet:Gd,packedOpSnippet:Hd}),qd={kernelName:a["kc"],backendName:"webgl",kernelFunc:Kd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Xd{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const u=[r&&t>1?s-1:s,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yd{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const u=[r&&t>1?s-1:s,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]},\n          ${u[1]/l[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${i}.0,\n                                     ${i}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qd(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:s,halfPixelCenters:i,size:c}=r,[u,l]=c,d=Object(a["ld"])().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Yd(o.shape,u,l,s,i):new Xd(o.shape,u,l,s,i);return n.runWebGLProgram(d,[o],"float32")}const Jd={kernelName:a["mc"],backendName:"webgl",kernelFunc:Qd};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zd{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,o,s]=e,i=[n&&o>1?r-1:r,n&&s>1?a-1:a],c=[n&&o>1?o-1:o,n&&s>1?s-1:s],u=i[0]/c[0],l=i[1]/c[1],d=1/u,p=1/l,f=2*Math.ceil(d)+2,h=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${f});\n        const int winWidth = int(${h});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ep(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:o}=t,{alignCorners:s}=r,i=new Zd(o.shape,a.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}const tp={kernelName:a["nc"],backendName:"webgl",kernelFunc:ep};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class np{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[o,s,i,c]=e;this.outputShape=[o,t,n,c];const u=[r&&t>1?s-1:s,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let p;p=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/l[0]},\n          ${u[1]/l[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rp(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:o,halfPixelCenters:s,size:i}=r,[c,u]=i,l=new np(a.shape,c,u,o,s);return n.runWebGLProgram(l,[a],a.dtype)}const ap={kernelName:a["oc"],backendName:"webgl",kernelFunc:rp};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class op{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,o,s]=e,i=[n&&o>1?r-1:r,n&&s>1?a-1:a],c=[n&&o>1?o-1:o,n&&s>1?s-1:s],u=i[0]/c[0],l=i[1]/c[1],d=1/u,p=1/l,f=2*Math.ceil(d)+2,h=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${f});\n        const int winWidth = int(${h});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${i[0]}) *\n                (float(dyR) / float(${c[0]}));\n\n            float sourceFracCol =\n                float(${i[1]}) *\n                  (float(dyC) / float(${c[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sp(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:o}=t,{alignCorners:s}=r,i=new op(o.shape,a.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}const ip={kernelName:a["pc"],backendName:"webgl",kernelFunc:sp};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cp{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`,a=e.map((e,t)=>r(t)).join(","),o=Pt(n);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class up{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=_r("rc",n),a=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,o=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,s=Pt(n);function i(e){return d(e)}function c(e){return e[n-1]="("+e[n-1]+" + 1)",d(e)}function u(e){return e[n-2]="("+e[n-2]+" + 1)",d(e)}function l(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",d(e)}function d(t){const n=e.map((e,n)=>p(n,t)),r=n.join(","),a=n.slice(-2).join(",");return`getChannel(getX(${r}), vec2(${a}))`}function p(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:""+r[n]}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${a}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${s} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${i(r.slice())};\n          if(${a}){\n            result.g = ${c(r.slice())};\n          }\n          if(${o}) {\n            result.b = ${u(r.slice())};\n            if(${a}) {\n              result.a = ${l(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lp(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:s}=r,i=o.shape.length,c=a["Ld"].parseAxisParam(s,o.shape);if(0===i)return Ca({inputs:{x:o},backend:n});const u=Object(a["ld"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new up(o.shape,c):new cp(o.shape,c);return n.runWebGLProgram(u,[o],o.dtype)}const dp={kernelName:a["qc"],backendName:"webgl",kernelFunc:lp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pp{constructor(e,t,n,r){this.variableNames=["Image"],this.outputShape=[];const o=e[1],s=e[2],i=Math.sin(t).toFixed(3),c=Math.cos(t).toFixed(3);this.outputShape=e;const[u,l]=a["bd"].getImageCenter(r,o,s),d=u.toFixed(3),p=l.toFixed(3);let f="";f="number"===typeof n?`float outputValue = ${n.toFixed(2)};`:`\n        vec3 fill = vec3(${n.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ${d}) * ${c} - (float(y) - ${p}) * ${i};\n          float coordYFloat = (float(x) - ${d}) * ${i} + (float(y) - ${p}) * ${c};\n          int coordX = int(round(coordXFloat + ${d}));\n          int coordY = int(round(coordYFloat + ${p}));\n          ${f}\n          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${o}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fp={kernelName:a["rc"],backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:a,fillValue:o,center:s}=t,i=n,c=new pp(r.shape,a,o,s),u=i.runWebGLProgram(c,[r],r.dtype);return u}},hp="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",mp=Pa({opSnippet:hp}),bp={kernelName:a["sc"],backendName:"webgl",kernelFunc:mp},gp="return inversesqrt(x);",yp=Pa({opSnippet:gp,cpuKernelImpl:Cr}),xp={kernelName:a["tc"],backendName:"webgl",kernelFunc:yp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class vp{constructor(e,t,n,r,a,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const i=Pt(a.length),c=Pt(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const l=`getIndices(${u})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const p=`getUpdates(${d})`,f=t>1?"strides[j]":"strides";this.userCode=`\n        ${i} strides = ${i}(${a});\n\n        void main() {\n          ${c} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${l});\n              flattenedIndex += index * ${f};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${p};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Op(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:s}=t,{shape:i}=r,{sliceRank:c,numUpdates:u,sliceSize:l,strides:d,outputSize:p}=a["bd"].calculateShapes(s,o,i),f=[p/l,l];if(0===p)return n.makeTensorInfo(i,o.dtype);const h=qa({inputs:{x:o},backend:n,attrs:{shape:[u,c]}}),m=qa({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),b=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new vp(u,c,h.shape.length,m.shape.length,d,f),y=n.runWebGLProgram(g,[m,h,b],m.dtype),x=qa({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}const wp={kernelName:a["uc"],backendName:"webgl",kernelFunc:Op};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cp{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[];for(let r=0;r<t.length;r++)s.push(""+n[r]),r<e&&o.push(""+n[r]);r=o.join(),a=s.join()}const o=Pt(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${a}));\n        } else {\n          setOutput(getB(${a}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $p(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:s}=t,i=new Cp(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,s],Object(a["Kd"])(o.dtype,s.dtype))}const kp={kernelName:a["vc"],backendName:"webgl",kernelFunc:$p},Ip=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${a["bd"].SELU_SCALEALPHA};\n  float scale = ${a["bd"].SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,jp=Pa({opSnippet:Ip}),Ep={kernelName:a["wc"],backendName:"webgl",kernelFunc:jp},Tp="return 1.0 / (1.0 + exp(-1.0 * x));",Np=Pa({opSnippet:Tp}),Sp={kernelName:a["xc"],backendName:"webgl",kernelFunc:Np},Ap="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",_p=Pa({opSnippet:Ap}),Rp={kernelName:a["yc"],backendName:"webgl",kernelFunc:_p},Fp=Fa+"\n  return sin(x);\n",Dp=Pa({opSnippet:Fp}),Lp={kernelName:a["zc"],backendName:"webgl",kernelFunc:Dp},Pp="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",Mp=Pa({opSnippet:Pp}),Bp={kernelName:a["Ac"],backendName:"webgl",kernelFunc:Mp},Vp="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",zp=Pa({opSnippet:Vp}),Up={kernelName:a["Dc"],backendName:"webgl",kernelFunc:zp},Wp=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:s,paddings:i}=r;a["Ld"].assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const c=s.reduce((e,t)=>e*t),u=[[0,0]];u.push(...i);for(let a=1+s.length;a<o.shape.length;++a)u.push([0,0]);const l=[],d=Ed({inputs:{x:o},backend:n,attrs:{paddings:u,constantValue:0}}),p=a["bd"].getReshaped(d.shape,s,c,!1),f=a["bd"].getPermuted(p.length,s.length,!1),h=a["bd"].getReshapedPermuted(d.shape,s,c,!1),m=qa({inputs:{x:d},backend:n,attrs:{shape:p}}),b=io({inputs:{x:m},backend:n,attrs:{perm:f}}),g=qa({inputs:{x:b},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(b),l.forEach(e=>n.disposeIntermediateTensorInfo(e)),g},Gp={kernelName:a["Ec"],backendName:"webgl",kernelFunc:Wp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hp(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:s,defaultValue:i}=t,{outputShape:c}=r,{sliceRank:u,numUpdates:l,strides:d,outputSize:p}=a["bd"].calculateShapes(s,o,c),f=!1,h=new vp(l,u,o.shape.length,s.shape.length,d,[p,1],f),m=n.runWebGLProgram(h,[s,o,i],s.dtype),b=qa({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(m),b}const Kp={kernelName:a["Fc"],backendName:"webgl",kernelFunc:Hp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qp(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:s,axis:i}=r,c=a["Ld"].parseAxisParam(i,o.shape)[0],u=a["bd"].prepareSplitSize(o,s,c),l=o.shape.length,d=new Array(l).fill(0),p=o.shape.slice();return u.map(e=>{const t=[...p];t[c]=e;const r=Es({inputs:{x:o},backend:n,attrs:{begin:d,size:t}});return d[c]+=e,r})}const Xp={kernelName:a["Gc"],backendName:"webgl",kernelFunc:qp},Yp="return sqrt(x);",Qp=Pa({opSnippet:Yp}),Jp={kernelName:a["Hc"],backendName:"webgl",kernelFunc:Qp},Zp="return x * x;",ef=Pa({opSnippet:Zp}),tf={kernelName:a["Ic"],backendName:"webgl",kernelFunc:ef},nf="return (a - b) * (a - b);",rf=Ma({opSnippet:nf,packedOpSnippet:nf}),af={kernelName:a["Jc"],backendName:"webgl",kernelFunc:rf};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function of({inputs:e,attrs:t,backend:n}){const{x:r}=e,a=Yr+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,o=new Xr(r.shape,a);return n.runWebGLProgram(o,[r],r.dtype)}const sf={kernelName:a["Kc"],backendName:"webgl",kernelFunc:of};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cf{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=Pt(n.length),o=Pt(n.length);let s="";if(1===r)s="coords * strides + begin";else{let e=0;s=n.map((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${a} begin = ${a}(${e});\n      ${a} strides = ${a}(${t});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uf(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:s,end:i,strides:c,beginMask:u,endMask:l,ellipsisMask:d,newAxisMask:p,shrinkAxisMask:f}=r,{nonStrided:h,$begin:m,$strides:b,size:g,newShape:y,outShape:x}=a["Ad"].sliceInfo(o.shape,s,i,c,u,l,d,p,f),v=qa({inputs:{x:o},backend:n,attrs:{shape:y}});let O;if(h){const e=Es({inputs:{x:v},backend:n,attrs:{begin:m,size:g}});O=qa({inputs:{x:e},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(e)}else if(x.some(e=>0===e))O=n.makeTensorInfo(x,o.dtype,[]);else{const e=n.shouldExecuteOnCPU([v]);if(e){const e=n.texData.get(v.dataId),t=e.values,r=Object(a["dd"])(v.shape,v.dtype,t),o=Ir(x,r,b,m);O=n.makeTensorInfo(x,v.dtype,o.values)}else{const e=new cf(m,b,x);O=n.runWebGLProgram(e,[v],v.dtype)}}const w=qa({inputs:{x:O},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(O),w}const lf={kernelName:a["Lc"],backendName:"webgl",kernelFunc:uf},df="return tan(x);",pf=Pa({opSnippet:df}),ff={kernelName:a["Oc"],backendName:"webgl",kernelFunc:pf},hf="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",mf=Pa({opSnippet:hf}),bf={kernelName:a["Pc"],backendName:"webgl",kernelFunc:mf};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class gf{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const r=Pt(this.rank),a=yf(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}function yf(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push(`imod(${n[a]}, ${e[a]})`);return r.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xf(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:s}=r;if("string"===o.dtype){const e=n.readSync(o.dataId),t=e.map(e=>a["Ld"].decodeString(e)),r=Object(a["dd"])(o.shape,o.dtype,t),i=Er(r,s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new gf(o.shape,s),c=n.runWebGLProgram(i,[o],o.dtype);return c}const vf={kernelName:a["Sc"],backendName:"webgl",kernelFunc:xf};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Of(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:o,sorted:s}=r,i=n.readSync(a.dataId),[c,u]=Tr(i,a.shape,a.dtype,o,s);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const wf={kernelName:a["Tc"],backendName:"webgl",kernelFunc:Of};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cf(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:o}=t;he(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(o.dataId),{outputValues:i,outputShape:c,indices:u}=Sr(s,a,o.shape,o.dtype);return[r.makeTensorInfo(c,o.dtype,i),r.makeTensorInfo([u.length],"int32",u)]}const $f={kernelName:a["Vc"],backendName:"webgl",kernelFunc:Cf};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kf(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:o}=r;o<0&&(o+=a.shape.length);const s=a,i=s.shape.length,c=a.shape[o],u=new Array(i-1);let l=0;for(let m=0;m<i;m++)m!==o&&(u[l++]=s.shape[m]);const d=[],p=new Array(i).fill(0),f=s.shape.slice();f[o]=1;const h=new Array(c);for(let m=0;m<h.length;m++){p[o]=m;const e=Es({inputs:{x:s},backend:n,attrs:{begin:p,size:f}}),t=qa({inputs:{x:e},backend:n,attrs:{shape:u}});h[m]=t,d.push(e)}return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}const If={kernelName:a["Wc"],backendName:"webgl",kernelFunc:kf};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jf{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,o=e.numSegments,s=o*Math.ceil(a/n);this.outputShape=[r,s];const i="0.0",c="sumValue",u=4*Math.floor(n/4),l=n%4,d="\n        sumValue += dot(values, segFilter);\n    ";let p="";a%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let f="";a%n>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${f}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${d}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${d}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${d}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${d}\n        }\n        setOutput(${c});\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ef(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:s}=t,{numSegments:i}=r,c=o.shape.length,u=[];let l=0;const d=a["bd"].getAxesPermutation([l],c);let p=o;null!=d&&(p=io({inputs:{x:o},backend:n,attrs:{perm:d}}),u.push(p),l=a["bd"].getInnerMostAxes(1,c)[0]);const f=a["bd"].segment_util.computeOutShape(p.shape,l,i),h=a["Ld"].sizeFromShape([p.shape[l]]),m=qa({inputs:{x:p},backend:n,attrs:{shape:[-1,h]}});u.push(m);const b=Object(a["Ed"])(o.dtype),g=(e,t,r,o,s)=>{const i=e.shape[0],c=e.shape[1],l=a["bd"].segment_util.segOpComputeOptimalWindowSize(c,s),d={windowSize:l,inSize:c,batchSize:i,numSegments:s},p=new jf(d,t),f=n.compileAndRun(p,[e,r],o);if(u.push(f),f.shape[1]===s)return f;const h=Dd({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),m=xf({inputs:{x:h},backend:n,attrs:{reps:[c/l]}});u.push(h),u.push(m);const b=g(f,t,m,o,s);return b},y=g(m,"unsortedSegmentSum",s,b,i),x=qa({inputs:{x:y},backend:n,attrs:{shape:f}});let v=x;if(null!=d){u.push(x);const e=a["bd"].getUndoAxesPermutation(d);v=io({inputs:{x:v},backend:n,attrs:{perm:e}})}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}const Tf={kernelName:a["Xc"],backendName:"webgl",kernelFunc:Ef},Nf=[cl,dl,fo,bo,xo,wo,ko,To,So,_o,Bo,zo,Go,qo,ts,Qo,as,ls,cs,hs,bs,ys,ws,Ss,_s,zs,Gs,Xs,Zs,Ia,ci,Oi,Ci,mi,ji,Ti,ki,Ai,Fi,Pi,Ui,Gi,qi,nc,ac,Ji,ic,lc,hc,yc,wc,kc,Ec,Nc,_c,Lc,Bc,zc,Gc,Xc,Jc,nu,au,iu,du,mu,xu,$a,Ou,ai,$u,ju,Nu,Na,Ru,Pu,Bu,Ku,Wu,Qu,el,al,hl,wl,vl,Il,El,Nl,yl,Al,Rl,Pl,zl,Hl,ad,Ha,id,ld,fd,bd,Ds,xd,Cd,kd,Td,_d,Ra,Fd,Ld,Ps,Ql,Bd,qd,Wd,Xa,Jd,tp,ap,ip,dp,fp,bp,xp,wp,kp,Ep,Sp,Rp,Lp,Bp,Ts,nd,Up,Gp,Kp,Xp,Jp,tf,af,sf,lf,ed,so,ff,bf,vf,wf,co,$f,If,Tf,Od];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const Sf of Nf)Object(a["ud"])(Sf);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},ef00:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","logicalNot","bool"),n={x:t};return r["a"].runKernel(a["Bb"],n)}const c=Object(s["a"])({logicalNot_:i})},eff7:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","cos"),n={x:t};return r["a"].runKernel(a["H"],n)}const c=Object(s["a"])({cos_:i})},f011:function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},f069:function(e,t,n){"use strict";var r=n("1c0b"),a=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new a(e)}},f0a9:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","clone","string_or_numeric"),n={x:t};return r["a"].runKernel(a["nb"],n)}const c=Object(s["a"])({clone_:i})},f0e5:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("6ae2"),a=n("c05b"),o=n("76c2"),s=n("a3f7"),i=n("526f"),c=n("deb3"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(e,t){let n=Object(s["a"])(e,"a","minimum"),u=Object(s["a"])(t,"b","minimum");[n,u]=Object(o["b"])(n,u),"bool"===n.dtype&&(n=Object(c["a"])(n,"int32"),u=Object(c["a"])(u,"int32")),Object(i["a"])(n.shape,u.shape);const l={a:n,b:u};return r["a"].runKernel(a["Mb"],l)}const d=Object(u["a"])({minimum_:l})},f183:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("526f"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t){const n=Object(o["a"])(e,"a","logicalOr","bool"),i=Object(o["a"])(t,"b","logicalOr","bool");Object(s["a"])(n.shape,i.shape);const c={a:n,b:i};return r["a"].runKernel(a["Cb"],c)}const u=Object(i["a"])({logicalOr_:c})},f3ae:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("deb3"),i=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(e,t=null,n=!1){let i=Object(o["a"])(e,"x","prod");"bool"===i.dtype&&(i=Object(s["a"])(i,"int32"));const c={x:i},u={axis:t,keepDims:n};return r["a"].runKernel(a["cc"],c,u)}const u=Object(i["a"])({prod_:c})},f490:function(e,t,n){"use strict";(function(e,r){
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let a;function o(){if(null==a){let t;if("undefined"!==typeof window)t=window;else if("undefined"!==typeof e)t=e;else if("undefined"!==typeof r)t=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");t=self}a=t}return a}function s(){const e=o();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}function i(e,t){const n=s();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}))}).call(this,n("c8ba"),n("4362"))},f5df:function(e,t,n){var r=n("00ee"),a=n("c6b6"),o=n("b622"),s=o("toStringTag"),i="Arguments"==a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),s))?n:i?a(t):"Object"==(r=a(t))&&"function"==typeof t.callee?"Arguments":r}},f74c:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("34d7"),a=n("a3f7"),o=n("6ad5");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function s(e,t){const n=Object(a["a"])(e,"x","setdiff1d"),s=Object(a["a"])(t,"y","setdiff1d");o["b"](n.dtype===s.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${s.dtype}).`),o["b"](1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),o["b"](1===s.rank,()=>`y should be 1D tensor, but got y (${s.shape}).`);const i=await n.data(),c=await s.data(),u=new Set(c);let l=0;for(let r=0;r<i.length;r++)u.has(i[r])||l++;const d=new r["b"]([l],n.dtype),p=new r["b"]([l],"int32");for(let r=0,a=0;r<i.length;r++)u.has(i[r])||(d.values[a]=i[r],p.values[a]=r,a++);return[d.toTensor(),p.toTensor()]}const i=s},f772:function(e,t,n){var r=n("5692"),a=n("90e3"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=a(e))}},f8bb:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return $})),n.d(t,"i",(function(){return j})),n.d(t,"c",(function(){return E})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return A})),n.d(t,"d",(function(){return _})),n.d(t,"k",(function(){return F})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return L})),n.d(t,"j",(function(){return P})),n.d(t,"b",(function(){return M}));var r=n("fa11"),a=n("46cc"),o=n("d303"),s=n("526c"),i=n("aeab"),c=n("c8ad"),u=n("5874"),l=n("9489"),d=n("04b8"),p=n("f011"),f=n("d556"),h=n("3d50"),m=n("6e83"),b=n("29d8"),g=n("a80f"),y=n("673d"),x=n("3bfc"),v=n("31bb"),O=n("dbf3"),w=n("113e"),C=n("9e7b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ${static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[i,c,u,l,d,p,f,g,b,h,y,x,v,O,w,C,m],t=[].concat(...e.map(e=>e.json));this.opMappers=t.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const n=e.node,r=[],a=[],o=[],i=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):null!=t.input&&0!==t.input.length||o.push(e[t.name]),e),{});let c=[];const u=[];let l={},d={};null!=t&&(l=this.mapSignatureEntries(t.inputs),d=this.mapSignatureEntries(t.outputs));const p=Object.keys(i);p.forEach(e=>{const t=i[e];t.inputNames.forEach(e=>{const[n]=Object(s["b"])(e);t.inputs.push(i[n]),i[n].children.push(t)})}),0===Object.keys(d).length?p.forEach(e=>{const t=i[e];0===t.children.length&&u.push(t)}):Object.keys(d).forEach(e=>{const[t]=Object(s["b"])(e),n=i[t];null!=n&&(n.signatureKey=d[e],u.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{const[t]=Object(s["b"])(e),n=i[t];n&&(n.signatureKey=l[e],c.push(n))}):c=r;let f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const h={nodes:i,inputs:c,outputs:u,weights:a,placeholders:r,signature:t,functions:f};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){const t=Object(o["a"])(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{const r=n.type;let a=void 0;switch(n.type){case"string":a=j(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=j(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":a=L(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=L(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":a=T(e.attr,n.tfName,n.defaultValue||0),void 0===a&&n.tfDeprecatedName&&(a=T(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":a=D(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=D(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":a=E(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=E(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":a=M(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=M(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":a=F(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=F(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":a=P(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=P(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":a=A(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=A(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":a=_(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=_(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":a=S(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=S(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:a,type:r},t},{})),n}mapFunction(e){const t=e.nodeDef,n=[],r=[];let a={};null!=t&&(a=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&r.push(e[t.name]),e),{}));const o=[],i=[];e.signature.inputArg.forEach(e=>{const[t]=Object(s["b"])(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:N(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),a[t]=n});const c=Object.keys(a);c.forEach(e=>{const t=a[e];t.inputNames.forEach(e=>{const[n]=Object(s["b"])(e);t.inputs.push(a[n]),a[n].children.push(t)})});const u=e.ret;e.signature.outputArg.forEach(e=>{const[t,n]=Object(s["b"])(u[e.name]),r=a[t];null!=r&&(r.defaultOutput=n,i.push(r))});const l=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:i,weights:r,placeholders:n,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function k(t){const n=Object(r["ld"])().global;if("undefined"!==typeof n.atob)return n.atob(t);if("undefined"!==typeof e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function I(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):k(e);return t?n:n.toLowerCase()}function j(e,t,n,r=!1){const a=e[t];return null!=a?I(a.s,r):n}function E(e,t,n){const r=e[t];return r?r.b:n}function T(e,t,n){const r=e[t]||{},a=null!=r["i"]?r["i"]:null!=r["f"]?r["f"]:n;return"number"===typeof a?a:parseInt(a,10)}function N(e){switch("string"===typeof e&&(e=a["a"][e]),e){case a["a"].DT_FLOAT:return"float32";case a["a"].DT_INT32:case a["a"].DT_INT64:case a["a"].DT_INT8:case a["a"].DT_UINT8:return"int32";case a["a"].DT_BOOL:return"bool";case a["a"].DT_DOUBLE:return"float32";case a["a"].DT_STRING:return"string";default:return null}}function S(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function A(e,t,n){const r=e[t];return r&&r.type?N(r.type):n}function _(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>N(e)):n}function R(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"===typeof e.size?e.size:parseInt(e.size,10)):[]}function F(e,t,n){const r=e[t];return r&&r.shape?R(r.shape):n}function D(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"===typeof e?e:parseInt(e,10)):n}function L(e,t,n,r=!1){const a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>I(e,r)):n}function P(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>R(e)):n}function M(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n("b639").Buffer)},fa11:function(e,t,n){"use strict";n.d(t,"Qc",(function(){return ne["a"]})),n.d(t,"Rc",(function(){return ne["b"]})),n.d(t,"Ed",(function(){return nt["a"]})),n.d(t,"Kd",(function(){return nt["b"]})),n.d(t,"ad",(function(){return rt["a"]})),n.d(t,"dd",(function(){return rt["b"]})),n.d(t,"ed",(function(){return rt["c"]})),n.d(t,"fd",(function(){return rt["d"]})),n.d(t,"gd",(function(){return rt["e"]})),n.d(t,"hd",(function(){return rt["f"]})),n.d(t,"jd",(function(){return rt["g"]})),n.d(t,"md",(function(){return rt["h"]})),n.d(t,"sd",(function(){return rt["k"]})),n.d(t,"vd",(function(){return rt["l"]})),n.d(t,"wd",(function(){return rt["m"]})),n.d(t,"yd",(function(){return rt["n"]})),n.d(t,"zd",(function(){return rt["o"]})),n.d(t,"Bd",(function(){return rt["p"]})),n.d(t,"Cd",(function(){return rt["q"]})),n.d(t,"Dd",(function(){return rt["r"]})),n.d(t,"Fd",(function(){return rt["s"]})),n.d(t,"Gd",(function(){return rt["t"]})),n.d(t,"Hd",(function(){return rt["u"]})),n.d(t,"Jd",(function(){return rt["v"]})),n.d(t,"Md",(function(){return rt["w"]})),n.d(t,"od",(function(){return rt["j"]})),n.d(t,"kd",(function(){return at["b"]})),n.d(t,"Id",(function(){return at["g"]})),n.d(t,"qd",(function(){return at["d"]})),n.d(t,"xd",(function(){return at["f"]})),n.d(t,"nd",(function(){return at["c"]})),n.d(t,"td",(function(){return at["e"]})),n.d(t,"ud",(function(){return Se["d"]})),n.d(t,"ld",(function(){return l["b"]})),n.d(t,"cd",(function(){return a})),n.d(t,"pd",(function(){return r})),n.d(t,"Ld",(function(){return tt})),n.d(t,"bd",(function(){return i})),n.d(t,"Ad",(function(){return o})),n.d(t,"id",(function(){return Gt})),n.d(t,"rd",(function(){return c})),n.d(t,"tb",(function(){return qt["b"]})),n.d(t,"L",(function(){return qt["a"]})),n.d(t,"a",(function(){return Ne["a"]})),n.d(t,"b",(function(){return Ne["b"]})),n.d(t,"c",(function(){return Ne["c"]})),n.d(t,"d",(function(){return Ne["d"]})),n.d(t,"e",(function(){return Ne["e"]})),n.d(t,"f",(function(){return Ne["f"]})),n.d(t,"g",(function(){return Ne["g"]})),n.d(t,"h",(function(){return Ne["h"]})),n.d(t,"i",(function(){return Ne["i"]})),n.d(t,"j",(function(){return Ne["j"]})),n.d(t,"k",(function(){return Ne["k"]})),n.d(t,"l",(function(){return Ne["l"]})),n.d(t,"n",(function(){return Ne["n"]})),n.d(t,"m",(function(){return Ne["m"]})),n.d(t,"o",(function(){return Ne["o"]})),n.d(t,"r",(function(){return Ne["r"]})),n.d(t,"p",(function(){return Ne["p"]})),n.d(t,"q",(function(){return Ne["q"]})),n.d(t,"s",(function(){return Ne["s"]})),n.d(t,"t",(function(){return Ne["t"]})),n.d(t,"u",(function(){return Ne["u"]})),n.d(t,"v",(function(){return Ne["v"]})),n.d(t,"w",(function(){return Ne["w"]})),n.d(t,"x",(function(){return Ne["x"]})),n.d(t,"y",(function(){return Ne["y"]})),n.d(t,"z",(function(){return Ne["z"]})),n.d(t,"A",(function(){return Ne["A"]})),n.d(t,"B",(function(){return Ne["B"]})),n.d(t,"C",(function(){return Ne["C"]})),n.d(t,"D",(function(){return Ne["D"]})),n.d(t,"E",(function(){return Ne["E"]})),n.d(t,"F",(function(){return Ne["F"]})),n.d(t,"G",(function(){return Ne["G"]})),n.d(t,"H",(function(){return Ne["H"]})),n.d(t,"I",(function(){return Ne["I"]})),n.d(t,"K",(function(){return Ne["K"]})),n.d(t,"J",(function(){return Ne["J"]})),n.d(t,"M",(function(){return Ne["L"]})),n.d(t,"N",(function(){return Ne["M"]})),n.d(t,"O",(function(){return Ne["N"]})),n.d(t,"P",(function(){return Ne["O"]})),n.d(t,"Q",(function(){return Ne["P"]})),n.d(t,"R",(function(){return Ne["Q"]})),n.d(t,"S",(function(){return Ne["R"]})),n.d(t,"hc",(function(){return Ne["fc"]})),n.d(t,"T",(function(){return Ne["S"]})),n.d(t,"U",(function(){return Ne["T"]})),n.d(t,"W",(function(){return Ne["V"]})),n.d(t,"V",(function(){return Ne["U"]})),n.d(t,"X",(function(){return Ne["W"]})),n.d(t,"Y",(function(){return Ne["X"]})),n.d(t,"Z",(function(){return Ne["Y"]})),n.d(t,"ab",(function(){return Ne["Z"]})),n.d(t,"bb",(function(){return Ne["ab"]})),n.d(t,"cb",(function(){return Ne["bb"]})),n.d(t,"db",(function(){return Ne["cb"]})),n.d(t,"eb",(function(){return Ne["db"]})),n.d(t,"gb",(function(){return Ne["fb"]})),n.d(t,"kb",(function(){return Ne["jb"]})),n.d(t,"jb",(function(){return Ne["ib"]})),n.d(t,"lb",(function(){return Ne["kb"]})),n.d(t,"mb",(function(){return Ne["lb"]})),n.d(t,"ob",(function(){return Ne["nb"]})),n.d(t,"nb",(function(){return Ne["mb"]})),n.d(t,"pb",(function(){return Ne["ob"]})),n.d(t,"qb",(function(){return Ne["pb"]})),n.d(t,"rb",(function(){return Ne["qb"]})),n.d(t,"sb",(function(){return Ne["rb"]})),n.d(t,"wb",(function(){return Ne["ub"]})),n.d(t,"xb",(function(){return Ne["vb"]})),n.d(t,"yb",(function(){return Ne["wb"]})),n.d(t,"zb",(function(){return Ne["xb"]})),n.d(t,"Ab",(function(){return Ne["yb"]})),n.d(t,"Bb",(function(){return Ne["zb"]})),n.d(t,"Cb",(function(){return Ne["Ab"]})),n.d(t,"Db",(function(){return Ne["Bb"]})),n.d(t,"Eb",(function(){return Ne["Cb"]})),n.d(t,"ub",(function(){return Ne["sb"]})),n.d(t,"vb",(function(){return Ne["tb"]})),n.d(t,"Fb",(function(){return Ne["Db"]})),n.d(t,"Lb",(function(){return Ne["Jb"]})),n.d(t,"Gb",(function(){return Ne["Eb"]})),n.d(t,"Jb",(function(){return Ne["Hb"]})),n.d(t,"Hb",(function(){return Ne["Fb"]})),n.d(t,"Ib",(function(){return Ne["Gb"]})),n.d(t,"Kb",(function(){return Ne["Ib"]})),n.d(t,"Mb",(function(){return Ne["Kb"]})),n.d(t,"Nb",(function(){return Ne["Lb"]})),n.d(t,"Ob",(function(){return Ne["Mb"]})),n.d(t,"Pb",(function(){return Ne["Nb"]})),n.d(t,"Qb",(function(){return Ne["Ob"]})),n.d(t,"Rb",(function(){return Ne["Pb"]})),n.d(t,"Sb",(function(){return Ne["Qb"]})),n.d(t,"Tb",(function(){return Ne["Rb"]})),n.d(t,"Xb",(function(){return Ne["Vb"]})),n.d(t,"Ub",(function(){return Ne["Sb"]})),n.d(t,"Vb",(function(){return Ne["Tb"]})),n.d(t,"Wb",(function(){return Ne["Ub"]})),n.d(t,"Zb",(function(){return Ne["Xb"]})),n.d(t,"Yb",(function(){return Ne["Wb"]})),n.d(t,"ac",(function(){return Ne["Yb"]})),n.d(t,"bc",(function(){return Ne["Zb"]})),n.d(t,"cc",(function(){return Ne["ac"]})),n.d(t,"dc",(function(){return Ne["bc"]})),n.d(t,"ec",(function(){return Ne["cc"]})),n.d(t,"fc",(function(){return Ne["dc"]})),n.d(t,"gc",(function(){return Ne["ec"]})),n.d(t,"ic",(function(){return Ne["gc"]})),n.d(t,"jc",(function(){return Ne["hc"]})),n.d(t,"lc",(function(){return Ne["jc"]})),n.d(t,"oc",(function(){return Ne["mc"]})),n.d(t,"pc",(function(){return Ne["nc"]})),n.d(t,"mc",(function(){return Ne["kc"]})),n.d(t,"nc",(function(){return Ne["lc"]})),n.d(t,"kc",(function(){return Ne["ic"]})),n.d(t,"qc",(function(){return Ne["oc"]})),n.d(t,"sc",(function(){return Ne["qc"]})),n.d(t,"tc",(function(){return Ne["rc"]})),n.d(t,"uc",(function(){return Ne["sc"]})),n.d(t,"vc",(function(){return Ne["tc"]})),n.d(t,"wc",(function(){return Ne["uc"]})),n.d(t,"Bc",(function(){return Ne["zc"]})),n.d(t,"zc",(function(){return Ne["xc"]})),n.d(t,"Ac",(function(){return Ne["yc"]})),n.d(t,"yc",(function(){return Ne["wc"]})),n.d(t,"xc",(function(){return Ne["vc"]})),n.d(t,"Dc",(function(){return Ne["Bc"]})),n.d(t,"Hc",(function(){return Ne["Fc"]})),n.d(t,"Nc",(function(){return Ne["Lc"]})),n.d(t,"Ec",(function(){return Ne["Cc"]})),n.d(t,"Gc",(function(){return Ne["Ec"]})),n.d(t,"Cc",(function(){return Ne["Ac"]})),n.d(t,"Jc",(function(){return Ne["Hc"]})),n.d(t,"Ic",(function(){return Ne["Gc"]})),n.d(t,"Mc",(function(){return Ne["Kc"]})),n.d(t,"Fc",(function(){return Ne["Dc"]})),n.d(t,"Lc",(function(){return Ne["Jc"]})),n.d(t,"Oc",(function(){return Ne["Mc"]})),n.d(t,"Pc",(function(){return Ne["Nc"]})),n.d(t,"Sc",(function(){return Ne["Oc"]})),n.d(t,"Tc",(function(){return Ne["Pc"]})),n.d(t,"Uc",(function(){return Ne["Qc"]})),n.d(t,"Vc",(function(){return Ne["Rc"]})),n.d(t,"Wc",(function(){return Ne["Sc"]})),n.d(t,"Xc",(function(){return Ne["Tc"]})),n.d(t,"Yc",(function(){return Ne["Uc"]})),n.d(t,"Kc",(function(){return Ne["Ic"]})),n.d(t,"fb",(function(){return Ne["eb"]})),n.d(t,"rc",(function(){return Ne["pc"]})),n.d(t,"Zc",(function(){return Ne["Vc"]})),n.d(t,"hb",(function(){return Ne["gb"]})),n.d(t,"ib",(function(){return Ne["hb"]}));var r={};n.r(r),n.d(r,"copyModel",(function(){return X})),n.d(r,"listModels",(function(){return K})),n.d(r,"moveModel",(function(){return Y})),n.d(r,"removeModel",(function(){return q})),n.d(r,"browserFiles",(function(){return pe})),n.d(r,"browserHTTPRequest",(function(){return ke})),n.d(r,"concatenateArrayBuffers",(function(){return d["d"]})),n.d(r,"decodeWeights",(function(){return d["e"]})),n.d(r,"encodeWeights",(function(){return d["f"]})),n.d(r,"fromMemory",(function(){return Ee})),n.d(r,"getLoadHandlers",(function(){return b})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return d["g"]})),n.d(r,"getSaveHandlers",(function(){return m})),n.d(r,"http",(function(){return $e})),n.d(r,"isHTTPScheme",(function(){return we})),n.d(r,"loadWeights",(function(){return be})),n.d(r,"registerLoadRouter",(function(){return h})),n.d(r,"registerSaveRouter",(function(){return f})),n.d(r,"weightsLoaderFactory",(function(){return ge})),n.d(r,"withSaveHandler",(function(){return Te}));var a={};n.r(a),n.d(a,"toPixels",(function(){return Le})),n.d(a,"fromPixels",(function(){return Pe}));var o={};n.r(o),n.d(o,"assertParamsValid",(function(){return Me})),n.d(o,"maskToAxes",(function(){return Be})),n.d(o,"computeOutShape",(function(){return Ve})),n.d(o,"stridesWithElidedDims",(function(){return ze})),n.d(o,"getNormalizedAxes",(function(){return Ge})),n.d(o,"startIndicesWithElidedDims",(function(){return He})),n.d(o,"stopIndicesWithElidedDims",(function(){return Ke})),n.d(o,"stridesForAxis",(function(){return qe})),n.d(o,"startForAxis",(function(){return Xe})),n.d(o,"stopForAxis",(function(){return Ye})),n.d(o,"isSliceContinous",(function(){return Qe})),n.d(o,"computeFlatOffset",(function(){return Je})),n.d(o,"parseSliceParams",(function(){return Ze})),n.d(o,"sliceInfo",(function(){return et}));var s={};n.r(s),n.d(s,"segOpComputeOptimalWindowSize",(function(){return Bt})),n.d(s,"computeOutShape",(function(){return Vt})),n.d(s,"collectGatherOpShapeInfo",(function(){return zt}));var i={};n.r(i),n.d(i,"axesAreInnerMostDims",(function(){return ot["b"]})),n.d(i,"combineLocations",(function(){return ot["c"]})),n.d(i,"computeOutAndReduceShapes",(function(){return ot["d"]})),n.d(i,"expandShapeToKeepDim",(function(){return ot["e"]})),n.d(i,"assertAxesAreInnerMostDims",(function(){return ot["a"]})),n.d(i,"getAxesPermutation",(function(){return ot["f"]})),n.d(i,"getUndoAxesPermutation",(function(){return ot["h"]})),n.d(i,"getInnerMostAxes",(function(){return ot["g"]})),n.d(i,"getBroadcastDims",(function(){return st["b"]})),n.d(i,"getReductionAxes",(function(){return st["c"]})),n.d(i,"assertAndGetBroadcastShape",(function(){return st["a"]})),n.d(i,"assertParamsConsistent",(function(){return it})),n.d(i,"computeOutShape",(function(){return ct})),n.d(i,"computeDilation2DInfo",(function(){return ut["d"]})),n.d(i,"computePool2DInfo",(function(){return ut["e"]})),n.d(i,"computePool3DInfo",(function(){return ut["f"]})),n.d(i,"computeConv2DInfo",(function(){return ut["a"]})),n.d(i,"computeConv3DInfo",(function(){return ut["b"]})),n.d(i,"computeDefaultPad",(function(){return ut["c"]})),n.d(i,"tupleValuesAreOne",(function(){return ut["i"]})),n.d(i,"eitherStridesOrDilationsAreOne",(function(){return ut["h"]})),n.d(i,"convertConv2DDataFormat",(function(){return ut["g"]})),n.d(i,"getFusedDyActivation",(function(){return lt["c"]})),n.d(i,"getFusedBiasGradient",(function(){return lt["b"]})),n.d(i,"applyActivation",(function(){return lt["a"]})),n.d(i,"shouldFuse",(function(){return lt["d"]})),n.d(i,"PARALLELIZE_THRESHOLD",(function(){return dt})),n.d(i,"computeOptimalWindowSize",(function(){return pt})),n.d(i,"slice_util",(function(){return o})),n.d(i,"upcastType",(function(){return nt["b"]})),n.d(i,"getImageCenter",(function(){return ft})),n.d(i,"getReshaped",(function(){return ht})),n.d(i,"getPermuted",(function(){return mt})),n.d(i,"getReshapedPermuted",(function(){return bt})),n.d(i,"getSliceBeginCoords",(function(){return gt})),n.d(i,"getSliceSize",(function(){return yt})),n.d(i,"prepareAndValidate",(function(){return xt})),n.d(i,"validateUpdateShape",(function(){return vt["c"]})),n.d(i,"validateInput",(function(){return vt["b"]})),n.d(i,"calculateShapes",(function(){return vt["a"]})),n.d(i,"SELU_SCALEALPHA",(function(){return Ot})),n.d(i,"SELU_SCALE",(function(){return wt})),n.d(i,"ERF_P",(function(){return Ct})),n.d(i,"ERF_A1",(function(){return $t})),n.d(i,"ERF_A2",(function(){return kt})),n.d(i,"ERF_A3",(function(){return It})),n.d(i,"ERF_A4",(function(){return jt})),n.d(i,"ERF_A5",(function(){return Et})),n.d(i,"warn",(function(){return Tt})),n.d(i,"log",(function(){return Nt})),n.d(i,"mergeRealAndImagArrays",(function(){return St})),n.d(i,"splitRealAndImagArrays",(function(){return At})),n.d(i,"complexWithEvenIndex",(function(){return _t})),n.d(i,"complexWithOddIndex",(function(){return Rt})),n.d(i,"getComplexWithIndex",(function(){return Ft})),n.d(i,"assignToTypedArray",(function(){return Dt})),n.d(i,"exponents",(function(){return Lt})),n.d(i,"exponent",(function(){return Pt})),n.d(i,"prepareSplitSize",(function(){return Mt})),n.d(i,"segment_util",(function(){return s})),n.d(i,"fromUint8ToStringArray",(function(){return Ut})),n.d(i,"fromStringArrayToUint8",(function(){return Wt}));var c={};n.r(c),n.d(c,"nonMaxSuppressionV3Impl",(function(){return Ht["a"]})),n.d(c,"nonMaxSuppressionV4Impl",(function(){return Ht["b"]})),n.d(c,"nonMaxSuppressionV5Impl",(function(){return Ht["c"]})),n.d(c,"whereImpl",(function(){return Kt["a"]}));var u=n("6ae2"),l=(n("29a8"),n("b333")),d=n("350f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class p{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==p.instance&&(p.instance=new p),p.instance}static registerSaveRouter(e){p.getInstance().saveRouters.push(e)}static registerLoadRouter(e){p.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return p.getHandlers(e,"save")}static getLoadHandlers(e,t){return p.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[],a="load"===t?p.getInstance().loadRouters:p.getInstance().saveRouters;return a.forEach(t=>{const a=t(e,n);null!==a&&r.push(a)}),r}}const f=e=>p.registerSaveRouter(e),h=e=>p.registerLoadRouter(e),m=e=>p.getSaveHandlers(e),b=(e,t)=>p.getLoadHandlers(e,t)
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */,g="tensorflowjs",y=1,x="models_store",v="model_info_store";function O(){if(!Object(l["b"])().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function w(e){const t=e.result;t.createObjectStore(x,{keyPath:"modelPath"}),t.createObjectStore(v,{keyPath:"modelPath"})}class C{constructor(e){if(this.indexedDB=O(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const r=this.indexedDB.open(g,y);r.onupgradeneeded=()=>w(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(x,"readonly"),r=t.objectStore(x),o=r.get(this.modelPath);o.onsuccess=()=>{if(null==o.result)return a.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(o.result.modelArtifacts)},o.onerror=e=>(a.close(),n(o.error)),t.oncomplete=()=>a.close()}else{const r=Object(d["g"])(t),o=a.transaction(v,"readwrite");let s=o.objectStore(v);const i=s.put({modelPath:this.modelPath,modelArtifactsInfo:r});let c;i.onsuccess=()=>{c=a.transaction(x,"readwrite");const i=c.objectStore(x),u=i.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{s=o.objectStore(v);const t=s.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(u.error)),t.onerror=e=>(a.close(),n(u.error))}},i.onerror=e=>(a.close(),n(i.error)),o.oncomplete=()=>{null==c?a.close():c.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}}C.URL_SCHEME="indexeddb://";const $=e=>Object(l["b"])().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(C.URL_SCHEME)?k(e.slice(C.URL_SCHEME.length)):null;function k(e){return new C(e)}function I(e){return e.startsWith(C.URL_SCHEME)?e.slice(C.URL_SCHEME.length):e}p.registerSaveRouter($),p.registerLoadRouter($);class j{constructor(){this.indexedDB=O()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open(g,y);n.onupgradeneeded=()=>w(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(v,"readonly"),o=a.objectStore(v),s=o.getAll();s.onsuccess=()=>{const t={};for(const e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){return e=I(e),new Promise((t,n)=>{const r=this.indexedDB.open(g,y);r.onupgradeneeded=()=>w(r),r.onsuccess=()=>{const a=r.result,o=a.transaction(v,"readwrite"),s=o.objectStore(v),i=s.get(e);let c;i.onsuccess=()=>{if(null==i.result)return a.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=s.delete(e),o=()=>{c=a.transaction(x,"readwrite");const r=c.objectStore(x),o=r.delete(e);o.onsuccess=()=>t(i.result.modelArtifactsInfo),o.onerror=e=>n(i.error)};r.onsuccess=o,r.onerror=e=>(o(),a.close(),n(i.error))}},i.onerror=e=>(a.close(),n(i.error)),o.oncomplete=()=>{null==c?a.close():c.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)})}}var E=n("6ad5");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T="/",N="tensorflowjs_models",S="info",A="model_topology",_="weight_specs",R="weight_data",F="model_metadata";function D(e){return{info:[N,e,S].join(T),topology:[N,e,A].join(T),weightSpecs:[N,e,_].join(T),weightData:[N,e,R].join(T),modelMetadata:[N,e,F].join(T)}}function L(e){const t=e.split(T);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(T)}function P(e){return e.startsWith(M.URL_SCHEME)?e.slice(M.URL_SCHEME.length):e}class M{constructor(e){if(!Object(l["b"])().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=D(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Object(d["g"])(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Object(d["a"])(e.weightData));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:a}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e["format"],t.generatedBy=e["generatedBy"],t.convertedBy=e["convertedBy"],null!=e["signature"]&&(t.signature=e["signature"]),null!=e["userDefinedMetadata"]&&(t.userDefinedMetadata=e["userDefinedMetadata"]),null!=e["modelInitializer"]&&(t.modelInitializer=e["modelInitializer"])}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=Object(d["b"])(o),t}}M.URL_SCHEME="localstorage://";const B=e=>Object(l["b"])().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(M.URL_SCHEME)?V(e.slice(M.URL_SCHEME.length)):null;function V(e){return new M(e)}p.registerSaveRouter(B),p.registerLoadRouter(B);class z{constructor(){Object(E["b"])(Object(l["b"])().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Object(E["b"])("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=N+T,n=T+S;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){const t=L(a);e[t]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=P(e);const t=D(e);if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);const n=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U="://";class W{constructor(){this.managers={}}static getInstance(){return null==W.instance&&(W.instance=new W),W.instance}static registerManager(e,t){Object(E["b"])(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(U)&&(e=e.slice(0,e.indexOf(U))),Object(E["b"])(e.length>0,()=>"scheme must not be an empty string.");const n=W.getInstance();Object(E["b"])(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function G(e){if(-1===e.indexOf(U))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+W.getSchemes().join(","));return{scheme:e.split(U)[0],path:e.split(U)[1]}}async function H(e,t,n=!1){Object(E["b"])(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=p.getLoadHandlers(e);Object(E["b"])(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),Object(E["b"])(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);const a=r[0],o=p.getSaveHandlers(t);Object(E["b"])(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),Object(E["b"])(o.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);const s=o[0],i=G(e).scheme,c=G(e).path,u=i===G(e).scheme,l=await a.load();n&&u&&await W.getManager(i).removeModel(c);const d=await s.save(l);return n&&!u&&await W.getManager(i).removeModel(c),d.modelArtifactsInfo}async function K(){const e=W.getSchemes(),t={};for(const n of e){const e=await W.getManager(n).listModels();for(const r in e){const a=n+U+r;t[a]=e[r]}}return t}async function q(e){const t=G(e),n=W.getManager(t.scheme);return n.removeModel(t.path)}async function X(e,t){const n=!1;return H(e,t,n)}async function Y(e,t){const n=!0;return H(e,t,n)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if(Object(l["b"])().get("IS_BROWSER")){Object(l["b"])().setPlatform("browser",new Q);try{W.registerManager(M.URL_SCHEME,new z)}catch(Xt){}try{W.registerManager(C.URL_SCHEME,new j)}catch(Xt){}}n("4b05");var J=n("043e"),Z=n("deb3"),ee=n("f0a9"),te=n("7568"),ne=n("34d7");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(u["b"])();const re={buffer:J["a"],cast:Z["a"],clone:ee["a"],print:te["a"]};Object(ne["e"])(re);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ae="model",oe=".json",se=".weights.bin";function ie(e){return new Promise(e=>setTimeout(e)).then(e)}class ce{constructor(e){if(!Object(l["b"])().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(ce.URL_SCHEME)&&(e=e.slice(ce.URL_SCHEME.length)),null!=e&&0!==e.length||(e=ae),this.modelTopologyFileName=e+oe,this.weightDataFileName=e+se}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer);const a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(o.download=this.modelTopologyFileName,o.href=a,await ie(()=>o.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await ie(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Object(d["g"])(e)}}}}ce.URL_SCHEME="downloads://";class ue{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}async load(){const e=this.files[0],t=this.files.slice(1);return new Promise((n,r)=>{const a=new FileReader;a.onload=a=>{const o=JSON.parse(a.target.result),s=o.modelTopology;if(null==s)return void r(new Error("modelTopology field is missing from file "+e.name));0===t.length&&n({modelTopology:s});const i=o.weightsManifest;if(null==i)return void r(new Error("weightManifest field is missing from file "+e.name));let c;try{c=this.checkManifestAndWeightFiles(i,t)}catch(Xt){return void r(Xt)}const u=[],l=[],p=[];i.forEach(e=>{e.paths.forEach(e=>{l.push(e),p.push(null)}),u.push(...e.weights)}),i.forEach(e=>{e.paths.forEach(e=>{const t=new FileReader;t.onload=t=>{const r=t.target.result,a=l.indexOf(e);if(p[a]=r,-1===p.indexOf(null)){const e={modelTopology:s,weightSpecs:u,weightData:Object(d["d"])(p),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};null!=o.signature&&(e.signature=o.signature),null!=o.userDefinedMetadata&&(e.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(e.modelInitializer=o.modelInitializer),n(e)}},t.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),t.readAsArrayBuffer(c[e])})})},a.onerror=t=>r(`Failed to read model topology and weights manifest JSON from file '${e.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),a.readAsText(e)})}checkManifestAndWeightFiles(e,t){const n=[],r=t.map(e=>Object(d["c"])(e.name)),a={};for(const o of e)o.paths.forEach(e=>{const o=Object(d["c"])(e);if(-1!==n.indexOf(o))throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),-1===r.indexOf(o))throw new Error(`Weight file with basename '${o}' is not provided.`);a[e]=t[r.indexOf(o)]});if(n.length!==t.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${t.length}).`);return a}}const le=e=>Object(l["b"])().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ce.URL_SCHEME)?de(e.slice(ce.URL_SCHEME.length)):null;function de(e="model"){return new ce(e)}function pe(e){return new ue(e)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fe(e,t,n,r){s(e),n=null==n?0:n,r=null==r?1:r,i(n,r);let a=0;const o=o=>(o.then(o=>{const s=n+ ++a/e.length*(r-n);return t(s),o}),o);function s(e){Object(E["b"])(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}function i(e,t){Object(E["b"])(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+e),Object(E["b"])(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+t),Object(E["b"])(t>=e,()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction `+t)}return Promise.all(e.map(o))}p.registerSaveRouter(le);var he=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function me(e,t){null==t&&(t={});const n=null==t.fetchFunc?Object(l["b"])().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=0,o=.5,s=null==t.onProgress?await Promise.all(r):await fe(r,t.onProgress,a,o),i=s.map(e=>e.arrayBuffer()),c=.5,u=1,d=null==t.onProgress?await Promise.all(i):await fe(i,t.onProgress,c,u);return d}async function be(e,t="",n,r){const a=e=>me(e,{requestInit:r}),o=ge(a);return o(e,t,n)}function ge(e){return async(t,n="",r)=>{const a=t.map(()=>!1),o={},s=null!=r?r.map(()=>!1):[],i=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{const c="quantization"in e?e.quantization.dtype:e.dtype,u=he["a"][c]*E["O"](e.shape),l=()=>{a[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach((t,n)=>{t===e.name&&(l(),s[n]=!0)}):l(),i.push(e.name),n+=u})}),!s.every(e=>e)){const e=r.filter((e,t)=>!s[t]);throw new Error("Could not find weights in manifest with names: "+e.join(", ")+". \nManifest JSON has weights with names: "+i.join(", ")+".")}const c=a.reduce((e,t,n)=>(t&&e.push(n),e),[]),u=[];c.forEach(e=>{t[e].paths.forEach(e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)})});const l=await e(u),p={};let f=0;return c.forEach(e=>{const n=t[e].paths.length;let r=0;for(let t=0;t<n;t++)r+=l[f+t].byteLength;const a=new ArrayBuffer(r),s=new Uint8Array(a);let i=0;for(let t=0;t<n;t++){const e=new Uint8Array(l[f+t]);s.set(e,i),i+=e.byteLength}const c=o[e];c.forEach(e=>{const t=a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=Object(d["e"])(t,[e.manifestEntry]);for(const r in n)p[r]=n[r]}),f+=n}),p}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ye="application/octet-stream",xe="application/json";class ve{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Object(E["b"])("function"===typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Object(l["b"])().platform.fetch,Object(E["b"])(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Object(E["b"])(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(r)],{type:xe}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:ye}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:Object(d["g"])(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code `+e.status+". Please verify this URL points to the model JSON of the model to load.");let t;try{t=await e.json()}catch(f){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest,a=t.generatedBy,o=t.convertedBy,s=t.format,i=t.signature,c=t.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let u,l;if(null!=r){const e=await this.loadWeights(r);[u,l]=e}const d={modelTopology:n,weightSpecs:u,weightData:l,generatedBy:a,convertedBy:o,format:s};null!=i&&(d.signature=i),null!=c&&(d.userDefinedMetadata=c);const p=t.modelInitializer;return p&&(d.modelInitializer=p),d}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=Oe(t),a=this.weightPathPrefix||n,o=[];for(const u of e)o.push(...u.weights);const s=[],i=[];for(const u of e)for(const e of u.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):s.push(a+e+r);this.weightUrlConverter&&s.push(...await Promise.all(i));const c=await me(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,Object(d["d"])(c)]}}function Oe(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}function we(e){return null!=e.match(ve.URL_SCHEME_REGEX)}ve.URL_SCHEME_REGEX=/^https?:\/\//;const Ce=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>we(e)):we(e),n)return $e(e,t)}return null};function $e(e,t){return new ve(e,t)}function ke(e,t){return $e(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */p.registerSaveRouter(Ce),p.registerLoadRouter(Ce);class Ie{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class je{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function Ee(e,t,n,r){if(1===arguments.length){const t=null!=e.modelTopology||null!=e.weightSpecs;return t?new Ie(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ie({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ie({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Te(e){return new je(e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ne=n("c05b"),Se=n("73b8"),Ae=n("a3f7"),_e=n("54ef"),Re=n("05bb");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let Fe;function De(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,o=!1,s=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)s=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(a){const t=2;if(a&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}const c=Object(Se["b"])(Ne["eb"],u["a"].backendName);if(null!=c){const n={pixels:e},r={numChannels:t};return u["a"].runKernel(Ne["eb"],n,r)}const[l,d]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];let p,f;if(s?p=e.getContext("2d").getImageData(0,0,l,d).data:r||n?p=e.data:(o||a||i)&&(null==Fe&&(Fe=document.createElement("canvas").getContext("2d")),Fe.canvas.width=l,Fe.canvas.height=d,Fe.drawImage(e,0,0,l,d),p=Fe.getImageData(0,0,l,d).data),4===t)f=new Int32Array(p);else{const e=l*d;f=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)f[n*t+e]=p[4*n+e]}const h=[d,l,t];return Object(Re["a"])(f,h,"int32")}async function Le(e,t){let n=Object(Ae["a"])(e,"img","toPixels");if(!(e instanceof ne["a"])){const e=n;n=Object(Z["a"])(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2];if(o>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const s=await n.data(),i="float32"===n.dtype?255:1,c=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const e=[0,0,0,255];for(let r=0;r<o;r++){const t=s[u*o+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===o?(e[0]=t*i,e[1]=t*i,e[2]=t*i):e[r]=t*i}const t=4*u;c[t+0]=Math.round(e[0]),c[t+1]=Math.round(e[1]),c[t+2]=Math.round(e[2]),c[t+3]=Math.round(e[3])}if(null!=t){t.width=a,t.height=r;const e=t.getContext("2d"),n=new ImageData(c,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),c}const Pe=Object(_e["a"])({fromPixels_:De});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(e,t,n){const r=e.shape.length;E["b"](r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),E["b"](r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)E["b"](t[a]+n[a]<=e.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`)}function Be(e){const t=[];let n=0;while(e>0)1&e&&t.push(n),e/=2,n++;return t}function Ve(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function ze(e,t,n,r){const a=[...e];for(let o=a.length;o<r.length;o++)a.push(1);for(let o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Ue(e,t,n){return n<=e?n:n-(t-1)}function We(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function Ge(e,t,n,r,a,o,s,i,c){const u=e.length;let l=new Array(u),d=new Array(u),p=new Array(u);if(t.length&&n>0){const c=t[0],u=n+1;l=He(s,c,u,r,e),d=Ke(i,c,u,a,e),p=ze(o,c,u,e)}else for(let f=0;f<u;f++)l[f]=Xe(s,r,o,e,f,c),d[f]=Ye(i,a,o,e,f,c),p[f]=qe(o,f,c);return{begin:l,end:d,strides:p}}function He(e,t,n,r,a){const o=[...a],s=We(n,t);for(let i=0;i<o.length;i++)if(s.indexOf(i)>-1)o[i]=0;else{const a=Ue(t,n,i);let s=r[a];e&1<<a&&(s=0),o[i]=s}return o}function Ke(e,t,n,r,a){const o=[...a],s=We(n,t);for(let i=0;i<o.length;i++)if(s.indexOf(i)>-1)o[i]=Number.MAX_SAFE_INTEGER;else{const a=Ue(t,n,i);let s=r[a];e&1<<a&&(s=Number.MAX_SAFE_INTEGER),o[i]=s}for(let i=0;i<o.length;i++){const e=a[i];o[i]<0&&(o[i]+=e),o[i]=E["i"](0,o[i],a[i])}return o}function qe(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Xe(e,t,n,r,a,o){let s=t[a];const i=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=r[a];return s<0&&(s+=c),s=E["i"](0,s,c-1),s}function Ye(e,t,n,r,a,o){let s=t[a];const i=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=r[a];return s<0&&(s+=c),s=i>0?E["i"](0,s,c):E["i"](-1,s,c-1),s}function Qe(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Je(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ze(e,t,n){let r;const a=e.shape.length;let o;return r="number"===typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach(e=>{E["b"](-1!==e,()=>"slice() does not support negative begin indexing.")}),o=null==n?new Array(a).fill(-1):"number"===typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,o=o.map((t,n)=>t>=0?t:(E["b"](-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`),e.shape[n]-r[n])),[r,o]}function et(e,t,n,r,a,o,s,i,c){let u=t.slice(),l=n.slice(),d=r;null==r&&(d=new Array(u.length));const p=Be(s);if(p.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==s&&0!==i)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==s&&0!==c)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const f=e.length-u.length,h=Be(i),m=e.slice();h.forEach(e=>{u[e]=0,l[e]=1,m.splice(e,0,1)});const{begin:b,end:g,strides:y}=Ge(m,p,f,u,l,d,a,o,s);u=b,l=g,d=y;const x=Be(c);x.forEach(e=>{l[e]=u[e]+1,d[e]=1});const v=Ve(u,l,d),O=v.filter((e,t)=>-1===x.indexOf(t)),w=d.every(e=>1===e);return{nonStrided:w,$begin:u,$end:l,$strides:d,size:v,newShape:m,outShape:O}}var tt=n("eb7e"),nt=n("23bf"),rt=n("132b"),at=n("c04e"),ot=n("36e5"),st=n("526f");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function it(e,t){const n=e[0].length;e.forEach((e,t)=>{E["b"](e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`)}),E["b"](t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((e,a)=>{for(let o=0;o<n;o++)E["b"](o===t||e[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function ct(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var ut=n("b818"),lt=n("4749");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const dt=30;function pt(e){return e<=dt?e:Object(E["G"])(e,Math.floor(Math.sqrt(e)))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ft(e,t,n){const r=n*("number"===typeof e?e:e[0]),a=t*("number"===typeof e?e:e[1]);return[r,a]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ht(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function mt(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2===1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function bt(e,t,n,r=!0){const a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function gt(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function yt(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function xt(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===Object(E["O"])(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const a=t.shape,o=a[a.length-1];let s=1;for(let d=0;d<a.length-1;++d)s*=a[d];const i=e.shape,c=a.slice();c.pop();let u=1;for(let d=o;d<n;++d)u*=i[d],c.push(i[d]);const l=[...Object(E["j"])(e.shape).map(e=>e/u),1].slice(0,o);return[c,s,u,l]}var vt=n("a34f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ot=1.7580993408473768,wt=1.0507009873554805,Ct=.3275911,$t=.254829592,kt=-.284496736,It=1.421413741,jt=-1.453152027,Et=1.061405429;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tt(...e){Object(l["b"])().getBool("IS_TEST")||console.warn(...e)}function Nt(...e){Object(l["b"])().getBool("IS_TEST")||console.log(...e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function At(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function _t(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Rt(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Ft(e,t){const n=e[2*t],r=e[2*t+1];return{real:n,imag:r}}function Dt(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Lt(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function Pt(e,t,n){const r=(n?2:-2)*Math.PI*(e/t),a=Math.cos(r),o=Math.sin(r);return{real:a,imag:o}}function Mt(e,t,n=0){let r=[];if("number"===typeof t)Object(E["b"])(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const a=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);Object(E["b"])(a<=1,()=>"There should be only one negative value in split array.");const o=t.indexOf(-1);if(-1!==o){const r=t.reduce((e,t)=>t>0?e+t:e);t[o]=e.shape[n]-r}Object(E["b"])(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bt(e,t){let n,r=!1;e<=dt?(n=e,r=!0):n=Object(E["G"])(e,Math.floor(Math.sqrt(e)));while(!r)n>t||n===e?r=!0:n=Object(E["G"])(e,n+1);return n}function Vt(e,t,n){const r=[],a=e.length;for(let o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function zt(e,t,n,r){const a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const s=e.shape[n],i=[];let c=1,u=1,l=1;for(let d=0;d<r;++d)i.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<n;d++)i.push(e.shape[d]),u*=e.shape[d];for(let d=r;d<a;d++)i.push(t.shape[d]);for(let d=n+1;d<o;d++)i.push(e.shape[d]),l*=e.shape[d];return{batchSize:c,sliceSize:l,outerSize:u,dimSize:s,outputShape:i}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ut(e){try{return e.map(e=>Object(tt["decodeString"])(e))}catch(Xt){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+Xt)}}function Wt(e){return e.map(e=>Object(tt["encodeString"])(e))}var Gt=n("7ed6"),Ht=n("8389"),Kt=n("0280"),qt=n("8b87")},fc6a:function(e,t,n){var r=n("44ad"),a=n("1d80");e.exports=function(e){return r(a(e))}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise},ffb3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6ae2"),a=n("c05b"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(e){const t=Object(o["a"])(e,"x","sigmoid"),n={x:t};return r["a"].runKernel(a["vc"],n)}const c=Object(s["a"])({sigmoid_:i})}}]);